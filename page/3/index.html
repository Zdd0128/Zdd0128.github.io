<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","version":"8.6.1","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<meta property="og:type" content="website">
<meta property="og:title" content="左大大的博客">
<meta property="og:url" content="http://example.com/page/3/index.html">
<meta property="og:site_name" content="左大大的博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="左大大">
<meta property="article:tag" content="Python Linux Vue">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/3/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/3/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>左大大的博客</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">左大大的博客</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="左大大"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">左大大</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">104</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>



          </div>
        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/04/Docker/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="左大大">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="左大大的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/04/Docker/" class="post-title-link" itemprop="url">Docker精简版</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-04 18:20:25" itemprop="dateCreated datePublished" datetime="2020-08-04T18:20:25+08:00">2020-08-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="1-什么是Docker"><a href="#1-什么是Docker" class="headerlink" title="1.什么是Docker?"></a>1.什么是Docker?</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.个人见解：</span><br><span class="line">	Docker就是一个高性能的VM，并且不会浪费资源，主要用于Linux环境的虚拟化，类似VBox这种虚拟机，不同的是Docker专门为了服务器虚拟化，并支持镜像分享等功能。</span><br><span class="line"></span><br><span class="line">	Docker 是一个开源项目,诞生于2013年初,最初是dotCloud公司内部的一个业余项目。它基于Google公司推出的 Go语言实现。项目后来加入了Linux基金会，遵从了Apache2.0协议,项目代码在 GitHub上进行维护。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-Docker作用"><a href="#2-Docker作用" class="headerlink" title="2.Docker作用"></a>2.Docker作用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Docker的主要目标：</span><br><span class="line">	通过对应用组件的封装、分发、部署、运行等生命周期的管理，达到应用级别的一次封装，到处运行。</span><br><span class="line">	小贴士：这里的应用组件，可以是WEB应用，也可以是一套数据库服务，甚至可以是一个操作系统编译器。</span><br></pre></td></tr></table></figure>

<h3 id="3-Docker虚拟化特点"><a href="#3-Docker虚拟化特点" class="headerlink" title="3.Docker虚拟化特点"></a>3.Docker虚拟化特点</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">虚拟化特点:</span><br><span class="line">	1. 环境隔离</span><br><span class="line">	2.更快的交付和部署</span><br><span class="line">	3.更高效的利用资源</span><br><span class="line">	4.更轻松的迁移和扩展</span><br><span class="line">	5.更轻松的管理和更新</span><br></pre></td></tr></table></figure>

<h3 id="4-Docker概念和使用"><a href="#4-Docker概念和使用" class="headerlink" title="4.Docker概念和使用"></a>4.Docker概念和使用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.Docker三大核心概念</span><br><span class="line">	1.镜像(Image):</span><br><span class="line">		Docker镜像就相当于是一个root文件系统。比如官方镜像ubuntu:16.04就包含了完整的一套 Ubuntu16.04最小系统的root文件系统。</span><br><span class="line">	2.容器(Container)</span><br><span class="line">		镜像和容器的关系，就像是面向对象程序设计中的类和实例一样，镜像是静态的定义，容器是镜像运行时的实体。容器可以被创建、启动、停止、删除、暂停等</span><br><span class="line">	3. 仓库(Repository)</span><br><span class="line">		用来保存镜像的仓库。当我们构建好自己的镜像之后，需要存放在仓库中，当我们需要启动一个镜像时，可以在仓库中下载下来。</span><br></pre></td></tr></table></figure>

<h3 id="5-Docker安装"><a href="#5-Docker安装" class="headerlink" title="5.Docker安装"></a>5.Docker安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;</span><span class="string">&#x27;</span></span><br><span class="line"><span class="string">若之前安装过老版本的Docker,则要清理残留</span></span><br><span class="line"><span class="string">[root@python ~]# yum remove docker \</span></span><br><span class="line"><span class="string">    docker-client \</span></span><br><span class="line"><span class="string">    docker-client-latest \</span></span><br><span class="line"><span class="string">    docker-common \</span></span><br><span class="line"><span class="string">    docker-latest \</span></span><br><span class="line"><span class="string">    docker-latest-logrotate \</span></span><br><span class="line"><span class="string">    docker-logrotate \</span></span><br><span class="line"><span class="string">    docker-engine</span></span><br><span class="line"><span class="string">&#x27;</span><span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">1.更换系统yum源</span><br><span class="line">	<span class="comment"># 先备份原来的yum源</span></span><br><span class="line">	[root@python ~]<span class="comment"># cp /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak</span></span><br><span class="line">	<span class="comment"># 更换yum源</span></span><br><span class="line">	[root@python ~]<span class="comment"># curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo</span></span><br><span class="line"></span><br><span class="line">2. 建立yum源缓存</span><br><span class="line">	[root@python ~]<span class="comment"># yum makecache</span></span><br><span class="line">	</span><br><span class="line">3.更新操作系统</span><br><span class="line">	[root@python ~]<span class="comment"># yum update -y --exclud=kernel*</span></span><br><span class="line"></span><br><span class="line">4.安装基础软件</span><br><span class="line">	[root@localhost ~]<span class="comment"># yum install -y yum-utils device-mapper-persistent-data lvm2</span></span><br><span class="line">	</span><br><span class="line">5.安装Docker yum源</span><br><span class="line">	[root@localhost ~]<span class="comment"># yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span></span><br><span class="line"></span><br><span class="line">6.安装Docker</span><br><span class="line">	<span class="comment"># 建立元数据缓存</span></span><br><span class="line">	[root@localhost ~]<span class="comment"># yum makecache fast</span></span><br><span class="line">	<span class="comment"># 安装Docker</span></span><br><span class="line">	[root@localhost ~]<span class="comment"># yum -y install docker-ce</span></span><br><span class="line"></span><br><span class="line">7.启动Docker</span><br><span class="line">	[root@localhost ~]<span class="comment"># systemctl start docker</span></span><br><span class="line">	</span><br><span class="line">8.验证Docker启动</span><br><span class="line">	[root@localhost ~]<span class="comment"># docker run -p 8080:80 -d nginx</span></span><br><span class="line">    ps：测试能够通过8080访问我们的服务器就算成功</span><br><span class="line">   </span><br><span class="line">设置开机启动:</span><br><span class="line">	[root@alvin-test-os ~]<span class="comment"># systemctl enable --now docker</span></span><br></pre></td></tr></table></figure>

<h3 id="6-Docker镜像"><a href="#6-Docker镜像" class="headerlink" title="6.Docker镜像"></a>6.Docker镜像</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker镜像启动容器的模板，镜像一般情况下定义的是容器启动的服务。</span></span><br><span class="line"></span><br><span class="line">获取镜像</span><br><span class="line">	docker pull nginx(官方镜像名称)</span><br><span class="line">	docker pull registry.cn-hangzhou.aliyuncs.com/alvinos/docsfiy:v2(其他镜像路径)</span><br><span class="line">	</span><br><span class="line">1、公共的仓库(dockerHub[官方]、阿里云镜像仓库、华为云镜像仓库、腾讯云镜像仓库)</span><br><span class="line">    registry.cn-hangzhou.aliyuncs.com/alvinos/docsfiy:v2</span><br><span class="line"></span><br><span class="line">		镜像仓库URL：registry.cn-hangzhou.aliyuncs.com(默认：docker.io)</span><br><span class="line">		命名空间：alvinos(默认：library)</span><br><span class="line">		仓库名称：docsfiy</span><br><span class="line">		版本号：v2（默认：latest）</span><br><span class="line"></span><br><span class="line">2、私有的仓库（Harbor）</span><br><span class="line">	登录仓库：</span><br><span class="line">		docker login 仓库url(默认：docker.io)</span><br><span class="line">		</span><br><span class="line">3、获取镜像</span><br><span class="line">	docker pull [镜像名称or镜像路径]</span><br><span class="line">	</span><br><span class="line">4、镜像名称修改（tag）</span><br><span class="line">	docker tag [原来的tag] [新的tag]</span><br><span class="line">	一般将镜像名称改成被提交仓库路径(registry.cn-hangzhou.aliyuncs.com/zdd0128/nginx)</span><br><span class="line">	eg:</span><br><span class="line">		docker tag [镜像名称]:[镜像版本] [新的镜像名称]:[新的镜像版本]</span><br><span class="line">		docker tag [镜像id] [新的镜像名称]:[新的镜像版本]</span><br><span class="line">		docker tag d1a364dc548d(镜像id) registry.cn-hangzhou.aliyuncs.com/zdd0128/nginx:v1</span><br><span class="line">				</span><br><span class="line">5、获取当前系统上所有的docker镜像</span><br><span class="line">	docker image ls 或 docker images</span><br><span class="line">		-a : 列出系统中所有的临时镜像</span><br><span class="line">		--digests=<span class="literal">true</span> ： 列出系统中所有镜像的数字摘要值</span><br><span class="line">		-q : 仅显示镜像ID</span><br><span class="line">		</span><br><span class="line">6、上传镜像</span><br><span class="line">	1、创建阿里云仓库</span><br><span class="line">		产品--&gt;容器镜像--&gt;个人--&gt;添加仓库--&gt;添加名称空间</span><br><span class="line">	2、登录阿里云仓库</span><br><span class="line">		docker login --username=zdd1912419375 registry.cn-hangzhou.aliyuncs.com</span><br><span class="line">	3、修改镜像名称</span><br><span class="line">		docker tag [ImageId] registry.cn-hangzhou.aliyuncs.com/zdd0128/nginx:[镜像版本号]</span><br><span class="line">	4、上传镜像</span><br><span class="line">		docker push registry.cn-hangzhou.aliyuncs.com/zdd0128/nginx:[镜像版本号]</span><br><span class="line">		</span><br><span class="line">7、查看镜像详细信息</span><br><span class="line">	docker inspect [镜像名称|ID]</span><br><span class="line">		-f : 获取镜像部分详细信息</span><br><span class="line">８、删除镜像</span><br><span class="line">	docker rmi [镜像ID或镜像名称]</span><br><span class="line">		-f : 强制删除镜像</span><br><span class="line">	清空机器上所有的镜像</span><br><span class="line">	docker rmi $(docker images -q)</span><br><span class="line"></span><br><span class="line">案例:部署Django项目</span><br><span class="line">	1、拉取镜像</span><br><span class="line">		docker pull alvinos/django:v3</span><br><span class="line">	2、启动</span><br><span class="line">		docker run -d -p 8080:80 alvinos/django:v3</span><br><span class="line">	3、关闭服务</span><br><span class="line">		docker stop [容器名称]</span><br></pre></td></tr></table></figure>

<h4 id="Docker启动mysql"><a href="#Docker启动mysql" class="headerlink" title="Docker启动mysql"></a>Docker启动mysql</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">启动mysql容器</span><br><span class="line">	docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=密码 -d mysql:版本号</span><br><span class="line">		--name 		some-mysql --&gt; 容器名称 j</span><br><span class="line">		-e 			MYSQL_ROOT_PASSWORD --&gt; 设置环境变量,登录使用的密码</span><br><span class="line">进入该容器</span><br><span class="line">	docker exec -it some-mysql /bin/bash</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">添加数据库用户</span><br><span class="line"><span class="meta">	#</span><span class="bash"> 创建用户并授权</span></span><br><span class="line">		GRANT ALL PRIVILEGES ON *.* TO &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;000128&#x27; WITH GRANT OPTION;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">	#</span><span class="bash"> 刷新权限</span></span><br><span class="line">		FLUSH PRIVILEGES;</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="7-Docker容器"><a href="#7-Docker容器" class="headerlink" title="7.Docker容器"></a>7.Docker容器</h3><h4 id="容器基本命令"><a href="#容器基本命令" class="headerlink" title="容器基本命令"></a>容器基本命令</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">容器(container)</span><br><span class="line">	对外提供服务的实例，容器的本质是进程。</span><br><span class="line"></span><br><span class="line">1、运行一个容器</span><br><span class="line">	格式：</span><br><span class="line">		docker run [参数] [镜像名称|ID] [启动容器执行的命令]</span><br><span class="line">		</span><br><span class="line">		启动命令：不指定则执行默认的启动命令，指定则执行指定的命令。</span><br><span class="line">		镜像名称|ID：可以使用镜像名称，也可以使用镜像ID</span><br><span class="line">		参数：使用什么参数在添加什么参数。</span><br><span class="line">		</span><br><span class="line">		docker create + docker start = docker run</span><br><span class="line">	</span><br><span class="line">	前提：</span><br><span class="line">		docker容器启动的前提：至少有一个应用进程运行在前台。</span><br><span class="line">	</span><br><span class="line">	启动流程：</span><br><span class="line">        1、检查本地是否存在需要被使用的镜像，如果存在则直接使用，如果不存在则去公网下载。</span><br><span class="line">        2、根据镜像创建容器</span><br><span class="line"></span><br><span class="line">    参数：</span><br><span class="line">   		-d : 以守护进程方式运行</span><br><span class="line">   		-p : （固定）端口映射</span><br><span class="line">   		-P : （随机）端口映射</span><br><span class="line">   		-i : 打开标准输出</span><br><span class="line">   		-t : 创建一个终端</span><br><span class="line">   		-v : 将宿主主机上的目录映射到容器中</span><br><span class="line">   		--rm : 当容器的生命周期结束时立即删除容器</span><br><span class="line">   		--name : 将容器自定义一个容器名称， 将容器的名称加入DNS解析</span><br><span class="line">   		-e : 设置容器内部的环境变量</span><br><span class="line">   		-h : 设置容器内部的主机名</span><br><span class="line"></span><br><span class="line">127.0.0.1 回环网络</span><br><span class="line">172.16.1.100 </span><br><span class="line"></span><br><span class="line">2、展示docker容器列表</span><br><span class="line">	docker ps 默认情况下展示当前系统上所有的正在运行的容器</span><br><span class="line">	格式：</span><br><span class="line">		docker ps</span><br><span class="line">	解释：</span><br><span class="line">		CONTAINER ID：容器ID</span><br><span class="line">		IMAGE		：镜像ID|镜像名称</span><br><span class="line">		COMMAND		：容器启动执行的命令</span><br><span class="line">		CREATED		：创建距离现在的时间</span><br><span class="line">		STATUS		：状态</span><br><span class="line">		PORTS		：端口信息</span><br><span class="line">		NAMES		：容器的名称</span><br><span class="line">	</span><br><span class="line">	参数：</span><br><span class="line">		-a : 展示所有的容器</span><br><span class="line">		-q : 仅仅展示容器的ID</span><br><span class="line"></span><br><span class="line">3、删除容器</span><br><span class="line">	格式：</span><br><span class="line">		docker rm [容器的名称|ID]</span><br><span class="line">	</span><br><span class="line">	参数：</span><br><span class="line">		-f : 强制删除</span><br><span class="line">		</span><br><span class="line">	docker rm -f $(docker ps -a -q)</span><br><span class="line"></span><br><span class="line">4、创建容器</span><br><span class="line">	格式：</span><br><span class="line">		docker create </span><br><span class="line"></span><br><span class="line">5、启动容器</span><br><span class="line">	格式：</span><br><span class="line">		docker start </span><br><span class="line"></span><br><span class="line">6、进入容器</span><br><span class="line">	1、attach</span><br><span class="line">		解释：建立一个宿主主机到容器中pid为1的进程上的一个管道，但是一旦attach断开连接，docker容器随即退出。</span><br><span class="line">	2、exec（推荐）</span><br><span class="line">		解释：使用其可以在宿主主机上执行一个容器内部的命令。</span><br><span class="line">		docker exec -it relaxed_bhabha bash</span><br><span class="line">	3、nsenter</span><br><span class="line">		解释：建立一个宿主主机和容器之间的一个管道。</span><br><span class="line">		nsenter --target $( docker inspect -f &#123;&#123;.State.Pid&#125;&#125; elegant_margulis ) --mount --uts --ipc --net --pid</span><br><span class="line">		</span><br><span class="line">	4、ssh</span><br></pre></td></tr></table></figure>

<h4 id="容器和镜像的导入导出"><a href="#容器和镜像的导入导出" class="headerlink" title="容器和镜像的导入导出"></a>容器和镜像的导入导出</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">1、export和import</span><br><span class="line">	解释：针对的点是容器</span><br><span class="line">	</span><br><span class="line">	格式：</span><br><span class="line">		docker export -o [打包的文件名] [容器ID或名称]</span><br><span class="line">		docker export -o django.tar elegant_margulis</span><br><span class="line">		</span><br><span class="line">		docker import [文件名] [镜像名及版本号]</span><br><span class="line">		docker import django.tar django:v1</span><br><span class="line"></span><br><span class="line">2、save和load</span><br><span class="line">	解释：针对的点的镜像</span><br><span class="line">	</span><br><span class="line">	格式：</span><br><span class="line">		docker save -o [打包的文件名]  镜像名称及版本号</span><br><span class="line">		docker save -o python.tar python:3.6.8 alvinos/django:v3</span><br><span class="line">		</span><br><span class="line">		docker load &lt; [打包的文件名]</span><br><span class="line">		docker load &lt; python.tar</span><br><span class="line"></span><br><span class="line">3、import及export 和 save及load之间的区别</span><br><span class="line">	1、import可以自定义镜像名称，load则不行</span><br><span class="line">	2、save可以同时保存多个镜像，export则不能一次保存多个容器</span><br><span class="line">	3、save保存的镜像体积要大于export保存的镜像体积</span><br><span class="line">	4、两者之间互不能导入</span><br></pre></td></tr></table></figure>

<h5 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">1、什么是容器，什么是docker？</span><br><span class="line">    通过镜像运行起来的对外可以提供服务的一个进程实例。</span><br><span class="line">    docker是使用容器的一个软件。</span><br><span class="line"></span><br><span class="line">2、安装</span><br><span class="line">    windows</span><br><span class="line">    linux</span><br><span class="line">    1、配置yum源</span><br><span class="line">    2、安装需要依赖的软件</span><br><span class="line">    3、yum install docker-ce</span><br><span class="line">    4、启动 systemctl start docker</span><br><span class="line">    5、测试 docker run -d -p 8080:80 nginx</span><br><span class="line"></span><br><span class="line">3、镜像</span><br><span class="line">    启动容器的模板。</span><br><span class="line">	1、下载镜像</span><br><span class="line">		docker pull [仓库URL]/[命名空间名]/[仓库名]:[版本号]</span><br><span class="line">	2、镜像列表</span><br><span class="line">		docker images 或 docker image ls</span><br><span class="line">	3、增加镜像名称</span><br><span class="line">		docker tag [原名称] [新名词]</span><br><span class="line">	4、登录镜像仓库</span><br><span class="line">		docker login [仓库URL]</span><br><span class="line">	5、上传镜像</span><br><span class="line">		docker push [仓库URL]/[命名空间名]/[仓库名]:[版本号]</span><br><span class="line">	6、删除镜像</span><br><span class="line">		docker rmi [镜像名称]</span><br><span class="line">	7、查看镜像详细信息</span><br><span class="line">		docker inspect [镜像名称或ID]</span><br><span class="line">	</span><br><span class="line">		7.1、获取某一项信息</span><br><span class="line">			docker inspect -f &quot;&#123;&#123; .Id &#125;&#125;&quot; [镜像名称或ID]</span><br></pre></td></tr></table></figure>

<h3 id="8-linux网络"><a href="#8-linux网络" class="headerlink" title="8.linux网络"></a>8.linux网络</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 创建一个命名空间</span><br><span class="line">	ip netns add test01</span><br><span class="line"># 查看创建过的命名空间</span><br><span class="line">	ip netns list</span><br><span class="line"></span><br><span class="line"># 创建Veth设备对</span><br><span class="line">	ip link add veth type veth peer name veth001</span><br><span class="line"></span><br><span class="line"># 将Veth设备对分发至test01命名空间</span><br><span class="line">	ip link set veth001 netns test01</span><br><span class="line"></span><br><span class="line"># 将test01中veth001分配IP</span><br><span class="line">	ip netns exec test01 ip addr add 172.16.0.111/20 dev veth001</span><br><span class="line">	ip addr add 172.16.0.112/20 dev veth</span><br><span class="line">				</span><br><span class="line"># 重启veth设备对</span><br><span class="line">	ip netns exec test01 ip link set dev veth001 up/down</span><br></pre></td></tr></table></figure>

<h3 id="9-Docker网络模式"><a href="#9-Docker网络模式" class="headerlink" title="9.Docker网络模式"></a>9.Docker网络模式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">1、HOST模式</span><br><span class="line">	使用宿主主机的网卡</span><br><span class="line">	docker run --network host [镜像名称|ID]</span><br><span class="line"></span><br><span class="line">2、container模式</span><br><span class="line">	共享一个容器的网络</span><br><span class="line">	docker run -d --network &quot;container:[共享容器名称]&quot; nginx</span><br><span class="line">	</span><br><span class="line">3、none模式</span><br><span class="line">	不为容器提供任何网络。</span><br><span class="line">	docker run -d --network none centos</span><br><span class="line">	</span><br><span class="line">4、网桥</span><br><span class="line">	将多个容器使用docker网桥进行地址转换的方式实现网路互通</span><br><span class="line"></span><br><span class="line">	1、创建网桥</span><br><span class="line">	docker network create chenyang</span><br><span class="line">	</span><br><span class="line">	2、查看网桥</span><br><span class="line">	docker network ls</span><br><span class="line">	</span><br><span class="line">	3、使用网桥</span><br><span class="line">	docker run -d --network chenyang nginx</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="10-Docker-network"><a href="#10-Docker-network" class="headerlink" title="10.Docker network"></a>10.Docker network</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">1、展示当前主机上网桥列表</span><br><span class="line">	docker network ls</span><br><span class="line"></span><br><span class="line">2、创建网桥</span><br><span class="line">	docker network create</span><br><span class="line">    </span><br><span class="line">    参数：</span><br><span class="line">    	-d : 指定网桥的类型</span><br><span class="line">    	--gateway : 指定网关</span><br><span class="line">    	--subnet : 指定子网</span><br><span class="line"></span><br><span class="line">3、查看网桥的详细信息</span><br><span class="line">	docker network inspect [网桥名称|id]</span><br><span class="line"></span><br><span class="line">4、删除网桥</span><br><span class="line">	docker network rm </span><br><span class="line"></span><br><span class="line">5、清空空闲的并且是自创的网桥</span><br><span class="line">	docker network prune -f</span><br><span class="line"></span><br><span class="line">6、连接上一个网桥</span><br><span class="line">	docker network connect [参数] [网桥名称] [容器名称]</span><br><span class="line"></span><br><span class="line">7、断开链接</span><br><span class="line">	docker network disconnect [参数] [网桥名称] [容器名称]</span><br></pre></td></tr></table></figure>

<h3 id="11-Docker-compose"><a href="#11-Docker-compose" class="headerlink" title="11.Docker-compose"></a>11.Docker-compose</h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装:"></a>安装:</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">docker-compose是容器编排工具，需要注意的是，docker-compose只是单机的容器编排工具。</span><br><span class="line"></span><br><span class="line">1、docker-compose 默认的配置文件为：docker-compose.yaml</span><br><span class="line"></span><br><span class="line">2、安装docker-compose</span><br><span class="line">	1、下载</span><br><span class="line">		sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose</span><br><span class="line">		</span><br><span class="line">		curl -L https://get.daocloud.io/docker/compose/releases/download/1.24.0/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose</span><br><span class="line">		</span><br><span class="line">	2、chmod +x docker-compose-Linux-x86_64</span><br><span class="line">	3、mv docker-compose-Linux-x86_64 /usr/local/bin/</span><br><span class="line">	4、ln -s /usr/local/bin/docker-compose-Linux-x86_64 /usr/local/bin/docker-compose</span><br><span class="line">	5、curl -L https://raw.githubusercontent.com/docker/compose/1.25.5/contrib/completion/bash/docker-compose &gt; /etc/bash_completion.d/docker-compose</span><br></pre></td></tr></table></figure>

<h4 id="Docker-compose-yaml文件"><a href="#Docker-compose-yaml文件" class="headerlink" title="Docker-compose.yaml文件"></a>Docker-compose.yaml文件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">version: &quot;3.0&quot;</span><br><span class="line">services:</span><br><span class="line">  django:</span><br><span class="line">    image: django:v3</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;8000:8000&quot;</span><br><span class="line">    container_name: django</span><br><span class="line">    networks:</span><br><span class="line">      - django</span><br><span class="line">    depends_on:</span><br><span class="line">      - mysql</span><br><span class="line"></span><br><span class="line">  mysql:</span><br><span class="line">    image: mysql:5.7</span><br><span class="line">    environment:</span><br><span class="line">      MYSQL_ROOT_PASSWORD: root</span><br><span class="line">    container_name: mysql</span><br><span class="line">    volumes:</span><br><span class="line">    - &quot;/root/docker-compose/mysql/data:/var/lib/mysql&quot;</span><br><span class="line">    networks:</span><br><span class="line">      - django</span><br><span class="line">    depends_on:</span><br><span class="line">      - redis</span><br><span class="line"></span><br><span class="line">  redis:</span><br><span class="line">    image: redis:latest</span><br><span class="line">    container_name: redis</span><br><span class="line">    networks:</span><br><span class="line">      - django</span><br><span class="line"></span><br><span class="line">networks:</span><br><span class="line">  django:</span><br></pre></td></tr></table></figure>

<h4 id="Docker-compose指令"><a href="#Docker-compose指令" class="headerlink" title="Docker-compose指令"></a>Docker-compose指令</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># build</span></span><br><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.0&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">django:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">./django</span></span><br><span class="line"></span><br><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.0&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">django:</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./django</span></span><br><span class="line">      <span class="attr">dockerfile:</span> <span class="string">Dockerfile-py</span></span><br><span class="line">      <span class="attr">args:</span></span><br><span class="line">        <span class="attr">NAME:</span> <span class="string">py17</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># command</span></span><br><span class="line"><span class="string">设置容器启动命令</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># depends_on ： 指定在某容器之后启动</span></span><br><span class="line"><span class="comment"># env_file ： 指定环境变量文件</span></span><br></pre></td></tr></table></figure>

<h4 id="Docker-compose参数"><a href="#Docker-compose参数" class="headerlink" title="Docker-compose参数"></a>Docker-compose参数</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动：docker-compose up</span></span><br><span class="line"><span class="comment"># 删除：docker-compose down</span></span><br><span class="line"><span class="comment"># 停止：docker-compose stop</span></span><br><span class="line"><span class="comment"># 删除容器：docker-compose rm </span></span><br><span class="line"><span class="comment"># 重启：docker-compose restart [容器的名称]</span></span><br><span class="line"><span class="comment"># 进入容器：docker-compose exec [参数] [service] [CMD]</span></span><br><span class="line"><span class="comment"># 容器列表：docker-compose ps</span></span><br><span class="line"><span class="comment"># 查看容器进程：docker-compose top </span></span><br><span class="line"><span class="comment"># 暂停运行：docker-compose pause</span></span><br><span class="line"><span class="comment"># 恢复运行：docker-compose unpause</span></span><br></pre></td></tr></table></figure>

<h4 id="可视化工具"><a href="#可视化工具" class="headerlink" title="可视化工具"></a>可视化工具</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">version: &#x27;3.0&#x27;</span><br><span class="line">services:</span><br><span class="line">  portainer:</span><br><span class="line">    image: portainer/portainer-ce</span><br><span class="line">    ports:</span><br><span class="line">    - &quot;8001:8000&quot;</span><br><span class="line">    - &quot;9001:9000&quot;</span><br><span class="line">    container_name: portainer</span><br><span class="line">    networks:</span><br><span class="line">      - &quot;portainer&quot;</span><br><span class="line">    volumes:</span><br><span class="line">    - &quot;/var/run/docker.sock:/var/run/docker.sock&quot;</span><br><span class="line">    - &quot;/root/docker-compose/portainer_data:/data&quot;</span><br><span class="line">    healthcheck:</span><br><span class="line">      test: [&quot;CMD&quot;, &quot;ping&quot;, &quot;-c1&quot;, &quot;-t1&quot;, &quot;portainer&quot;]</span><br><span class="line">      interval: 30s</span><br><span class="line">      timeout: 10s</span><br><span class="line">      retries: 3</span><br><span class="line"></span><br><span class="line">networks:</span><br><span class="line">  portainer:</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/07/16/rpm%E8%BD%AF%E4%BB%B6%E5%8C%85%20/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="左大大">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="左大大的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/07/16/rpm%E8%BD%AF%E4%BB%B6%E5%8C%85%20/" class="post-title-link" itemprop="url">Linuxrpm软件包</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-07-16 18:20:25" itemprop="dateCreated datePublished" datetime="2020-07-16T18:20:25+08:00">2020-07-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="rpm软件包"><a href="#rpm软件包" class="headerlink" title="rpm软件包"></a>rpm软件包</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装：rpm -ivh &quot;包路径&quot;</span></span><br><span class="line"><span class="comment"># 升级：rpm -Uvh &quot;包路径&quot;</span></span><br><span class="line"><span class="comment"># 卸载：rpm -e &quot;包名称&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="RPM包格式举例"><a href="#RPM包格式举例" class="headerlink" title="RPM包格式举例"></a>RPM包格式举例</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 例1</span></span><br><span class="line">    mysql-connector-odbc-5.2.5-8.el7.x86_64.rpm</span><br><span class="line">    软件包名：mysql-connector-odbc</span><br><span class="line">    版本号Version：5.2.5</span><br><span class="line">    发布版本Release：8.el7</span><br><span class="line">    平台：el7.x86_64</span><br><span class="line">    后缀：.rpm</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 例2</span></span><br><span class="line">    abrt-python-doc-2.1.11-57.el7.centos.noarch.rpm</span><br><span class="line">    abrt-python-doc 		<span class="comment">#软件包的名称</span></span><br><span class="line">    2.1.11 					<span class="comment">#软件的版本</span></span><br><span class="line">    57 						<span class="comment">#软件编译之后的发布的次数</span></span><br><span class="line">    el7 					<span class="comment">#适合的操作系统的版本</span></span><br><span class="line">    noarch 					<span class="comment">#适⽤于不同版本的CPU </span></span><br><span class="line">    .rpm 					<span class="comment">#后缀名</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 查看⾃⼰当前平台</span></span><br><span class="line">[root@localhost ~]<span class="comment"># uname -m</span></span><br><span class="line">x86_64</span><br></pre></td></tr></table></figure>

<h4 id="管理rpm包有两种命令"><a href="#管理rpm包有两种命令" class="headerlink" title="管理rpm包有两种命令"></a>管理rpm包有两种命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1、rpm命令：</span></span><br><span class="line"> 需要⾃⼰找到rpm包，并且⼿动解决包的依赖性关系</span><br><span class="line"> ps：实际情况下，很难分辨缺少什么依赖包</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 2、yum命令：</span></span><br><span class="line"> 相关rpm包事先都被存放于⼀个仓库⾥，仓库包含了所有的依赖包，所以yum按照可以帮我们解决依赖性问题</span><br></pre></td></tr></table></figure>

<h4 id="RPM包获取"><a href="#RPM包获取" class="headerlink" title="RPM包获取"></a>RPM包获取</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.本地的ISO镜像光盘(软件包可能存在版本偏低情况) : 挂载镜像有以下三种⽅式</span></span><br><span class="line">⽅式1： [root@localhost ~]<span class="comment"># mount /dev/cdrom /opt/</span></span><br><span class="line"></span><br><span class="line">⽅式2： [root@localhost ~]<span class="comment"># mount /dev/sr0 /opt/</span></span><br><span class="line"></span><br><span class="line">⽅式3 [root@localhost ~]<span class="comment"># mount -o loop /xxx.iso /opt</span></span><br><span class="line"></span><br><span class="line">查看光盘⾥的rpm包 [root@localhost ~]<span class="comment"># ls /opt/Packages/</span></span><br><span class="line"><span class="comment"># 2.⾃⼰去⽹上下载rpm包进⾏安装</span></span><br><span class="line"><span class="comment"># 3.联⽹从yum仓库⾥获取rpm包 # yum的时候</span></span><br></pre></td></tr></table></figure>

<h3 id="1-rpm命令"><a href="#1-rpm命令" class="headerlink" title="1.rpm命令"></a>1.rpm命令</h3><h5 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1、安装：rpm -ivh &lt;RPM包名全称&gt;</span></span><br><span class="line"><span class="comment">#2、卸载：rpm -e &lt;RPM包名&gt;</span></span><br><span class="line"><span class="comment">#3、升级：rpm -Uvh &lt;RPM包名&gt;</span></span><br><span class="line"><span class="comment">#4、查询：</span></span><br><span class="line">	rpm -qa 					 <span class="comment">#查询系统中安装的所有RPM软件包</span></span><br><span class="line">	rpm -qa | grep php 　　 	   <span class="comment">#检索系统中已经安装有关php的软件包</span></span><br><span class="line">	rpm -q &lt;RPM包名&gt; 　　 		  <span class="comment">#查询指定软件包是否已安装</span></span><br><span class="line"> 								[root@egon ~]<span class="comment"># rpm -q zip</span></span><br><span class="line"> 								zip-3.0-11.el7.x86_64</span><br><span class="line"> </span><br><span class="line">rpm -qi &lt;RPM包名&gt; 　　 				<span class="comment">#查询系统中已安装包的描述信息</span></span><br><span class="line">rpm -ql &lt;RPM包名&gt; 　　 				<span class="comment">#查询系统中已安装包⾥所包含的⽂件</span></span><br><span class="line">rpm -qc &lt;RPM包名&gt; 				 <span class="comment">#查询指定软件包的所有配置⽂件</span></span><br><span class="line"> 									[root@egon ~]<span class="comment"># rpm -qc mariadb</span></span><br><span class="line"> 									/etc/my.cnf.d/client.cnf</span><br><span class="line">rpm -qd &lt;RPM包名&gt;					 <span class="comment"># 查询某个包安装的帮助⽂档</span></span><br><span class="line"> 									[root@localhost ~]<span class="comment"># rpm -qd zlib </span></span><br><span class="line"> </span><br><span class="line">rpm -qf ⽂件路径　　 				  <span class="comment">#查询系统中指定⽂件所属的软件包</span></span><br><span class="line">                                     [root@egon ~]<span class="comment"># rpm -qf /usr/sbin/ifconfig</span></span><br><span class="line">                                     net-tools-2.0-0.25.20131004git.el7.x86_64</span><br><span class="line">-p 							<span class="comment"># 在上述选项的基础上加选项-p，就可以查看尚未安装的rpm包信息</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -e dos2unix # 先卸载⼀下，证明本地rpm数据库中没有该包信息</span></span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -qip /opt/Packages/dos2unix-6.0.3-7.el7.x86_64.rpm</span></span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -qlp /opt/Packages/dos2unix-6.0.3-7.el7.x86_64.rpm</span></span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -qcp /opt/Packages/dos2unix-6.0.3-7.el7.x86_64.rpm</span></span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -qdp /opt/Packages/dos2unix-6.0.3-7.el7.x86_64.rpm</span></span><br><span class="line"></span><br><span class="line">额外选项</span><br><span class="line">--nomd5 	<span class="comment"># 不检验软件包的签名</span></span><br><span class="line">--nodeps 	<span class="comment"># 忽略依赖性安装软件，安装后软件有可能⽆法使⽤，最好是解决依赖性后再安装</span></span><br><span class="line"> 				[root@localhost ~]<span class="comment"># rpm -e dos2unix --nodeps # 忽略依赖关系</span></span><br><span class="line"> </span><br><span class="line">--force <span class="comment"># 强制安装软件包,只有安装和升级可以强制执⾏</span></span><br></pre></td></tr></table></figure>

<h5 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1、rpm包在本地</span></span><br><span class="line">	[root@egon ~]<span class="comment"># mount /dev/sr0 /opt</span></span><br><span class="line">	[root@egon ~]<span class="comment"># rpm -ivh /opt/Packages/dos2unix-6.0.3-7.el7.x86_64.rpm</span></span><br><span class="line"><span class="comment">#2、rpm来⾃于⽹络，如果安装过程中报错：curl: (60) Peer&#x27;s Certificate has expired，请先将系统时间修改正确，然后再安装即可</span></span><br><span class="line">[root@egon ~]<span class="comment"># rpm -ivh</span></span><br><span class="line">https://mirrors.aliyun.com/zabbix/zabbix/4.0/rhel/7/x86_64/zabbix-agent-4.0.0-</span><br><span class="line">2.el7.x86_64.rpm</span><br></pre></td></tr></table></figure>

<h5 id="安装与依赖性"><a href="#安装与依赖性" class="headerlink" title="安装与依赖性"></a>安装与依赖性</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@egon ~]<span class="comment"># rpm -ivh /opt/Packages/httpd-2.4.6-88.el7.centos.x86_64.rpm</span></span><br><span class="line">错误：依赖检测失败：</span><br><span class="line"> 	/etc/mime.types 被 httpd-2.4.6-88.el7.centos.x86_64 需要</span><br><span class="line"> 	httpd-tools = 2.4.6-88.el7.centos 被 httpd-2.4.6-88.el7.centos.x86_64 需要</span><br><span class="line"> 	libapr-1.so.0()(64bit) 被 httpd-2.4.6-88.el7.centos.x86_64 需要</span><br><span class="line"> 	libaprutil-1.so.0()(64bit) 被 httpd-2.4.6-88.el7.centos.x86_64 需要</span><br><span class="line">[root@egon ~]<span class="comment">#</span></span><br><span class="line"><span class="comment"># 解决思路：安装提示的库，安装</span></span><br><span class="line">[root@egon ~]<span class="comment"># rpm -ivh /opt/Packages/apr-1.4.8-3.el7_4.1.x86_64.rpm</span></span><br><span class="line">[root@egon ~]<span class="comment"># rpm -ivh /opt/Packages/apr-util-1.5.2-6.el7.x86_64.rpm</span></span><br><span class="line">[root@egon ~]<span class="comment"># rpm -ivh /opt/Packages/httpd-tools-2.4.6-88.el7.centos.x86_64.rpm</span></span><br><span class="line">[root@egon ~]<span class="comment"># yum search mime.types # 查看到mime.types对应的依赖包为mailcap-。。。</span></span><br><span class="line">[root@egon ~]<span class="comment"># rpm -ivh /opt/Packages/mailcap-2.1.41-2.el7.noarch.rpm</span></span><br><span class="line">然后重新安装</span><br><span class="line">[root@egon ~]<span class="comment"># rpm -ivh /opt/Packages/httpd-2.4.6-88.el7.centos.x86_64.rpm</span></span><br><span class="line">准备中... <span class="comment">################################# [100%]</span></span><br><span class="line">正在升级/安装...</span><br><span class="line"> 1:httpd-2.4.6-88.el7.centos <span class="comment">################################# [100%]</span></span><br></pre></td></tr></table></figure>

<h5 id="升级rpm包"><a href="#升级rpm包" class="headerlink" title="升级rpm包"></a>升级rpm包</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1、下载⼀个低版本、⼀个⾼版本</span></span><br><span class="line">wget https://mirrors.aliyun.com/zabbix/zabbix/3.0/rhel/7/x86_64/zabbix-agent-3.0.9-</span><br><span class="line">1.el7.x86_64.rpm</span><br><span class="line">wget https://mirrors.aliyun.com/zabbix/zabbix/4.2/rhel/7/x86_64/zabbix-agent-4.2.0-</span><br><span class="line">1.el7.x86_64.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment">#2、先安装低版本</span></span><br><span class="line">[root@egon ~]<span class="comment"># rpm -ivh zabbix-agent-3.0.9-1.el7.x86_64.rpm</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#3、再安装⾼版本，会报错</span></span><br><span class="line">[root@egon ~]<span class="comment"># rpm -ivh zabbix-agent-4.2.0-1.el7.x86_64.rpm</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#4、如果采⽤--force选项，那就是强制安装，会同时存在两个版本，该⽅案不可取</span></span><br><span class="line">[root@egon ~]<span class="comment"># rpm -qa |grep zabbix</span></span><br><span class="line">zabbix-agent-3.0.9-1.el7.x86_64</span><br><span class="line">[root@egon ~]<span class="comment"># rpm -ivh zabbix-agent-4.2.0-1.el7.x86_64.rpm --force</span></span><br><span class="line">。。。安装成功。。。</span><br><span class="line">[root@egon ~]<span class="comment"># rpm -qa |grep zabbix # 同时两个版本共存</span></span><br><span class="line">zabbix-agent-3.0.9-1.el7.x86_64</span><br><span class="line">zabbix-agent-4.2.0-1.el7.x86_64</span><br><span class="line"></span><br><span class="line"><span class="comment">#5、重来，采⽤升级⽅式安装</span></span><br><span class="line">[root@egon ~]<span class="comment"># rpm -e zabbix-agent-3.0.9-1.el7.x86_64</span></span><br><span class="line">[root@egon ~]<span class="comment"># rpm -e zabbix-agent-4.2.0-1.el7.x86_64</span></span><br><span class="line">[root@egon ~]<span class="comment"># rpm -qa |grep zabbix</span></span><br><span class="line">[root@egon ~]<span class="comment"># rpm -ivh zabbix-agent-3.0.9-1.el7.x86_64.rpm</span></span><br><span class="line">。。。</span><br><span class="line">[root@egon ~]<span class="comment"># rpm -Uvh zabbix-agent-4.2.0-1.el7.x86_64.rpm</span></span><br><span class="line">。。。清理⽼版本，安装新版本。。。</span><br><span class="line">[root@egon ~]<span class="comment"># rpm -qa |grep zabbix-agent # 只留下⼀个新版本</span></span><br><span class="line">zabbix-agent-4.2.0-1.el7.x86_64</span><br></pre></td></tr></table></figure>

<h5 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">安装如下软件包:</span><br><span class="line">	vsftpd</span><br><span class="line">    samba</span><br><span class="line">    nfs-utils</span><br><span class="line">    httpd</span><br><span class="line">    dhcp</span><br><span class="line">    postfix</span><br><span class="line">    php</span><br><span class="line">    lftp</span><br><span class="line">    dos2unix</span><br><span class="line">    unix2dos</span><br><span class="line">    tigervnc</span><br></pre></td></tr></table></figure>

<h3 id="2-yum软件包管理工具"><a href="#2-yum软件包管理工具" class="headerlink" title="2.yum软件包管理工具"></a>2.yum软件包管理工具</h3><h5 id="查看yum命令与配置文件"><a href="#查看yum命令与配置文件" class="headerlink" title="查看yum命令与配置文件"></a>查看yum命令与配置文件</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># rpm -q yum</span></span><br><span class="line">	yum-3.4.3-161.el7.centos.noarch</span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -qc yum</span></span><br><span class="line">    /etc/logrotate.d/yum</span><br><span class="line">    /etc/yum.conf</span><br><span class="line">    /etc/yum/version-groups.conf</span><br></pre></td></tr></table></figure>

<h5 id="yum常用命令"><a href="#yum常用命令" class="headerlink" title="yum常用命令"></a>yum常用命令</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">常⽤选项说明：</span><br><span class="line"><span class="comment">#仓库 </span></span><br><span class="line">         yum repolist 							<span class="comment"># 查询可⽤仓库</span></span><br><span class="line">         yum repolist all 						<span class="comment">#查看包括已启⽤或禁⽤的所有仓库状态</span></span><br><span class="line">         <span class="comment"># 关闭与启⽤仓库：本质:都是在修改repo⽂件中的enable的值 0 不启⽤ 1 启⽤</span></span><br><span class="line">         yum-config-manager --<span class="built_in">disable</span> epel 		<span class="comment">#关闭仓库epel</span></span><br><span class="line">         yum-config-manager --<span class="built_in">enable</span> epel 		<span class="comment">#启⽤仓库epel</span></span><br><span class="line"><span class="comment">#查看</span></span><br><span class="line">    	yum list 								<span class="comment">#列出可⽤仓库中所有的软件包</span></span><br><span class="line">     	yum list | less</span><br><span class="line">     	yum grouplist 							<span class="comment">#列出可⽤仓库中的软件组</span></span><br><span class="line"></span><br><span class="line"> yum provides /usr/sbin/ifconfig 				<span class="comment">#查询命令所属的软件包，可以不加路径，只写命</span></span><br><span class="line">令名字</span><br><span class="line">                                                 <span class="comment">#与rpm -qf的区别在于yum provides后可以只</span></span><br><span class="line">跟命名名</span><br><span class="line"> </span><br><span class="line"><span class="comment">#安装 </span></span><br><span class="line">        yum install httpd httpd-tools		  <span class="comment">#加上-y选项可以变成⾮交互</span></span><br><span class="line">        yum groupinstall <span class="string">&quot;开发⼯具&quot;</span> -y 			<span class="comment">#安装软件组，⼀个软件组中包含了多个软件包</span></span><br><span class="line">        yum groups install <span class="string">&quot;开发⼯具&quot;</span> -y 		<span class="comment">#同上</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#卸载 </span></span><br><span class="line">		yum remove httpd httpd-tools http* 			   <span class="comment">#卸载软件包</span></span><br><span class="line"> 		yum groupremove <span class="string">&quot;开发⼯具&quot;</span> -y. 					<span class="comment">#卸载软件组</span></span><br><span class="line">		yum groups remove <span class="string">&quot;开发⼯具&quot;</span> -y 				<span class="comment">#同上</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">#重装 	</span></span><br><span class="line">		yum reinstall httpd 		<span class="comment">#不⼩⼼删除了配置⽂件的时,可以reinstall⼀下</span></span><br><span class="line">		</span><br><span class="line"><span class="comment">#更新 	</span></span><br><span class="line">		yum check-update 			<span class="comment">#检查可以更新的软件包</span></span><br><span class="line"> 		yum update -y 				<span class="comment">#更新所有软件包,包括内核,通常只在刚装完系统时执⾏</span></span><br><span class="line"> 		yum update httpd -y 		<span class="comment">#更新某个软件包</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">#缓存 </span></span><br><span class="line">         yum makecache 				<span class="comment">#制作元数据缓存</span></span><br><span class="line">         yum clean all 				<span class="comment">#清理元数据缓存</span></span><br><span class="line">         vim /etc/yum.conf 			<span class="comment">#默认软件包下载安装后会⾃动删除</span></span><br><span class="line">         </span><br><span class="line">                                     <span class="comment">#设置keepcache=1 即开启了软件包缓存</span></span><br><span class="line">                                     <span class="comment">#缓存⽬录为配置⽂件中指定的cachedir</span></span><br><span class="line">                                     </span><br><span class="line"><span class="comment">#历史记录</span></span><br><span class="line">         yum <span class="built_in">history</span> 				 <span class="comment"># 查看执⾏过的yum命令历史记录</span></span><br><span class="line">         yum <span class="built_in">history</span> info ID号 		<span class="comment"># 查看具体某⼀条yum命令的详细信息</span></span><br><span class="line">         yum <span class="built_in">history</span> undo ID号 		<span class="comment"># 撤销执⾏过的历史命令</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># 关于安装需要注意：</span></span><br><span class="line"></span><br><span class="line">⽆论yum安装的软件来⾃何⽅，yum时刻以⾃⼰仓库中的repodata存储的依赖关系为准，如果有多个仓库，就依</span><br><span class="line">次检索</span><br><span class="line"></span><br><span class="line"><span class="comment">#1、yum直接安装公⽹的rpm包, 会⾃动查找当前系统上已有的仓库解决依赖关系</span></span><br><span class="line">	yum install https://mirrors.aliyun.com/centos/7.6.1810/os/x86_64/Packages/samba-</span><br><span class="line">4.8.3-4.el7.x86_64.rpm</span><br><span class="line"> </span><br><span class="line"><span class="comment">#2、Yum直接安装本地的rpm包,会⾃动查找当前系统上已有的仓库解决依赖关系</span></span><br><span class="line">	yum localinstall -y /mnt/Packages/httpd-2.4.6-88.el7.centos.x86_64.rpm</span><br></pre></td></tr></table></figure>

<h5 id="系统常见源"><a href="#系统常见源" class="headerlink" title="系统常见源"></a>系统常见源</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.⾃定义的本地源</span><br><span class="line">2.⽹络上的源头，如：base基础源、epel扩展源、与服务相关的源(官⽹)</span><br></pre></td></tr></table></figure>

<h4 id="本地镜像文件作为源-本地源"><a href="#本地镜像文件作为源-本地源" class="headerlink" title="本地镜像文件作为源(本地源)"></a>本地镜像文件作为源(本地源)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">1.挂载</span><br><span class="line">	<span class="comment"># ⽅式1: [root@localhost ~]# mount /dev/cdrom /opt/</span></span><br><span class="line">    <span class="comment"># ⽅式2: [root@localhost ~]# mount /dev/sr0 /opt/</span></span><br><span class="line">    <span class="comment"># ⽅式3: [root@localhost ~]# mount -o loop /xxx.iso /opt</span></span><br><span class="line">    查看光盘⾥的rpm包: [root@localhost ~]<span class="comment"># ls /opt/Packages/</span></span><br><span class="line">    </span><br><span class="line">2.编辑repo文件</span><br><span class="line">	[root@localhost ~]<span class="comment"># cd /etc/yum.repos.d/</span></span><br><span class="line">    [root@localhost yum.repos.d]<span class="comment"># vim local.repo 	# ⽂件名⾃定义，必须以.repo结尾</span></span><br><span class="line">    [<span class="built_in">local</span>] 					<span class="comment"># 仓库的实际名字,任意</span></span><br><span class="line">    name=<span class="built_in">local</span> 					<span class="comment"># 仓库的描述，任意</span></span><br><span class="line">    baseurl=file:///opt 		<span class="comment"># 仓库位置,可以是 http:// https:// ftp:// file://</span></span><br><span class="line">    enabled=1 					<span class="comment"># 启⽤仓库，默认就是启⽤的</span></span><br><span class="line">    gpgcheck=0 					<span class="comment"># 检查安装的rpm是否是合法的，0表示不检验	</span></span><br><span class="line"></span><br><span class="line">3.检查可用仓库</span><br><span class="line">	[root@localhost ~]<span class="comment"># yum repolist # 查询可⽤仓库</span></span><br><span class="line">	[root@localhost ~]<span class="comment"># yum repolist all # 查看所有仓库，包括禁⽤的</span></span><br><span class="line">	</span><br><span class="line">4.安装,查询,卸载</span><br><span class="line">	[root@localhost ~]<span class="comment"># yum list # 列出可⽤的软包</span></span><br><span class="line">    [root@localhost ~]<span class="comment"># yum install vsftpd -y</span></span><br><span class="line">    [root@localhost ~]<span class="comment"># yum list vsftpd httpd</span></span><br><span class="line">    [root@localhost ~]<span class="comment"># yum remove vsftpd -y</span></span><br><span class="line">    </span><br><span class="line">    [root@localhost ~]<span class="comment"># yum install glib* httpd -y</span></span><br><span class="line">    [root@localhost ~]<span class="comment"># yum provides vsftp # 查询某个软件（可以是未安装的）是由哪个rpm包提供</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># yum reinstall</span></span><br><span class="line">    [root@egon ~]<span class="comment"># rm -rf /etc/httpd/conf/httpd.conf</span></span><br><span class="line">    [root@egon ~]<span class="comment"># yum reinstall httpd -y &amp;&gt; /dev/null</span></span><br><span class="line">    [root@egon ~]<span class="comment"># ls /etc/httpd/conf/httpd.conf</span></span><br><span class="line">    /etc/httpd/conf/httpd.conf</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># yum update</span></span><br><span class="line">    [root@localhost ~]<span class="comment"># yum -y update samba</span></span><br><span class="line">    [root@localhost ~]<span class="comment"># yum -y update</span></span><br><span class="line">    </span><br><span class="line">5.软件包组安装,查询,卸载</span><br><span class="line">	[root@localhost ~]<span class="comment"># yum grouplist</span></span><br><span class="line">    [root@localhost ~]<span class="comment"># yum groupinstall &quot;GNOME 桌⾯&quot; -y</span></span><br><span class="line">    [root@egon ~]<span class="comment"># yum groupinstall &quot;开发⼯具&quot; -y</span></span><br><span class="line">    [root@egon ~]<span class="comment"># yum groupremove &quot;开发⼯具&quot; -y</span></span><br></pre></td></tr></table></figure>

<h4 id="制作本地源共享"><a href="#制作本地源共享" class="headerlink" title="制作本地源共享"></a>制作本地源共享</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">==================在服务端上执⾏如下操作==================</span><br><span class="line"><span class="comment"># 1、环境准备</span></span><br><span class="line">    [root@egon ~]<span class="comment"># systemctl stop firewalld</span></span><br><span class="line">    [root@egon ~]<span class="comment"># systemctl disable firewalld</span></span><br><span class="line">    [root@egon ~]<span class="comment"># setenforce 0</span></span><br><span class="line">    [root@egon ~]<span class="comment"># sed -i &#x27;s#^SELINUX=.*#SELINUX=disabled#g&#x27; /etc/selinux/config </span></span><br><span class="line"><span class="comment"># 2、安装ftp服务</span></span><br><span class="line">    [root@egon ~]<span class="comment"># yum install vsftpd -y </span></span><br><span class="line">    [root@egon ~]<span class="comment"># systemctl start vsftpd</span></span><br><span class="line">    [root@egon ~]<span class="comment"># systemctl status vsftpd # 查看状态，确保开启</span></span><br><span class="line">    [root@egon ~]<span class="comment"># systemctl enable vsftpd</span></span><br><span class="line"><span class="comment"># 3、采集软件包放到⼀个⽬录下</span></span><br><span class="line">可以基于3.3的⽅式，也可以偷个懒直接⽤镜像⾥现成的，毕竟是实验嘛，但⽆论何种⽅式，都⼀定要解决好依赖</span><br><span class="line">关系才能⽤来做yum源，本例就⽤现成的吧</span><br><span class="line">    [root@egon ~]<span class="comment"># mkdir /var/ftp/centos7</span></span><br><span class="line">    [root@egon ~]<span class="comment"># mount /dev/sr0 /var/ftp/centos7</span></span><br><span class="line"><span class="comment"># 或者拷⻉</span></span><br><span class="line">    [root@egon ~]<span class="comment"># mount /dev/sr0 /opt</span></span><br><span class="line">    [root@egon ~]<span class="comment"># mkdir /var/ftp/centos7</span></span><br><span class="line">    [root@egon ~]<span class="comment"># find /opt/Packages/ -type f -name &quot;*.rpm&quot; |xargs -I &#123;&#125; cp -rp &#123;&#125;</span></span><br><span class="line">/var/ftp/centos7/</span><br><span class="line">==================在客户端上执⾏如下操作==================</span><br><span class="line"><span class="comment"># 1、环境准备</span></span><br><span class="line">    [root@egon ~]<span class="comment"># systemctl stop firewalld</span></span><br><span class="line">    [root@egon ~]<span class="comment"># systemctl disable firewalld</span></span><br><span class="line">    [root@egon ~]<span class="comment"># setenforce 0</span></span><br><span class="line">    [root@egon ~]<span class="comment"># sed -i &#x27;s#^SELINUX=.*#SELINUX=disabled#g&#x27; /etc/selinux/config </span></span><br><span class="line">    [root@egon ~]<span class="comment"># ping -c 2 192.168.12.42 # ping⼀下服务端的ip地址，保证⽹络畅通</span></span><br><span class="line"><span class="comment"># 2、在客户端配置⽹络yum源 </span></span><br><span class="line">	[root@egon yum.repos.d]<span class="comment"># cd /etc/yum.repos.d/</span></span><br><span class="line">    [root@egon yum.repos.d]<span class="comment"># mkdir bak</span></span><br><span class="line">    [root@egon yum.repos.d]<span class="comment"># mv *.repo bak/</span></span><br><span class="line">    [root@egon yum.repos.d]<span class="comment"># cat &gt;&gt; ftp.repo &lt;&lt; EOF</span></span><br><span class="line">    &gt; [ftp_repo] &gt; name = This is Ftp Share Repo</span><br><span class="line">    &gt; baseurl = ftp://192.168.12.42/centos7 </span><br><span class="line">    &gt; enabled = 1 &gt; gpgcheck = 0 &gt; EOF</span><br><span class="line">    <span class="comment"># 注意：客户端baseurl指向的⽂件夹⽆论是什么，在该⽂件夹的⼦⽬录⼀级必须有⼀个repodata数据库</span></span><br></pre></td></tr></table></figure>






      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/07/14/Linux%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="左大大">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="左大大的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/07/14/Linux%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/" class="post-title-link" itemprop="url">Linux文件处理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-07-14 18:20:25" itemprop="dateCreated datePublished" datetime="2020-07-14T18:20:25+08:00">2020-07-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="文件处理"><a href="#文件处理" class="headerlink" title="文件处理"></a>文件处理</h2><h4 id="文件处理基础"><a href="#文件处理基础" class="headerlink" title="文件处理基础"></a>文件处理基础</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查找命令所在位置</span></span><br><span class="line">	<span class="built_in">which</span> ls</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据文件属性查找文件（find）</span></span><br><span class="line">	</span><br><span class="line">	共用参数：</span><br><span class="line">		-a : 并且</span><br><span class="line">		-o : 或者</span><br><span class="line">		[root@python <span class="built_in">test</span>]<span class="comment"># find ./ -size -30M -o -size +50M</span></span><br><span class="line">            ./</span><br><span class="line">            ./txt</span><br><span class="line">            ./txt2</span><br><span class="line"></span><br><span class="line">	1、按照文件名称查找</span><br><span class="line">        [root@python ~]<span class="comment"># find /root/ -name &quot;txt*&quot; -a -size +40M</span></span><br><span class="line">            /root/txt2</span><br><span class="line">            /root/a/b/c/txt2</span><br><span class="line">        [root@python ~]<span class="comment"># find /root/ -name &quot;txt*&quot;  -size +40M</span></span><br><span class="line">            /root/txt2</span><br><span class="line">            /root/a/b/c/txt2</span><br><span class="line"></span><br><span class="line">	2、按照文件的创建时间来查找</span><br><span class="line">        +7day	: 7天以前创建</span><br><span class="line">        -7day	：7天以内创建</span><br><span class="line">        7day	：正好7天</span><br><span class="line"></span><br><span class="line">        -ctime : 按照创建时间查询</span><br><span class="line">        -mtime : 按照修改时间查询</span><br><span class="line">        -atime : 按照访问的时间查询</span><br><span class="line">	</span><br><span class="line">	<span class="comment"># 3天以内创建</span></span><br><span class="line">		[root@python ~]<span class="comment"># find /root/ -ctime -3</span></span><br><span class="line">	<span class="comment"># 3天以前创建</span></span><br><span class="line">		[root@python ~]<span class="comment"># find /root/ -ctime +3</span></span><br><span class="line">	</span><br><span class="line">	3、按照文件属性查找</span><br><span class="line">		[root@python ~]<span class="comment"># find /root/ -size +10M -user test</span></span><br><span class="line">        	/root/txt</span><br><span class="line">        [root@python ~]<span class="comment"># find /root/ -size +10M -group test</span></span><br><span class="line">        	/root/txt</span><br><span class="line"></span><br><span class="line">	4、按照文件的大小查找</span><br><span class="line">		find [查询的路径] -size [大小]</span><br><span class="line">		find /root/ -size +50M ： 查询大于50M的文件</span><br><span class="line">		find /root/ -size 20M ： 查询等于20M的文件</span><br><span class="line">		find /root/ -size -60M ： 查询小于60M的文件</span><br><span class="line">		</span><br><span class="line">	5、设置查询最高的目录层级（目录层级参数必须放在第一位）</span><br><span class="line">		[root@python ~]<span class="comment"># find /root/  -maxdepth 3 -a  -size +40M</span></span><br><span class="line">        	/root/txt2</span><br><span class="line">        [root@python ~]<span class="comment"># find /root/  -maxdepth 6 -a  -size +40M</span></span><br><span class="line">            /root/txt2</span><br><span class="line">            /root/a/b/c/txt2</span><br><span class="line">        </span><br><span class="line">	6、按照文件类型来查询</span><br><span class="line">		<span class="comment"># 按照目录查询</span></span><br><span class="line">		[root@python ~]<span class="comment"># find /root/ -type d</span></span><br><span class="line">		<span class="comment"># 按照普通文件来查询</span></span><br><span class="line">		[root@python ~]<span class="comment"># find /root/ -type f</span></span><br><span class="line">		<span class="comment"># 查看设备文件</span></span><br><span class="line">		[root@python dev]<span class="comment"># find /dev/ -type c</span></span><br><span class="line"></span><br><span class="line">	7、按照权限来查询</span><br><span class="line">        [root@python <span class="built_in">test</span>]<span class="comment"># ll</span></span><br><span class="line">        总用量 122880</span><br><span class="line">        -r--r-----. 1 <span class="built_in">test</span> user1 20971520 6月  16 17:33 txt</span><br><span class="line">        -rw-r--r--. 1 root root  41943040 6月  16 17:33 txt1</span><br><span class="line">        -rwxr-xr-x. 1 root root  62914560 6月  16 17:33 txt2</span><br><span class="line">        [root@python <span class="built_in">test</span>]<span class="comment"># find ./  -perm 440</span></span><br><span class="line">        	./txt</span><br><span class="line">        [root@python <span class="built_in">test</span>]<span class="comment"># find ./  -perm 644</span></span><br><span class="line">            ./txt1</span><br><span class="line">            ./txt2</span><br><span class="line"></span><br><span class="line">	[root@python ~]<span class="comment"># useradd user1</span></span><br><span class="line">	[root@python ~]<span class="comment"># useradd user2</span></span><br><span class="line">	[root@python ~]<span class="comment"># useradd user3</span></span><br><span class="line"></span><br><span class="line">	r（4）	: 只读</span><br><span class="line">	w（2）	：只写</span><br><span class="line">	x（1）	：执行</span><br><span class="line"></span><br><span class="line">	rw-r--r--</span><br><span class="line">	6   4  4</span><br><span class="line">	所属用户  所属用户组  其他用户</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	chmod : 修改文件权限</span><br><span class="line">		chmod 755 [文件路径]</span><br><span class="line">	chown : 修改所属用户及用户组</span><br><span class="line">		chown 用户.用户组 [文件路径]</span><br><span class="line"></span><br><span class="line">	8、处理查询结果</span><br><span class="line">    	<span class="comment"># 直接跟命令</span></span><br><span class="line">    	[root@python <span class="built_in">test</span>]<span class="comment"># find ./  -perm 755 -ls</span></span><br><span class="line">    	202362858    0 drwxr-xr-x   2 root    root  41 6月 16 17:59 ./</span><br><span class="line">    	134514204 6140 -rwxr-xr-x   1 root    root  62 6月 16 17:33 ./txt2</span><br><span class="line">		</span><br><span class="line">    	<span class="comment"># exec（推荐）</span></span><br><span class="line">    	<span class="comment"># &#123;&#125;：代表前面查询出来的内容</span></span><br><span class="line">    	find ./ -size +50M -<span class="built_in">exec</span> cp &#123;&#125; /opt/ \;</span><br><span class="line"></span><br><span class="line">    	<span class="comment"># 使用管道</span></span><br><span class="line">    	<span class="comment"># xargs是将前面命令执行的结果先用一个&#123;&#125;来保存，然后用&#123;&#125;取出来处理</span></span><br><span class="line">    	find ./ -size +50M | xargs -I &#123;&#125; cp &#123;&#125; /mnt/</span><br><span class="line">    </span><br><span class="line">总结:</span><br><span class="line">	vimdiff : 差异化编辑</span><br><span class="line"></span><br><span class="line">find:</span><br><span class="line">	1、按照名称来查询  -name</span><br><span class="line">	2、按照时间来查询  -ctime -mtime -atime</span><br><span class="line">	3、按照文件属性查询	-<span class="built_in">type</span> d(文件目录) f(普通文件) c(设备文件字符) l(链接文件) b(设备文件块)</span><br><span class="line">	4、按照文件大小	-size</span><br><span class="line">	5、按照权限查询	-perm</span><br><span class="line">		r（4）	: 只读</span><br><span class="line">		w（2）	：只写</span><br><span class="line">		x（1）	：执行</span><br><span class="line"></span><br><span class="line">	6、按照属主或属组查询 -user -group</span><br><span class="line">	7、控制目录深度（参数必须放在第一位）-maxdepth</span><br><span class="line">	</span><br><span class="line">	-<span class="built_in">exec</span> : 将find查询内容交给后面的其他命令来处理</span><br><span class="line">	xargs : 将find查询的结果格式化后，交给其他命令来处理</span><br></pre></td></tr></table></figure>

<h4 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1、查找ifconfig命令⽂件的位置，⽤不同的⽅式实现</span><br><span class="line">[root@python <span class="built_in">test</span>]<span class="comment"># which ifconfig</span></span><br><span class="line">/usr/sbin/ifconfig</span><br><span class="line">[root@python <span class="built_in">test</span>]<span class="comment"># find / -name &quot;ifconfig&quot;</span></span><br><span class="line">/usr/sbin/ifconfig</span><br><span class="line"></span><br><span class="line">2、查找/etc/中的所有⼦⽬录（仅⽬录）复制到/tmp下</span><br><span class="line">[root@python <span class="built_in">test</span>]<span class="comment"># find /etc -type d -exec cp -r &#123;&#125; /tmp/ \;</span></span><br><span class="line"></span><br><span class="line">3、将/etc⽬录复制到/var/tmp/， 将/var/tmp/etc中的所有⽬录设置权限777(仅⽬录) 将/var/tmp/etc中所有⽂件权限设置为666</span><br><span class="line">[root@python ~]<span class="comment"># cp -r /etc/ /var/tmp/</span></span><br><span class="line">[root@python ~]<span class="comment"># find /var/tmp/etc/ -type d -exec chmod 777 &#123;&#125; \;</span></span><br><span class="line">[root@python ~]<span class="comment"># find /var/tmp/etc/ -type f -exec chmod 666 &#123;&#125; \;</span></span><br></pre></td></tr></table></figure>

<h4 id="文件上传与下载"><a href="#文件上传与下载" class="headerlink" title="文件上传与下载"></a>文件上传与下载</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">wget : 下载文件</span><br><span class="line">	安装:yum install wget -y</span><br><span class="line"></span><br><span class="line">	wget url</span><br><span class="line">		-O : 指定下载文件的路径及名称</span><br><span class="line"></span><br><span class="line">curl ：读取文件</span><br><span class="line">	-o : 指定下载文件的路径及名称</span><br><span class="line">	-k ： 免证书认证</span><br><span class="line"></span><br><span class="line">sz : 下载文件（从linux系统下载文件至windows）</span><br><span class="line">	安装:yum install lrzsz -y</span><br><span class="line"></span><br><span class="line">rz : 上传文件</span><br><span class="line">	rz [文件路径]</span><br></pre></td></tr></table></figure>

<h4 id="输出与重定向"><a href="#输出与重定向" class="headerlink" title="输出与重定向"></a>输出与重定向</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">0	: 标准输入</span><br><span class="line">1	：标准输出</span><br><span class="line">2	：标准错误输出</span><br><span class="line">&amp;	：标准输出及错误输出</span><br><span class="line"></span><br><span class="line">命令  &gt;&gt; file 2&gt;&amp;1</span><br><span class="line">命令 &amp;&gt;&gt;file</span><br></pre></td></tr></table></figure>

<h4 id="字符处理命令"><a href="#字符处理命令" class="headerlink" title="字符处理命令"></a>字符处理命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 排序sort</span></span><br><span class="line">-n <span class="comment"># 依照数值的⼤⼩排序</span></span><br><span class="line">-r <span class="comment"># 以相反的顺序来排序</span></span><br><span class="line">-k <span class="comment"># 以某列进⾏排序</span></span><br><span class="line">-t <span class="comment"># 指定分割符，默认是以空格为分隔符</span></span><br><span class="line"></span><br><span class="line">[root@python ~]<span class="comment"># sort -t &quot;:&quot; -n -k2 3.txt </span></span><br><span class="line">g:0</span><br><span class="line">k:2</span><br><span class="line">j:3</span><br><span class="line">d:7</span><br><span class="line">h:8</span><br><span class="line">l:9</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重复uniq</span></span><br><span class="line">-c <span class="comment"># 在每列旁边显示该⾏重复出现的次数。</span></span><br><span class="line">-d <span class="comment"># 仅显示重复出现的⾏列。</span></span><br><span class="line">-u <span class="comment"># 仅显示出⼀次的⾏列。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串分割命令cut</span></span><br><span class="line">-d <span class="comment"># 指定字段的分隔符，默认的字段分隔符为&quot;TAB&quot;；</span></span><br><span class="line">-f <span class="comment"># 显示指定字段的内容；</span></span><br><span class="line">	cat /etc/passwd | cut -d: -f7</span><br><span class="line">	cat 4.txt | sort | uniq -c | sort -r | head -n 3 | cut -d <span class="string">&quot; &quot;</span> -f8</span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串替换tr</span></span><br><span class="line">-d <span class="comment"># 删除字符</span></span><br><span class="line">cat /etc/passwd | tr <span class="string">&quot;root&quot;</span> <span class="string">&quot;ROOT&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计字数的</span></span><br><span class="line">-c <span class="comment"># 统计⽂件的Bytes数；</span></span><br><span class="line">-l <span class="comment"># 统计⽂件的⾏数；</span></span><br><span class="line">-w <span class="comment"># 统计⽂件中单词的个数，默认以空⽩字符做为分隔符</span></span><br></pre></td></tr></table></figure>

<h4 id="打包压缩方法"><a href="#打包压缩方法" class="headerlink" title="打包压缩方法"></a>打包压缩方法</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">方法一:</span><br><span class="line"><span class="comment"># 1、打包</span></span><br><span class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># tar cvf etc_bak.tar /etc/ # c创建 v详细 f打包后⽂件路径</span></span><br><span class="line">ps:</span><br><span class="line">	打包的⽬标路径如果是绝对路径，会提示：tar: 从成员名中删除开头的“/”，不影响打包，</span><br><span class="line"> 添加-P选项便不再提示：tar cvPf ...</span><br><span class="line"> </span><br><span class="line"> 可以<span class="built_in">cd</span> 到 /etc下然后tar cvf etc_bak.tar *打包，这样去掉了⼀层⽂件夹</span><br><span class="line"><span class="comment"># 2、压缩</span></span><br><span class="line">	[root@localhost <span class="built_in">test</span>]<span class="comment"># gzip etc_bak.tar # ⽂件体积变⼩，并且加上后缀.gz</span></span><br><span class="line">ps:</span><br><span class="line">     gzip -&gt; gunzip</span><br><span class="line">     bzip2-&gt; bunzip2</span><br><span class="line"><span class="comment">#3、上述两步可以合⼆为⼀</span></span><br><span class="line">    [root@localhost <span class="built_in">test</span>]<span class="comment"># tar czvf etc1_bak.tar.gz /etc/ # 选项z代表gzip压缩算法</span></span><br><span class="line">    [root@localhost <span class="built_in">test</span>]<span class="comment"># tar cjvf etc1_bak.tar.bz2 /etc/ # 选项j代表bzip2压缩算法</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">方法二:</span><br><span class="line"><span class="comment">#zip压缩</span></span><br><span class="line">选项：</span><br><span class="line">     -r <span class="comment">#递归压缩 压缩⽬录</span></span><br><span class="line"></span><br><span class="line">     -q <span class="comment">#静默输出</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 示例1、 [root@localhost ~]# zip /test/bak.zip a.txt b.txt c.txt # zip后的第⼀个参数是压缩包路径，其余为被压缩的⽂件</span></span><br><span class="line">     adding: a.txt (stored 0%)</span><br><span class="line">     adding: b.txt (stored 0%)</span><br><span class="line">     adding: c.txt (stored 0%)</span><br><span class="line"> </span><br><span class="line">[root@localhost ~]<span class="comment"># ls /test/</span></span><br><span class="line">	bak.zip</span><br><span class="line"><span class="comment"># 示例1、 [root@localhost ~]# zip -rq etc.zip /etc # 加上-q后压缩过程不再提示</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压缩	</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#1、针对xxx.tar.gz 或者 xxx.tar.bz2，统⼀使⽤</span></span><br><span class="line">    	[root@localhost <span class="built_in">test</span>]<span class="comment"># tar xvf 压缩包 -C 解压到的⽬录 # ⽆需指定解压算法，tar⾃动判断</span></span><br><span class="line">    <span class="comment">#2、针对xxx.zip，⽤unzip</span></span><br><span class="line">        选项：</span><br><span class="line">             -l <span class="comment">#显示压缩包的列表信息</span></span><br><span class="line">             -q <span class="comment">#静默输出</span></span><br><span class="line">             -d <span class="comment">#解压到指定的⽬录 </span></span><br><span class="line">    		[root@localhost <span class="built_in">test</span>]<span class="comment"># unzip -q xxx.zip -d /opt</span></span><br><span class="line"></span><br><span class="line">gzip :</span><br><span class="line">	压缩</span><br><span class="line">		gzip [文件路径]</span><br><span class="line">	解压</span><br><span class="line">		gzip -d 1.txt.gz</span><br><span class="line"></span><br><span class="line">tar :</span><br><span class="line">	tar 打包</span><br><span class="line">		-f : 指定打包的名称</span><br><span class="line">		-c : 将某些文件进行打包</span><br><span class="line">		tar -c -f test.tar 1.txt</span><br><span class="line">		</span><br><span class="line">		-v : 显示打包的整个过程</span><br><span class="line">		</span><br><span class="line">		-z : 指定使用gzip压缩工具进行压缩</span><br><span class="line">		-j : 使用bzip2压缩工具进行压缩</span><br><span class="line">		</span><br><span class="line">	tar 解压</span><br><span class="line">		-f : 指定打包的名称</span><br><span class="line">		-x : 将某些打包文件进行解压</span><br><span class="line">		-v : 显示解压的整个过程</span><br></pre></td></tr></table></figure>

<h4 id="软连接"><a href="#软连接" class="headerlink" title="软连接"></a>软连接</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">软连接相当于Windows中的快捷方式，</span><br><span class="line"></span><br><span class="line">ln -s 源路径  目标路径</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/07/10/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86-%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="左大大">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="左大大的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/07/10/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86-%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/" class="post-title-link" itemprop="url">Linux权限管理-文件权限</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-07-10 18:20:25" itemprop="dateCreated datePublished" datetime="2020-07-10T18:20:25+08:00">2020-07-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="权限管理-文件权限"><a href="#权限管理-文件权限" class="headerlink" title="权限管理-文件权限"></a>权限管理-文件权限</h1><h3 id="1-1基本权限介绍"><a href="#1-1基本权限介绍" class="headerlink" title="1.1基本权限介绍"></a>1.1基本权限介绍</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">基本权限类型:</span><br><span class="line">	r:可读   --&gt; 4</span><br><span class="line">	w:可写   --&gt; 2</span><br><span class="line">	x:可执行 --&gt; 1</span><br><span class="line">	</span><br><span class="line">权限的归属:</span><br><span class="line">	属主:  u</span><br><span class="line">	属组:  g</span><br><span class="line">	其他人: o</span><br><span class="line">eg:</span><br><span class="line">	[root@aliyun ~]# ls -l a.txt</span><br><span class="line">-rw-r--r-- 1 root root 1146 Jul 16 18:42 a.txt</span><br><span class="line">⽂件类型：</span><br><span class="line">	-：⽂本⽂档</span><br><span class="line">     d：⽬录</span><br><span class="line">     b：设备block</span><br><span class="line">     c：字符设备</span><br><span class="line">     s：套接字⽂件</span><br><span class="line">     l：软链接</span><br><span class="line">权限</span><br><span class="line"> </span><br><span class="line">硬链接个数</span><br><span class="line">属主</span><br><span class="line">属组</span><br><span class="line">⽂件所占⽤的空间(以字节为单位)</span><br><span class="line">⽂件（⽬录）最近访问（修改）时间</span><br><span class="line">⽂件名</span><br></pre></td></tr></table></figure>

<h3 id="1-2设置权限"><a href="#1-2设置权限" class="headerlink" title="1.2设置权限"></a>1.2设置权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">1.修改属主,属组(chown)</span><br><span class="line">	[root@aliyun ~]<span class="comment"># chown alice.hr file1 # 改属主、属组</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># chown alice file1 # 只改属主</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># chown .hr file1 # 只改属组</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># chown -R /test # 递归修改</span></span><br><span class="line"></span><br><span class="line">2.修改u、g、o对应的权限</span><br><span class="line">	<span class="comment"># 加减法</span></span><br><span class="line">    chmod u+x,g-w,o+r a.txt</span><br><span class="line">    <span class="comment"># 赋值</span></span><br><span class="line">    chmod a=rwx a.txt</span><br><span class="line">    chmod a=- a.txt</span><br><span class="line">    chmod ug=rw,o=r file1</span><br><span class="line">    <span class="comment"># 数字</span></span><br><span class="line">    chmod 644 file1</span><br><span class="line">    chmod -R 777 xxx/</span><br><span class="line"></span><br><span class="line">ps:把某⼀个⾮属主⽤户添加到⽂件的属组⾥，他就拥有了该组的权限，⽽不再是其他⼈</span><br><span class="line"></span><br><span class="line"><span class="comment">#eg1:要想在⽬录下创建\删除内容：对⽬录的x权限+对⽬录的w权限</span></span><br><span class="line">	<span class="comment"># 1、设置权限</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># mkdir -p /a/b/c</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># chmod -R o=x /a # 其他⼈o对当前⽬录及其⼦⽬录都有x权限</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># chmod o+w /a/b/c # 其他⼈o对/a/b/c⽬录有w权限</span></span><br><span class="line">	<span class="comment"># 2、查看权限</span></span><br><span class="line">	[root@aliyun ~]<span class="comment"># ls -dl /a</span></span><br><span class="line">    drwxr-x--x 3 root root 4096 Aug 11 16:24 /a [root@aliyun ~]<span class="comment"># ls -dl /a/b</span></span><br><span class="line">    drwxr-x--x 3 root root 4096 Aug 11 16:24 /a/b [root@aliyun ~]<span class="comment"># ls -dl /a/b/c</span></span><br><span class="line">    drwxr-x-wx 2 root root 4096 Aug 11 16:25 /a/b/c</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 3、验证</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># [root@aliyun ~]# su - gg</span></span><br><span class="line">    Last login: Tue Aug 11 16:17:28 CST 2020 on pts/2 [gg@aliyun ~]$ touch /a/b/c/1.txt</span><br><span class="line">    [gg@aliyun ~]$ <span class="built_in">exit</span></span><br><span class="line">    <span class="built_in">logout</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># ls /a/b//c/</span></span><br><span class="line">    1.txt</span><br><span class="line">    </span><br><span class="line"><span class="comment">#eg2:要浏览⽬录下内容：对⽬录的x权限+对⽬录的r权限</span></span><br><span class="line"> 	[root@aliyun ~]<span class="comment"># mkdir -p /a/b/c</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># chmod -R o=x /a</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># chmod o+r /a/b/c</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># [root@aliyun ~]# touch /a/b/c/&#123;1..3&#125;.txt</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># [root@aliyun ~]# su - gg</span></span><br><span class="line">    Last login: Tue Aug 11 16:27:33 CST 2020 on pts/2 [gg@aliyun ~]$ ls /a/b/c</span><br><span class="line">    1.txt 2.txt 3.txt</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">#eg3:要执⾏⽬录下程序：对⽬录的x权限+对⽂件的x权限，如果⽂件是解释型语⾔的脚本程序，还需要对⽂件有r权限</span></span><br><span class="line">	[root@aliyun ~]<span class="comment"># mkdir -p /a/b/c</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># chmod -R o=x /a/b/c</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># cp /bin/echo /a/b/c</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># chmod o=x /a/b/c/echo</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># [root@aliyun ~]# su - gg</span></span><br><span class="line">    Last login: Tue Aug 11 16:30:17 CST 2020 on pts/2 </span><br><span class="line">    [gg@aliyun ~]$ /a/b/c/<span class="built_in">echo</span> <span class="string">&quot;hello egon&quot;</span></span><br><span class="line">    hello egon</span><br></pre></td></tr></table></figure>

<h3 id="用户组管理"><a href="#用户组管理" class="headerlink" title="用户组管理"></a>用户组管理</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">RBAC 权限管理</span><br><span class="line">RBAC的优缺点</span><br><span class="line">优点：</span><br><span class="line">	简化了用户和权限的关系</span><br><span class="line">	易扩展、易维护</span><br><span class="line">缺点：</span><br><span class="line">	RBAC模型没有提供操作顺序的控制机制，这一缺陷使得RBAC模型很难适应哪些对操作次序有严格要求的系统</span><br><span class="line">	id 获取当前用户的信息</span><br><span class="line">whoami 获取当前用户</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">用户uid小于1000的是系统用户</span><br><span class="line">用户uid大于等于1000s的是普通用户</span><br><span class="line"></span><br><span class="line">创建用户：useradd</span><br><span class="line">删除用户：userdel</span><br><span class="line">修改用户：usermod</span><br><span class="line">修改密码：passwd</span><br><span class="line">创建组：groupadd</span><br><span class="line">修改组：groupmod</span><br><span class="line">删除组：groupdel</span><br><span class="line"></span><br><span class="line">/etc/passwd		用户配置文件</span><br><span class="line">/etc/shadow		用户的密码文件</span><br><span class="line">/etc/group</span><br><span class="line">/etc/gshadow</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 自己创建用户</span><br><span class="line">1、创建用户组：/etc/group</span><br><span class="line">2、创建用户组密码文件：/etc/gshadow</span><br><span class="line">3、创建用户：/etc/passwd</span><br><span class="line">4、创建用户密码：/etc/shadow</span><br><span class="line">5、创建家目录</span><br><span class="line">6、修改权限，复制隐藏文件</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">1.创建用户:</span><br><span class="line">	[root@localhost ~]# useradd user1 1</span><br><span class="line">	</span><br><span class="line">2.查看用户:</span><br><span class="line">	[root@localhost ~]# id user1</span><br><span class="line">    uid=1002(user1) gid=1003(user1) 组=1003(user1) [root@localhost ~]# who # 查看所有登录的⽤户信息</span><br><span class="line">    [root@localhost ~]# whoami # 查看当前登录的⽤户名</span><br><span class="line">注:</span><br><span class="line">	当创建⼀个⽤户时，如果没有指定⽤户的主组，将会创建⼀个同名的组作为⽤户的主组</span><br><span class="line"></span><br><span class="line">3.删除用户:</span><br><span class="line">	[root@localhost ~]# userdel user1 # 删除⽤户user1，但不删除⽤户家⽬录和mail</span><br><span class="line">	[root@localhost ~]# userdel -r user1 # 要想删彻底,加-r选项</span><br><span class="line">	</span><br><span class="line">4.useradd命令详解:创建用户的同时指定选项</span><br><span class="line">	#怎样在Linux系统中添加⼀个新的⽤户账户</span><br><span class="line">    1) 掌握useradd命令的功能：新增⼀个⽤户。</span><br><span class="line">    2) 了解useradd命令的常⽤选项：</span><br><span class="line">    3) –u：指定⽤户的UID</span><br><span class="line">    4) –g：指定⽤户所属的主群</span><br><span class="line">     –G：指定⽤户所属的附加群</span><br><span class="line">    5) –d：指定⽤户的家⽬录</span><br><span class="line">    6) –c：指定⽤户的备注信息</span><br><span class="line">    7) –s：指定⽤户所⽤的shell</span><br><span class="line">    8) -e：修改过期时间</span><br><span class="line">    9) -M: 不创建家⽬录</span><br><span class="line">    10) -r: 创建系统账户，uid处于系统⽤户范围内，默认就没有家⽬录</span><br><span class="line">    #灵活应⽤useradd命令的举例：</span><br><span class="line">    a) 例如：在系统中新增⼀个fox（狐狸）⽤户的命令：useradd fox</span><br><span class="line">    b) 例如：在系统中新增⼀个⽤户user01，属组为police以及uid为600的命令：</span><br><span class="line">    useradd –u 600 –g police user01</span><br><span class="line">    # 其他练习</span><br><span class="line">    [root@root ~]# useradd user01 </span><br><span class="line">    [root@root ~]# useradd user02 -u 503 # 创建⽤户usr02，指定uid</span><br><span class="line">    [root@root ~]# useradd user03 -d /aaa # 创建⽤户user03 指定家⽬录</span><br><span class="line">    [root@root ~]# useradd user04 -M # 创建⽤户user04，不创建家⽬录</span><br><span class="line">    [root@root ~]# useradd user05 -s /sbin/nologin # 创建⽤户并指定shell</span><br><span class="line">    [root@root ~]# useradd user06 -g hr # 创建⽤户，指定主组</span><br><span class="line">    [root@root ~]# useradd user07 -G sale # 创建⽤户，指定附加组</span><br><span class="line">    [root@root ~]# useradd user08 -e 2014-04-01 # 指定过期时间</span><br><span class="line">    [root@root ~]# useradd user10 -u 4000 -s /sbin/nologin</span><br><span class="line">    [root@aliyum ~]# useradd xxx -M -s /sbin/nologin # 创建普通⽤户，但是没有家⽬录，不能登录系统</span><br><span class="line">    [root@aliyum ~]# useradd -r yyy -s /sbin/nologin # yyy属于系统⽤户，uid处于系统⽤户uid范围内</span><br><span class="line">    </span><br><span class="line">5.usermod命令</span><br><span class="line">	同useradd参数基⼀致，只不过useradd是添加，usermod是修改</span><br><span class="line">	-u #指定要修改⽤户的UID</span><br><span class="line">    -g #指定要修改⽤户基本组</span><br><span class="line">    -a #将⽤户添加到补充组。仅与-G选项⼀起使⽤</span><br><span class="line">    -G #指定要修改⽤户附加组，使⽤逗号隔开多个附加组, 覆盖原有的附加组</span><br><span class="line">    -d #指定要修改⽤户家⽬录</span><br><span class="line">    -c #指定要修改⽤户注释信息</span><br><span class="line">    -s #指定要修改⽤户的bash shell</span><br><span class="line">    [root@root ~]# usermod -e 2013-02-11 user1000 # 修改过期时间</span><br><span class="line">    [root@root ~]# usermod -g group1 jj # 修改主组</span><br><span class="line">    [root@root ~]# usermod -a -G group2 jj # 修改附加组，-a添加，不加-a代表覆盖</span><br><span class="line">    其他选项</span><br><span class="line">    -m #将⽤户主⽬录的内容移动到新位置。如果当前主⽬录不存在，则不会创建新的主⽬录</span><br><span class="line">    -l #指定要修改⽤户的登陆名</span><br><span class="line">    -L #指定要锁定的⽤户</span><br><span class="line">    -U #指定要解锁的⽤户</span><br><span class="line">    </span><br><span class="line">6.设定与修改密码</span><br><span class="line">	passwd # 默认给当前⽤户设定密码</span><br><span class="line">    passwd ⽤户名 # root⽤户可以给⾃⼰以及所有其他⽤户设定密码，普通⽤户只能设定⾃⼰的密码</span><br><span class="line">    echo &quot;密码&quot; | passwd --stdin ⽤户名 # ⾮交互式</span><br><span class="line">    # 补充：可以利⽤系统内置变量⽣成随机字符串来充当密码</span><br><span class="line">    [root@aliyum ~]# echo $RANDOM|md5sum|cut -c 1-10</span><br><span class="line">    70ba11a74b</span><br><span class="line">    [root@aliyum ~]#</span><br></pre></td></tr></table></figure>

<h3 id="组管理"><a href="#组管理" class="headerlink" title="组管理"></a>组管理</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">groupadd    # 添加组</span><br><span class="line">groupmod	# 修改组</span><br><span class="line">groupdel	# 删除组</span><br><span class="line">gpasswd 	# 设置组密码</span><br><span class="line">newgrp 		# 切换主组</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">1.创建组</span><br><span class="line">	[root@aliyum ~]# groupadd gg1 #创建基本组, 不指定gid</span><br><span class="line">    [root@aliyum ~]# tail -1 /etc/group</span><br><span class="line">    gg1:x:2005: </span><br><span class="line">    [root@aliyum ~]# groupadd -g 5555 gg2 #创建基本组, 指定gid为5555</span><br><span class="line">    [root@aliyum ~]# tail -1 /etc/group</span><br><span class="line">    gg2:x:5555: </span><br><span class="line">    [root@aliyum ~]# groupadd -r gg3 # 创建系统组，gid从201-999</span><br><span class="line">    [root@aliyum ~]# tail -1 /etc/group</span><br><span class="line">    gg3:x:991: </span><br><span class="line">    [root@aliyum ~]#</span><br><span class="line"> </span><br><span class="line">2.修改组</span><br><span class="line">	[root@aliyum ~]# groupmod -g 1111 gg3</span><br><span class="line">    [root@aliyum ~]# tail -1 /etc/group</span><br><span class="line">    gg3:x:1111: </span><br><span class="line">    [root@aliyum ~]# </span><br><span class="line">    [root@aliyum ~]# groupmod -n new_gg3 gg3 # -n 修改组名称</span><br><span class="line">    [root@aliyum ~]# tail -1 /etc/group</span><br><span class="line">    new_gg3:x:1111: </span><br><span class="line">    [root@aliyum ~]#</span><br><span class="line">    </span><br><span class="line">3.删除组</span><br><span class="line">	如果⼀个组是⼀个⽤户的主组，那么该组不能被删除，删掉⽤户会默认⼀起删掉他的主组</span><br><span class="line">    [root@aliyum ~]# useradd egon1</span><br><span class="line">    [root@aliyum ~]# groupadd devops</span><br><span class="line">    [root@aliyum ~]# usermod -G devops egon1</span><br><span class="line">    [root@aliyum ~]# id egon1</span><br><span class="line">    uid=2004(egon1) gid=2004(egon1) groups=2004(egon1),5556(devops)</span><br><span class="line">    [root@aliyum ~]# [root@aliyum ~]# groupdel devops # 附加组可以删除</span><br><span class="line">    [root@aliyum ~]# id egon1 # 查看⽤户，发现他的附加组没有了</span><br><span class="line">    uid=2004(egon1) gid=2004(egon1) groups=2004(egon1) </span><br><span class="line">    [root@aliyum ~]# groupdel egon1 # ⽆法删除组egon1，因为组egon1属于egon1⽤户的主组</span><br><span class="line">    groupdel: cannot remove the primary group of user &#x27;egon1&#x27;</span><br><span class="line">    [root@aliyum ~]#</span><br></pre></td></tr></table></figure>

<h4 id="组成员管理"><a href="#组成员管理" class="headerlink" title="组成员管理"></a><strong>组成员管理</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">对于⽤户来说，组是分类的 </span><br><span class="line">1、⼀类是基本组或称主组,⽤户只能有⼀个基本组，创建时可通过-g指定，如未指定则创建⼀个默认的组(与⽤户同名) </span><br><span class="line"></span><br><span class="line">2、附加组,基本组不能满⾜授权要求，创建附加组，将⽤户加⼊该组，⽤户可以属于多个附加组，加⼊⼀个组后</span><br><span class="line">就拥有了该组的权限</span><br><span class="line">	注意：gpasswd将⽤户添加到组或从组中删除，只针对已存在的⽤户</span><br><span class="line">    [root@root ~]# gpasswd -a user07 it # 将某个⽤户加⼊到某个组</span><br><span class="line">    [root@root ~]# gpasswd -M user02,user03,user04 it # 将多个⽤户加⼊到it组 </span><br><span class="line">    [root@root ~]# gpasswd -A lhf it # 指定lhf为组it的组⻓，除了root⽤户外lhf⽤户也可以采⽤第⼀</span><br><span class="line">    条命令往it组⾥添加成员</span><br><span class="line">    [root@root ~]# grep &#x27;it&#x27; /etc/group # 查看it组中的成员</span><br><span class="line">    it:x:505:user02,user03,user04</span><br><span class="line">    [root@root ~]# gpasswd -d user07 it # 删除⽤户usr07从it组</span><br><span class="line">    </span><br><span class="line">我们可以为组设置密码，然后让⼀些⾮组成员的⽤户通过命令”newgrp 组”临时切换到组内并输⼊密码的⽅式获取</span><br><span class="line">⽤户组的权限和特性，如下</span><br><span class="line">	[root@localhost ~]# groupadd group1</span><br><span class="line">    [root@localhost ~]# gpasswd group1</span><br><span class="line">    正在修改 group1 组的密码</span><br><span class="line">    新密码：</span><br><span class="line">    请重新输⼊新密码：</span><br><span class="line">    [root@localhost ~]# touch /tmp/a.txt</span><br><span class="line">    [root@localhost ~]# ll /tmp/a.txt</span><br><span class="line">    -rw-r--r-- 1 root root 0 8⽉ 10 21:01 /tmp/a.txt</span><br><span class="line">    [root@localhost ~]# chown .group1 /tmp/a.txt</span><br><span class="line">    [root@localhost ~]# !ll</span><br><span class="line">    ll /tmp/a.txt</span><br><span class="line">    -rw-r--r-- 1 root group1 0 8⽉ 10 21:01 /tmp/a.txt</span><br><span class="line">    [root@localhost ~]# chmod g+w /tmp/a.txt</span><br><span class="line">    [root@localhost ~]# gpasswd group1</span><br><span class="line">    [root@localhost ~]# su - egon</span><br><span class="line">    上⼀次登录：⼀ 8⽉ 10 21:01:46 CST 2020pts/0 上 </span><br><span class="line">    [egon@localhost ~]$ echo 123 &gt;&gt; /tmp/a.txt # 此时没有权限</span><br><span class="line">    -bash: /tmp/a.txt: 权限不够</span><br><span class="line">    [egon@localhost ~]$ newgrp group1 # 临时切换到组group1下，拥有其权限</span><br><span class="line">    密码：</span><br><span class="line">    [egon@localhost ~]$ echo 123 &gt;&gt; /tmp/a.txt</span><br><span class="line">    [egon@localhost ~]$ cat /tmp/a.txt</span><br><span class="line">    123</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/07/06/%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="左大大">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="左大大的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/07/06/%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/" class="post-title-link" itemprop="url">Linux系统优化</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-07-06 18:20:25" itemprop="dateCreated datePublished" datetime="2020-07-06T18:20:25+08:00">2020-07-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="系统优化"><a href="#系统优化" class="headerlink" title="系统优化"></a>系统优化</h1><h2 id="开源镜像站"><a href="#开源镜像站" class="headerlink" title="开源镜像站"></a>开源镜像站</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 华为开源镜像站 ： https://mirrors.huaweicloud.com/</span></span><br><span class="line"><span class="comment"># 清华大学开源镜像站：https://mirrors.tuna.tsinghua.edu.cn/</span></span><br><span class="line"><span class="comment"># 网易开源镜像站：http://mirrors.163.com/</span></span><br><span class="line"><span class="comment"># 阿里云开源镜像站：https://developer.aliyun.com/</span></span><br></pre></td></tr></table></figure>

<h3 id="修改下载源"><a href="#修改下载源" class="headerlink" title="修改下载源"></a>修改下载源</h3><p>1、备份配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># cp -a /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak</span></span><br></pre></td></tr></table></figure>

<p>2、下载镜像源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># cat /etc/redhat-release </span></span><br><span class="line">CentOS Linux release 7.6.1810 (Core) </span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># curl -o /etc/yum.repos.d/CentOS-Base.repo https://repo.huaweicloud.com/repository/conf/CentOS-7-reg.repo</span></span><br></pre></td></tr></table></figure>

<p>3、删除本地缓存</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># yum clean all</span></span><br></pre></td></tr></table></figure>

<p>4、生成新的本地缓存</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># yum makecache</span></span><br></pre></td></tr></table></figure>

<p>5、更新系统</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># yum update -y</span></span><br></pre></td></tr></table></figure>

<p>6、安装常用的软件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install tree nmap sysstat lrzsz dos2unix telnet bashcompletion bash-completion-extras vim lsof net-tools rsync ntpdate nfs-utils</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/07/04/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="左大大">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="左大大的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/07/04/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">Linux常用命令</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-07-04 18:20:25" itemprop="dateCreated datePublished" datetime="2020-07-04T18:20:25+08:00">2020-07-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h1><h2 id="CentOS系统"><a href="#CentOS系统" class="headerlink" title="CentOS系统"></a>CentOS系统</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">网路类型: </span><br><span class="line"> 	<span class="number">1.</span>桥接</span><br><span class="line">        跟windows主机共享网络</span><br><span class="line">            不足:占用ip</span><br><span class="line">    <span class="number">2.</span>NAT</span><br><span class="line">        自己用自己虚拟出来的网络</span><br><span class="line">            不足:</span><br><span class="line">    <span class="number">3.</span>仅主机模式</span><br><span class="line">        只允许跟windows主机相连接</span><br><span class="line">        </span><br><span class="line">系统分区:</span><br><span class="line">	<span class="number">1.</span>/boot分区 :系统启动文件</span><br><span class="line">	<span class="number">2.</span>/分区 :日常数据存储</span><br><span class="line">	<span class="number">3.</span>swap分区 :当内存不够用的时候,用swap分区硬盘充当内存使用(系统慢)</span><br><span class="line">	<span class="number">4.</span>home分区 :存放普通用户家目录</span><br><span class="line">	<span class="number">5.</span>var分区 :存放系统文件</span><br><span class="line">	<span class="number">6.</span>/tmp :Linux系统的回收站</span><br><span class="line">        </span><br><span class="line">系统优化:</span><br><span class="line">    <span class="number">1.</span>更换系统镜像源</span><br><span class="line">    <span class="number">2.</span>安装常用得系统软件 vim wget</span><br><span class="line">    <span class="number">3.</span>优化系统内核参数</span><br><span class="line">    <span class="number">4.</span>修改主机名</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">ls</span><br><span class="line">	-a : 显示隐藏文件</span><br><span class="line">	-l : 显示文件详细信息</span><br><span class="line">	-h : 格式化文件大小</span><br><span class="line">mkdir</span><br><span class="line">	-p : 递归创建</span><br><span class="line">	-v : 显示创建过程</span><br><span class="line"><span class="built_in">cd</span></span><br><span class="line"><span class="built_in">pwd</span></span><br><span class="line">touch</span><br><span class="line">rm</span><br><span class="line">	-f : 取消删除提示信息</span><br><span class="line">	-r : 递归删除目录</span><br><span class="line">cp</span><br><span class="line">	-r : 递归复制</span><br><span class="line">mv</span><br><span class="line">lsblk	： 查看本地磁盘</span><br><span class="line">fdisk	： 磁盘分区工具</span><br><span class="line">mount	： 挂载目录</span><br><span class="line">umount	： 卸载挂载</span><br><span class="line">df		： 显示挂载信息</span><br><span class="line">	-h : 格式化分区大小</span><br><span class="line"><span class="built_in">echo</span>	： 打印</span><br><span class="line">printenv：打印环境变量</span><br><span class="line">cat		： 查看文件</span><br><span class="line">&gt; 		：覆盖重定向</span><br><span class="line">&gt;&gt;		：追加重定向</span><br></pre></td></tr></table></figure>

<h2 id="1-常用命令"><a href="#1-常用命令" class="headerlink" title="1.常用命令"></a>1.常用命令</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Linux中最顶级目录是根目录：/</span></span><br><span class="line"><span class="comment"># ~ ：在linux当中指的是当前用户的家目录([用户名@主机名 当前所在的目录])</span></span><br><span class="line">	</span><br><span class="line"><span class="number">1.</span>touch 文件名            <span class="comment"># 创建文件(默认创建在当前用户文件夹下)                 </span></span><br><span class="line">	touch /路径 文件名     	  <span class="comment"># 指定文件夹下创建文件</span></span><br><span class="line"><span class="number">2.</span>ls                     <span class="comment"># 查看文件夹(默认查看当前用户文件夹所有文件)      </span></span><br><span class="line">	ls /文件名            	   <span class="comment"># 查看指定文件夹下文件</span></span><br><span class="line">    ls /					 <span class="comment"># 查看/(根目录)下所有内容</span></span><br><span class="line">    ls -l					 <span class="comment"># 查看文件详细信息(ls -l 等价于 ll)</span></span><br><span class="line"><span class="number">3.</span>mkdir 				 <span class="comment"># 创建文件夹(默认创建在当前用户文件夹下)</span></span><br><span class="line">	mkdir /路径名/文件名     	     <span class="comment"># 指定路径下创建文件夹</span></span><br><span class="line">    mkdir -p  -v /文件名/文件名    <span class="comment"># -p参数 递归创建文件夹  -v参数 显示递归创建过程</span></span><br><span class="line"><span class="number">4.</span>cd  					 <span class="comment"># 绝对路径的方式切换路径（根目录开始） 切换目录默认为家目录</span></span><br><span class="line">	cd .					 <span class="comment"># 在任何目录下都代表当前目录(顶级除外)</span></span><br><span class="line">    cd ..                    <span class="comment"># 在任何目录下都代表上一级目录(顶级除外)</span></span><br><span class="line">	cd /路径名				   <span class="comment"># 切换到指定路径下</span></span><br><span class="line"><span class="number">5.</span>pwd                    <span class="comment"># 查看当前路径    pwd命令查看的所有路径都是从根目录（/）开始的</span></span><br><span class="line"><span class="number">6.</span>hostnamectl <span class="built_in">set</span>-hostname 主机名	 <span class="comment"># 修改主机名(默认localhost 重新进入系统生效)</span></span><br><span class="line"><span class="number">7.</span>exit					 <span class="comment"># 登出</span></span><br><span class="line"><span class="number">8.</span>mv /源路径 /移动后的路径         <span class="comment"># 移动文件及文件夹</span></span><br><span class="line"><span class="number">9.</span>cp [参数] /源路径 /移动后路径    <span class="comment"># 复制文件   </span></span><br><span class="line">	cp -r 目录名 /				      <span class="comment"># 复制目录 -r参数 递归复制</span></span><br><span class="line"><span class="number">10.</span>rm						    <span class="comment"># 删除文件</span></span><br><span class="line">	rm -r 目录名				      <span class="comment"># 删除目录 -r参数 递归删除</span></span><br><span class="line">    rm -r -f 目录名                  <span class="comment"># -f参数 免去删除二次确认</span></span><br><span class="line"><span class="number">11.</span>echo <span class="string">&quot;打印的内容&quot;</span>              <span class="comment"># 打印(类似于print)</span></span><br><span class="line"><span class="number">12.</span>printenv                     <span class="comment"># 打印出当前系统中所有变量</span></span><br><span class="line"><span class="number">13.</span> &gt;							<span class="comment"># 写入内容到文件 覆盖重定向(类似于文件w覆盖写模式)</span></span><br><span class="line">	&gt;&gt;							<span class="comment"># 写入内容到文件 追加重定向(类似于文件a追加写模式)</span></span><br><span class="line"><span class="number">14.</span>cat 文件名                    <span class="comment"># 查看文件内容</span></span><br><span class="line"><span class="number">15.</span><span class="string">&#x27;.&#x27;</span>开头文件					 <span class="comment"># 隐藏文件</span></span><br><span class="line">	ls -a							<span class="comment"># -a参数 查看隐藏文件</span></span><br><span class="line">    ls -h 文件名					  <span class="comment"># -h参数 格式化文件大小便于查看(必须配合-l参数使用)</span></span><br><span class="line"><span class="number">16.</span>reboot						<span class="comment"># 重启系统</span></span><br><span class="line"><span class="number">17.</span>shutdown -h now				<span class="comment"># 立即关机</span></span><br><span class="line">	shutdown -h 时间				   <span class="comment"># 指定时间后关机</span></span><br><span class="line"><span class="number">18.</span>head命令 : 从头查看文件内容</span><br><span class="line">	-n : 设置显示头几行</span><br><span class="line"><span class="number">19.</span>tail命令 : 从尾查看文件内容</span><br><span class="line">	-n : 设置显示末尾几行</span><br><span class="line">	-f : 实时查看文件内容</span><br><span class="line">        </span><br><span class="line"><span class="number">20.</span>alias : 起别名</span><br><span class="line">	alias ll=<span class="string">&#x27;\ls -l -a --color=auto&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="number">20.</span>/dev/zero : 存放无穷无尽的<span class="number">0</span> </span><br><span class="line">   /dev/null : linux系统黑洞</span><br><span class="line">    </span><br><span class="line">lsblk 			<span class="comment"># 查看本地磁盘</span></span><br><span class="line">fdisk			<span class="comment"># 挂载分区工具</span></span><br><span class="line">mount			<span class="comment"># 挂载目录</span></span><br><span class="line">unount			<span class="comment"># 卸载挂载</span></span><br><span class="line">df				<span class="comment"># 显示挂载信息</span></span><br><span class="line">	-h				<span class="comment"># 格式化分区大小</span></span><br></pre></td></tr></table></figure>

<h2 id="2-磁盘操作"><a href="#2-磁盘操作" class="headerlink" title="2.磁盘操作"></a>2.磁盘操作</h2><h3 id="MBR分区"><a href="#MBR分区" class="headerlink" title="MBR分区"></a>MBR分区</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MBR分区</span><br><span class="line">    1.最多⽀持四个主分区</span><br><span class="line">    2.系统只能安装在主分区</span><br><span class="line">    3.扩展分区要占⼀个主分区</span><br><span class="line">    4.MBR 最⼤只⽀持 2TB，但拥有最好的兼容性</span><br></pre></td></tr></table></figure>

<h4 id="fdisk工具"><a href="#fdisk工具" class="headerlink" title="fdisk工具:"></a>fdisk工具:</h4><pre><code>     适⽤于磁盘⼩于2TB的磁盘，分区类型MBR，主分区4或主分区3+扩展分区（逻辑分区+…），分区后需要保存后才能⽣效
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">lsblk /dev/磁盘名			<span class="comment"># 查看本地磁盘</span></span><br><span class="line">fdisk /dev/磁盘名          <span class="comment"># 磁盘分区工具</span></span><br><span class="line">a toggle a bootable flag 					<span class="comment"># 切换分区启动标记</span></span><br><span class="line">b edit bsd disklabel 						<span class="comment"># 编辑sdb磁盘标签</span></span><br><span class="line">c toggle the dos compatibility flag 		<span class="comment"># 切换dos兼容模式</span></span><br><span class="line">d delete a partition 						<span class="comment"># 删除分区 保存退出要执⾏partprobe刷新分区表</span></span><br><span class="line">l <span class="built_in">list</span> known partition types 				<span class="comment"># 显示分区类型</span></span><br><span class="line">m <span class="built_in">print</span> this menu 							<span class="comment"># 显示帮助菜单</span></span><br><span class="line">n add a new partition 						<span class="comment"># 新建分区</span></span><br><span class="line">o create a new empty DOS partition table 	<span class="comment"># 创建新的空⽩分区表</span></span><br><span class="line">p <span class="built_in">print</span> the partition table 				<span class="comment"># 显示分区表的信息</span></span><br><span class="line">q quit without saving changes 				<span class="comment"># 不保存退出</span></span><br><span class="line">s create a new empty Sun disklabel 			<span class="comment"># 创建新的Sun磁盘标签</span></span><br><span class="line">t change a partitions system <span class="built_in">id</span> 			<span class="comment"># 修改分区ID,可以通过l查看id</span></span><br><span class="line">u change display/entry units 				<span class="comment"># 修改容量单位,磁柱或扇区</span></span><br><span class="line">v verify the partition table 				<span class="comment"># 检验分区表</span></span><br><span class="line">w write table to disk <span class="keyword">and</span> exit 				<span class="comment"># 保存退出</span></span><br><span class="line">x extra functionality (experts only) 		<span class="comment"># 拓展功能</span></span><br><span class="line"></span><br><span class="line">优先掌握</span><br><span class="line">    fdisk创建分区</span><br><span class="line">    m				<span class="comment"># 展示帮助信息</span></span><br><span class="line">    p				<span class="comment"># 显示分区列表</span></span><br><span class="line">    n 				<span class="comment"># 创建分区</span></span><br><span class="line">    d				<span class="comment"># 删除分区</span></span><br><span class="line">    w  				<span class="comment"># 保存退出</span></span><br><span class="line">    x 				<span class="comment"># 拓展功能</span></span><br></pre></td></tr></table></figure>

<h4 id="fdisk创建分区"><a href="#fdisk创建分区" class="headerlink" title="fdisk创建分区"></a>fdisk创建分区</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">fdisk /dev/sdb</span><br><span class="line">    欢迎使⽤ fdisk (util-linux <span class="number">2.23</span><span class="number">.2</span>)。</span><br><span class="line">    更改将停留在内存中，直到您决定将更改写⼊磁盘。</span><br><span class="line">    使⽤写⼊命令前请三思。</span><br><span class="line">    Device does <span class="keyword">not</span> contain a recognized partition table</span><br><span class="line">    使⽤磁盘标识符 <span class="number">0x12c57921</span> 创建新的 DOS 磁盘标签。</span><br><span class="line">命令(输⼊ m 获取帮助)：n</span><br><span class="line">    Partition <span class="built_in">type</span>:</span><br><span class="line">     p primary (<span class="number">0</span> primary, <span class="number">0</span> extended, <span class="number">4</span> free)</span><br><span class="line">     e extended</span><br><span class="line">    Select (default p): p</span><br><span class="line">    分区号 (<span class="number">1</span>-<span class="number">4</span>，默认 <span class="number">1</span>)：</span><br><span class="line">    起始 扇区 (<span class="number">2048</span>-<span class="number">41943039</span>，默认为 <span class="number">2048</span>)：</span><br><span class="line">    将使⽤默认值 <span class="number">2048</span></span><br><span class="line">    Last 扇区, +扇区 <span class="keyword">or</span> +size&#123;K,M,G&#125; (<span class="number">2048</span>-<span class="number">41943039</span>，默认为 <span class="number">41943039</span>)：+1G</span><br><span class="line">    分区 <span class="number">1</span> 已设置为 Linux 类型，⼤⼩设为 <span class="number">1</span> GiB</span><br><span class="line">命令(输⼊ m 获取帮助)：p</span><br><span class="line">    磁盘 /dev/sdb：<span class="number">21.5</span> GB, <span class="number">21474836480</span> 字节，<span class="number">41943040</span> 个扇区</span><br><span class="line">    Units = 扇区 of <span class="number">1</span> * <span class="number">512</span> = <span class="number">512</span> <span class="built_in">bytes</span></span><br><span class="line">    扇区⼤⼩(逻辑/物理)：<span class="number">512</span> 字节 / <span class="number">512</span> 字节</span><br><span class="line">    I/O ⼤⼩(最⼩/最佳)：<span class="number">512</span> 字节 / <span class="number">512</span> 字节</span><br><span class="line">    磁盘标签类型：dos</span><br><span class="line">    磁盘标识符：<span class="number">0x12c57921</span></span><br><span class="line">     设备 Boot Start End Blocks Id System</span><br><span class="line">    /dev/sdb1 <span class="number">2048</span> <span class="number">2099199</span> <span class="number">1048576</span> <span class="number">83</span> Linux</span><br><span class="line">命令(输⼊ m 获取帮助)： w <span class="comment"># 保存</span></span><br><span class="line">[root@chenyang ~]<span class="comment"># lsblk /dev/sdb  # 查看分区信息</span></span><br></pre></td></tr></table></figure>

<h4 id="磁盘分区的格式化及挂载"><a href="#磁盘分区的格式化及挂载" class="headerlink" title="磁盘分区的格式化及挂载"></a>磁盘分区的格式化及挂载</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">mkfs.xfs   : 性能强，功能完善</span><br><span class="line">mkfs.ext   : 性能稍弱</span><br><span class="line">mkfs.btrfs : 性能最强 新出不久</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">磁盘必须格式化制作⽂件系统，然后挂载才能使⽤</span></span><br><span class="line"><span class="string">	针对⼀块硬盘/dev/sdb</span></span><br><span class="line"><span class="string">	可以不分区，直接格式化制作⽂件系统</span></span><br><span class="line"><span class="string">	也可以基于mbr或者gpt分区⽅式分区完毕后，针对某⼀个分区⽐如/dev/sdb1制作⽂件系统</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.创建分区并保存</span></span><br><span class="line">	[root@egon ~]<span class="comment"># fdisk /dev/sdb</span></span><br><span class="line">    ...</span><br><span class="line">    命令(输⼊ m 获取帮助)： w <span class="comment"># 保存</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 2.格式化文件系统</span></span><br><span class="line">	[root@egon ~]<span class="comment"># mkfs.xfs /dev/sdb       # /dev/sdb整体就是⼀个分区</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.挂载分区到文件夹上</span></span><br><span class="line">	[root@egon ~]<span class="comment"># mount /dev/sdb1 /opt/</span></span><br><span class="line">				    命令   分区路径  挂载路径</span><br><span class="line">				    </span><br><span class="line"><span class="comment"># 4.查看挂载详情</span></span><br><span class="line">	[root@python mnt]<span class="comment"># df -h</span></span><br><span class="line">	</span><br><span class="line"><span class="comment"># 5.卸载</span></span><br><span class="line">	umount /dev/sdb1 <span class="comment"># 或者umount /opt</span></span><br><span class="line">    (umount -l /dev/sdb1 <span class="comment"># 或者umount -l /opt 强制卸载)</span></span><br><span class="line">	</span><br><span class="line"><span class="comment"># 错误处理</span></span><br><span class="line">    [root@python mnt]<span class="comment"># umount /mnt </span></span><br><span class="line">    umount: /mnt：目标忙。</span><br><span class="line">            (有些情况下通过 lsof(<span class="number">8</span>) 或 fuser(<span class="number">1</span>) 可以找到有关使用该设备的进程的有用信息)</span><br><span class="line">	解决:</span><br><span class="line">        当前所在目录为挂载目录，切换一个目录即可。</span><br></pre></td></tr></table></figure>

<ul>
<li>创建文件(touch)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># # 在Linux系统中创建test.txt</span></span><br><span class="line">[root@localhost ~]<span class="comment"># touch test.txt</span></span><br></pre></td></tr></table></figure>

<ul>
<li>创建文件夹(mkdir)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># # 创建一个文件夹</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkdir /root/python</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls /root/</span></span><br><span class="line">anaconda-ks.cfg  python  test.txt</span><br><span class="line">[root@localhost ~]<span class="comment"># mkdir /root/python1</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls /root/</span></span><br><span class="line">anaconda-ks.cfg  python  python1  test.txt</span><br><span class="line">[root@localhost ~]<span class="comment"># cd /root/python</span></span><br><span class="line">[root@localhost python]<span class="comment"># pwd</span></span><br><span class="line">/root/python</span><br><span class="line"></span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">-p : 递归创建目录</span><br><span class="line">[root@localhost python]<span class="comment"># mkdir -p /aa/bb/cc</span></span><br><span class="line">[root@localhost python]<span class="comment"># cd /aa/bb/cc</span></span><br><span class="line">[root@localhost cc]<span class="comment"># pwd</span></span><br><span class="line">/aa/bb/cc</span><br><span class="line"></span><br><span class="line">-v : 显示创建的过程</span><br><span class="line">[root@localhost cc]<span class="comment"># mkdir -p -v /aaa/bbb/ccc</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">&quot;/aaa&quot;</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">&quot;/aaa/bbb&quot;</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">&quot;/aaa/bbb/ccc&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>查看文件夹下面的文件(ls)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看文件需要跟对应的路径</span></span><br><span class="line"><span class="comment"># Linux中最顶级目录是根目录：/</span></span><br><span class="line">[root@localhost ~]<span class="comment"># # 根目录（最顶级目录）：/</span></span><br><span class="line">[root@localhost ~]<span class="comment"># # 根目录下有哪些内容</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls / </span></span><br><span class="line">bin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看文件的详细信息</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls -l</span></span><br><span class="line">总用量 4</span><br><span class="line">-rw-------. 1 root root 1766 6月  10 17:15 anaconda-ks.cfg</span><br><span class="line">drwxr-xr-x. 2 root root    6 6月  11 15:19 python</span><br><span class="line">drwxr-xr-x. 2 root root    6 6月  11 15:20 python1</span><br><span class="line">[root@localhost ~]<span class="comment"># ll</span></span><br><span class="line">总用量 4</span><br><span class="line">-rw-------. 1 root root 1766 6月  10 17:15 anaconda-ks.cfg</span><br><span class="line">drwxr-xr-x. 2 root root    6 6月  11 15:19 python</span><br><span class="line">drwxr-xr-x. 2 root root    6 6月  11 15:20 python1</span><br></pre></td></tr></table></figure>

<ul>
<li>查看当前所在路径(pwd)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前所在路径：pwd</span></span><br><span class="line"><span class="comment"># pwd命令查看的所有路径都是从根目录（/）开始的</span></span><br><span class="line">[root@localhost ~]<span class="comment"># pwd</span></span><br><span class="line">/root</span><br></pre></td></tr></table></figure>

<ul>
<li>切换目录(cd)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换目录：cd </span></span><br><span class="line"><span class="comment"># 以绝对路径的方式切换路径（从根目录开始）</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cd /etc</span></span><br><span class="line">[root@localhost etc]<span class="comment"># pwd</span></span><br><span class="line">/etc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 以相对路劲方式切换目录</span></span><br><span class="line"><span class="comment"># . 和 .. </span></span><br><span class="line"><span class="comment"># . : 在任何目录下都代表当前目录</span></span><br><span class="line">[root@localhost etc]<span class="comment"># cd .</span></span><br><span class="line">[root@localhost etc]<span class="comment"># pwd</span></span><br><span class="line">/etc</span><br><span class="line"></span><br><span class="line"><span class="comment"># .. : 在任何目录下都代表上一级目录（顶级目录除外）</span></span><br><span class="line">[root@localhost /]<span class="comment"># cd /etc/sysconfig/network-scripts/</span></span><br><span class="line">[root@localhost network-scripts]<span class="comment"># pwd</span></span><br><span class="line">/etc/sysconfig/network-scripts</span><br><span class="line">[root@localhost network-scripts]<span class="comment"># cd ..</span></span><br><span class="line">[root@localhost sysconfig]<span class="comment"># pwd</span></span><br><span class="line">/etc/sysconfig</span><br><span class="line"></span><br><span class="line"><span class="comment"># cd命令切换的默认目录为家目录（~ ：在linux当中指的是当前用户的家目录）</span></span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br><span class="line">[用户名@主机名 当前所在的目录]<span class="comment">#</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改主机名（重新进入系统才会生效）</span></span><br><span class="line">[root@localhost ~]<span class="comment"># hostnamectl set-hostname python</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 退出登录</span></span><br><span class="line">[<span class="built_in">test</span>@python ~]$ <span class="built_in">exit</span></span><br><span class="line">登出</span><br></pre></td></tr></table></figure>

<ul>
<li>移动文件(mv)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 移动文件：mv</span></span><br><span class="line"><span class="comment"># mv 源路径  移动后的路径</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mv /root/test.txt /</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">anaconda-ks.cfg  python  python1</span><br><span class="line">[root@localhost ~]<span class="comment"># ls /</span></span><br><span class="line">a  aa  aaa  bin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  test.txt</span><br></pre></td></tr></table></figure>

<ul>
<li>复制文件(cp)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cp [参数] 源路径  移动后的路径</span></span><br><span class="line"><span class="comment"># 复制文件</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cp anaconda-ks.cfg /</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 递归复制参数</span></span><br><span class="line">-r : 递归复制（常用于复制目录）</span><br><span class="line">[root@localhost ~]<span class="comment"># cp -r python /</span></span><br></pre></td></tr></table></figure>

<ul>
<li>删除文件(rm)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除文件的命令：rm</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">anaconda-ks.cfg  python  python1</span><br><span class="line">[root@localhost ~]<span class="comment"># rm anaconda-ks.cfg </span></span><br><span class="line">rm：是否删除普通文件 <span class="string">&quot;anaconda-ks.cfg&quot;</span>？n</span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">anaconda-ks.cfg  python  python1</span><br><span class="line">[root@localhost ~]<span class="comment"># rm anaconda-ks.cfg </span></span><br><span class="line">rm：是否删除普通文件 <span class="string">&quot;anaconda-ks.cfg&quot;</span>？y</span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">python  python1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除目录（-r ： 递归删除文件）</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">python  python1</span><br><span class="line">[root@localhost ~]<span class="comment"># rm python1</span></span><br><span class="line">rm: 无法删除<span class="string">&quot;python1&quot;</span>: 是一个目录</span><br><span class="line">[root@localhost ~]<span class="comment"># rm -r python1</span></span><br><span class="line">rm：是否删除目录 <span class="string">&quot;python1&quot;</span>？y</span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">python</span><br><span class="line"></span><br><span class="line"><span class="comment"># -f : 免去删除提示</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">python</span><br><span class="line">[root@localhost ~]<span class="comment"># rm -r -f python/</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br></pre></td></tr></table></figure>

<ul>
<li>打印命令(echo)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;打印的内容&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>打印出当前系统中所有的变量</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># printenv </span></span><br></pre></td></tr></table></figure>

<ul>
<li>重定向符号(&gt;和&gt;&gt;)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &gt; 和 &gt;&gt; </span></span><br><span class="line"><span class="comment"># &gt; : 覆盖重定向(先删除文件内容，后写入内容到文件)</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo &quot;Hello China&quot; &gt; test.txt</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &gt;&gt; : 追加重定向（原来的内容不动，后来的内容从底部插入）</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo &quot;Hello World&quot; &gt;&gt; test.txt</span></span><br></pre></td></tr></table></figure>

<ul>
<li>查看文件内容</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># cat test.txt </span></span><br><span class="line">Hello World</span><br></pre></td></tr></table></figure>

<ul>
<li>隐藏文件(.文件名)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文件名以.开头的就是隐藏文件</span></span><br><span class="line"></span><br><span class="line">-a : 查看隐藏文件</span><br><span class="line">[root@localhost ~]<span class="comment"># ls -a</span></span><br><span class="line">....bash_logout  .bash_profile</span><br><span class="line"></span><br><span class="line">-l : 查看文件详细信息</span><br><span class="line">[root@localhost ~]<span class="comment"># ls -l</span></span><br><span class="line">总用量 4</span><br><span class="line">-rw-r--r--. 1 root root 24 6月  11 16:26 test.txt</span><br><span class="line"> 文件权限       所属用户 所属组  文件的大小  创建时间  文件名称</span><br><span class="line"> </span><br><span class="line">[root@localhost ~]<span class="comment"># # ls -l 等价于 ll</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ll</span></span><br><span class="line">总用量 4</span><br><span class="line">-rw-r--r--. 1 root root 24 6月  11 16:26 test.txt</span><br><span class="line">[root@localhost ~]<span class="comment"># ls -l</span></span><br><span class="line">总用量 4</span><br><span class="line">-rw-r--r--. 1 root root 24 6月  11 16:26 test.txt</span><br><span class="line"></span><br><span class="line">-h : 以方便查看方式查看文件大小（必须配合-l参数）</span><br><span class="line"></span><br><span class="line">reboot : 重启系统</span><br><span class="line">shutdown -h now : 立即关机</span><br><span class="line">shutdown -h 2 : </span><br></pre></td></tr></table></figure>

<h2 id="GPT分区"><a href="#GPT分区" class="headerlink" title="GPT分区"></a>GPT分区</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">分区版本:</span><br><span class="line">    beat	: 公测版本</span><br><span class="line">    stable	: 稳定版本</span><br><span class="line">    alpahe	: 内测版本</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">1、相较于MBR分区 </span><br><span class="line">	GPT分区可以实现2TB以上的硬盘分区</span><br><span class="line"></span><br><span class="line">2、分区命令(类似于MBR分区)</span><br><span class="line">	安装分区工具:</span><br><span class="line">		yum install gdisk -y</span><br><span class="line">	分区命令:</span><br><span class="line">		gdisk /dev/sdd</span><br><span class="line">	常用命令:</span><br><span class="line">		? : 查看帮助</span><br><span class="line">		n : 新建一个分区</span><br><span class="line">		p : 查看分区列表</span><br><span class="line">		w : 保存并退出</span><br><span class="line">		d : 删除一个分区	</span><br><span class="line">		</span><br><span class="line">eg:</span><br><span class="line">	[root@python ~]# gdisk /dev/sdd</span><br></pre></td></tr></table></figure>

<h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/bin : 系统命令</span><br><span class="line">/boot: linux系统启动文件</span><br><span class="line">/etc : 系统配置目录</span><br><span class="line">/home: 普通用户的家目录</span><br><span class="line">/media: 多媒体目录</span><br><span class="line">/mnt : 挂载一些硬件设备的目录</span><br><span class="line">/opt : 下载文件常用目录</span><br><span class="line">/proc: 关联系统虚拟设备</span><br><span class="line">/srv : 该⽬录存放⼀些服务启动之后需要提取的数据。</span><br><span class="line">/root: 管理员家目录</span><br><span class="line">/run : 存放系统运行临时数据目录</span><br><span class="line">/sbin: 存放系统管理员命令</span><br><span class="line">/tmp : Linux系统的垃圾桶</span><br><span class="line">/usr : 存放系统安装软件的目录</span><br><span class="line">/var : 存放系统日志</span><br></pre></td></tr></table></figure>

<h2 id="vi-vim编辑器"><a href="#vi-vim编辑器" class="headerlink" title="vi/vim编辑器"></a>vi/vim编辑器</h2><h4 id="vi编辑器常用功能"><a href="#vi编辑器常用功能" class="headerlink" title="vi编辑器常用功能"></a>vi编辑器常用功能</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">vim是vi的升级版(用法命令大同)</span><br><span class="line"></span><br><span class="line">写入</span><br><span class="line">	a : 进入插入模式，并在光标之后进行插入</span><br><span class="line">	i : 进入插入模式，并在光标之前进行插入</span><br><span class="line">	o : 进入插入模式，并在光标所在行开启下一行</span><br><span class="line">	</span><br><span class="line">查找</span><br><span class="line">	在命令行模式下按下键盘上的/，然后输入要查询的内容，搜索到内容后光标自动定位并设置颜色</span><br><span class="line"></span><br><span class="line">删除</span><br><span class="line">	1、进入插入模式，像修改文本一样去删除文件。</span><br><span class="line">	2、连续按d键两次，删除一行内容</span><br><span class="line">	3、先按一个数字n，然后按d键两次，向下删除n行</span><br><span class="line"></span><br><span class="line">复制</span><br><span class="line">	1、连续按y键两次，复制当前光标所在行，p键粘贴</span><br><span class="line">	2、先按一个数字n，然后按y键两次从光标所在行向下复制n行，p键粘贴</span><br><span class="line"></span><br><span class="line">保存</span><br><span class="line">	首先进入末行模式</span><br><span class="line">	w ： 保存</span><br><span class="line">	q : 退出（！强制退出，退出之后未保存内容丢失）</span><br><span class="line"></span><br><span class="line">补充：</span><br><span class="line">	x : 删除光标包含的内容</span><br><span class="line">	u : 返回上一步，只在同一次编辑中有效</span><br><span class="line">	U ：还原上一步</span><br><span class="line">	$ : 光标运行到行尾</span><br><span class="line">	0 : 光标运行到行首</span><br><span class="line">	G ：光标移动到行尾</span><br><span class="line">	gg: 光标移动到行首</span><br><span class="line">	H ：运行第一行的行首</span><br><span class="line">	M ：中间行的行首</span><br><span class="line">	L ：最后一行的行首</span><br><span class="line"></span><br><span class="line">可视块：</span><br><span class="line">	ctrl + v: 选择你要修改的内容，</span><br><span class="line">		删除：x</span><br><span class="line">		编辑：<span class="built_in">shift</span> + i（退出可视块编辑模式按ESC键，等一会才会同步修改内容）</span><br></pre></td></tr></table></figure>

<h4 id="vim编辑器高级"><a href="#vim编辑器高级" class="headerlink" title="vim编辑器高级"></a>vim编辑器高级</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># 定位到某一行</span><br><span class="line">:n  跳转到n行</span><br><span class="line"></span><br><span class="line"># 内容替换(末行模式)</span><br><span class="line">:开始位置,结束的位置  s/被替换内容/替换的内容</span><br><span class="line"></span><br><span class="line">1、指定位置</span><br><span class="line">	:2,10 s/Hello/nihao 从第2行开始，到第十行结束</span><br><span class="line">	:2,$  s/Hello/nihao 从第二行开始，到最后</span><br><span class="line">	:%    s/Hello/nihao 全文替换</span><br><span class="line"></span><br><span class="line">2、写入文件</span><br><span class="line">	:w 写入文件</span><br><span class="line">	:w /root 写入新的文件</span><br><span class="line">	:1,3 w /root/bcd.txt 指定行写入到新的文件中</span><br><span class="line">	:1,3 w！ /root/bcd.txt 指定行强制写入到新的文件中</span><br><span class="line"></span><br><span class="line">3、同时编辑多个文件</span><br><span class="line">	vim -o 文件名 文件名 : 水平分割</span><br><span class="line">	vim -O 文件名 文件名 : 垂直分割</span><br><span class="line"></span><br><span class="line">4、同时对比编辑两个不同文件</span><br><span class="line">	ctrl + ww : 切换屏幕</span><br><span class="line">	</span><br><span class="line">ps:</span><br><span class="line">	有几个文件则保存几次</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/07/04/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="左大大">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="左大大的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/07/04/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">Linux常用命令</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-07-04 18:20:25" itemprop="dateCreated datePublished" datetime="2020-07-04T18:20:25+08:00">2020-07-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h1><h2 id="CentOS系统"><a href="#CentOS系统" class="headerlink" title="CentOS系统"></a>CentOS系统</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">网路类型: </span><br><span class="line"> 	<span class="number">1.</span>桥接</span><br><span class="line">        跟windows主机共享网络</span><br><span class="line">            不足:占用ip</span><br><span class="line">    <span class="number">2.</span>NAT</span><br><span class="line">        自己用自己虚拟出来的网络</span><br><span class="line">            不足:</span><br><span class="line">    <span class="number">3.</span>仅主机模式</span><br><span class="line">        只允许跟windows主机相连接</span><br><span class="line">        </span><br><span class="line">系统分区:</span><br><span class="line">	<span class="number">1.</span>/boot分区 :系统启动文件</span><br><span class="line">	<span class="number">2.</span>/分区 :日常数据存储</span><br><span class="line">	<span class="number">3.</span>swap分区 :当内存不够用的时候,用swap分区硬盘充当内存使用(系统慢)</span><br><span class="line">	<span class="number">4.</span>home分区 :存放普通用户家目录</span><br><span class="line">	<span class="number">5.</span>var分区 :存放系统文件</span><br><span class="line">	<span class="number">6.</span>/tmp :Linux系统的回收站</span><br><span class="line">        </span><br><span class="line">系统优化:</span><br><span class="line">    <span class="number">1.</span>更换系统镜像源</span><br><span class="line">    <span class="number">2.</span>安装常用得系统软件 vim wget</span><br><span class="line">    <span class="number">3.</span>优化系统内核参数</span><br><span class="line">    <span class="number">4.</span>修改主机名</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">ls</span><br><span class="line">	-a : 显示隐藏文件</span><br><span class="line">	-l : 显示文件详细信息</span><br><span class="line">	-h : 格式化文件大小</span><br><span class="line">mkdir</span><br><span class="line">	-p : 递归创建</span><br><span class="line">	-v : 显示创建过程</span><br><span class="line"><span class="built_in">cd</span></span><br><span class="line"><span class="built_in">pwd</span></span><br><span class="line">touch</span><br><span class="line">rm</span><br><span class="line">	-f : 取消删除提示信息</span><br><span class="line">	-r : 递归删除目录</span><br><span class="line">cp</span><br><span class="line">	-r : 递归复制</span><br><span class="line">mv</span><br><span class="line">lsblk	： 查看本地磁盘</span><br><span class="line">fdisk	： 磁盘分区工具</span><br><span class="line">mount	： 挂载目录</span><br><span class="line">umount	： 卸载挂载</span><br><span class="line">df		： 显示挂载信息</span><br><span class="line">	-h : 格式化分区大小</span><br><span class="line"><span class="built_in">echo</span>	： 打印</span><br><span class="line">printenv：打印环境变量</span><br><span class="line">cat		： 查看文件</span><br><span class="line">&gt; 		：覆盖重定向</span><br><span class="line">&gt;&gt;		：追加重定向</span><br></pre></td></tr></table></figure>

<h2 id="1-常用命令"><a href="#1-常用命令" class="headerlink" title="1.常用命令"></a>1.常用命令</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Linux中最顶级目录是根目录：/</span></span><br><span class="line"><span class="comment"># ~ ：在linux当中指的是当前用户的家目录([用户名@主机名 当前所在的目录])</span></span><br><span class="line">	</span><br><span class="line"><span class="number">1.</span>touch 文件名            <span class="comment"># 创建文件(默认创建在当前用户文件夹下)                 </span></span><br><span class="line">	touch /路径 文件名     	  <span class="comment"># 指定文件夹下创建文件</span></span><br><span class="line"><span class="number">2.</span>ls                     <span class="comment"># 查看文件夹(默认查看当前用户文件夹所有文件)      </span></span><br><span class="line">	ls /文件名            	   <span class="comment"># 查看指定文件夹下文件</span></span><br><span class="line">    ls /					 <span class="comment"># 查看/(根目录)下所有内容</span></span><br><span class="line">    ls -l					 <span class="comment"># 查看文件详细信息(ls -l 等价于 ll)</span></span><br><span class="line"><span class="number">3.</span>mkdir 				 <span class="comment"># 创建文件夹(默认创建在当前用户文件夹下)</span></span><br><span class="line">	mkdir /路径名/文件名     	     <span class="comment"># 指定路径下创建文件夹</span></span><br><span class="line">    mkdir -p  -v /文件名/文件名    <span class="comment"># -p参数 递归创建文件夹  -v参数 显示递归创建过程</span></span><br><span class="line"><span class="number">4.</span>cd  					 <span class="comment"># 绝对路径的方式切换路径（根目录开始） 切换目录默认为家目录</span></span><br><span class="line">	cd .					 <span class="comment"># 在任何目录下都代表当前目录(顶级除外)</span></span><br><span class="line">    cd ..                    <span class="comment"># 在任何目录下都代表上一级目录(顶级除外)</span></span><br><span class="line">	cd /路径名				   <span class="comment"># 切换到指定路径下</span></span><br><span class="line"><span class="number">5.</span>pwd                    <span class="comment"># 查看当前路径    pwd命令查看的所有路径都是从根目录（/）开始的</span></span><br><span class="line"><span class="number">6.</span>hostnamectl <span class="built_in">set</span>-hostname 主机名	 <span class="comment"># 修改主机名(默认localhost 重新进入系统生效)</span></span><br><span class="line"><span class="number">7.</span>exit					 <span class="comment"># 登出</span></span><br><span class="line"><span class="number">8.</span>mv /源路径 /移动后的路径         <span class="comment"># 移动文件及文件夹</span></span><br><span class="line"><span class="number">9.</span>cp [参数] /源路径 /移动后路径    <span class="comment"># 复制文件   </span></span><br><span class="line">	cp -r 目录名 /				      <span class="comment"># 复制目录 -r参数 递归复制</span></span><br><span class="line"><span class="number">10.</span>rm						    <span class="comment"># 删除文件</span></span><br><span class="line">	rm -r 目录名				      <span class="comment"># 删除目录 -r参数 递归删除</span></span><br><span class="line">    rm -r -f 目录名                  <span class="comment"># -f参数 免去删除二次确认</span></span><br><span class="line"><span class="number">11.</span>echo <span class="string">&quot;打印的内容&quot;</span>              <span class="comment"># 打印(类似于print)</span></span><br><span class="line"><span class="number">12.</span>printenv                     <span class="comment"># 打印出当前系统中所有变量</span></span><br><span class="line"><span class="number">13.</span> &gt;							<span class="comment"># 写入内容到文件 覆盖重定向(类似于文件w覆盖写模式)</span></span><br><span class="line">	&gt;&gt;							<span class="comment"># 写入内容到文件 追加重定向(类似于文件a追加写模式)</span></span><br><span class="line"><span class="number">14.</span>cat 文件名                    <span class="comment"># 查看文件内容</span></span><br><span class="line"><span class="number">15.</span><span class="string">&#x27;.&#x27;</span>开头文件					 <span class="comment"># 隐藏文件</span></span><br><span class="line">	ls -a							<span class="comment"># -a参数 查看隐藏文件</span></span><br><span class="line">    ls -h 文件名					  <span class="comment"># -h参数 格式化文件大小便于查看(必须配合-l参数使用)</span></span><br><span class="line"><span class="number">16.</span>reboot						<span class="comment"># 重启系统</span></span><br><span class="line"><span class="number">17.</span>shutdown -h now				<span class="comment"># 立即关机</span></span><br><span class="line">	shutdown -h 时间				   <span class="comment"># 指定时间后关机</span></span><br><span class="line"><span class="number">18.</span>head命令 : 从头查看文件内容</span><br><span class="line">	-n : 设置显示头几行</span><br><span class="line"><span class="number">19.</span>tail命令 : 从尾查看文件内容</span><br><span class="line">	-n : 设置显示末尾几行</span><br><span class="line">	-f : 实时查看文件内容</span><br><span class="line">        </span><br><span class="line"><span class="number">20.</span>alias : 起别名</span><br><span class="line">	alias ll=<span class="string">&#x27;\ls -l -a --color=auto&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="number">20.</span>/dev/zero : 存放无穷无尽的<span class="number">0</span> </span><br><span class="line">   /dev/null : linux系统黑洞</span><br><span class="line">    </span><br><span class="line">lsblk 			<span class="comment"># 查看本地磁盘</span></span><br><span class="line">fdisk			<span class="comment"># 挂载分区工具</span></span><br><span class="line">mount			<span class="comment"># 挂载目录</span></span><br><span class="line">unount			<span class="comment"># 卸载挂载</span></span><br><span class="line">df				<span class="comment"># 显示挂载信息</span></span><br><span class="line">	-h				<span class="comment"># 格式化分区大小</span></span><br></pre></td></tr></table></figure>

<h2 id="2-磁盘操作"><a href="#2-磁盘操作" class="headerlink" title="2.磁盘操作"></a>2.磁盘操作</h2><h3 id="MBR分区"><a href="#MBR分区" class="headerlink" title="MBR分区"></a>MBR分区</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MBR分区</span><br><span class="line">    1.最多⽀持四个主分区</span><br><span class="line">    2.系统只能安装在主分区</span><br><span class="line">    3.扩展分区要占⼀个主分区</span><br><span class="line">    4.MBR 最⼤只⽀持 2TB，但拥有最好的兼容性</span><br></pre></td></tr></table></figure>

<h4 id="fdisk工具"><a href="#fdisk工具" class="headerlink" title="fdisk工具:"></a>fdisk工具:</h4><pre><code>     适⽤于磁盘⼩于2TB的磁盘，分区类型MBR，主分区4或主分区3+扩展分区（逻辑分区+…），分区后需要保存后才能⽣效
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">lsblk /dev/磁盘名			<span class="comment"># 查看本地磁盘</span></span><br><span class="line">fdisk /dev/磁盘名          <span class="comment"># 磁盘分区工具</span></span><br><span class="line">a toggle a bootable flag 					<span class="comment"># 切换分区启动标记</span></span><br><span class="line">b edit bsd disklabel 						<span class="comment"># 编辑sdb磁盘标签</span></span><br><span class="line">c toggle the dos compatibility flag 		<span class="comment"># 切换dos兼容模式</span></span><br><span class="line">d delete a partition 						<span class="comment"># 删除分区 保存退出要执⾏partprobe刷新分区表</span></span><br><span class="line">l <span class="built_in">list</span> known partition types 				<span class="comment"># 显示分区类型</span></span><br><span class="line">m <span class="built_in">print</span> this menu 							<span class="comment"># 显示帮助菜单</span></span><br><span class="line">n add a new partition 						<span class="comment"># 新建分区</span></span><br><span class="line">o create a new empty DOS partition table 	<span class="comment"># 创建新的空⽩分区表</span></span><br><span class="line">p <span class="built_in">print</span> the partition table 				<span class="comment"># 显示分区表的信息</span></span><br><span class="line">q quit without saving changes 				<span class="comment"># 不保存退出</span></span><br><span class="line">s create a new empty Sun disklabel 			<span class="comment"># 创建新的Sun磁盘标签</span></span><br><span class="line">t change a partitions system <span class="built_in">id</span> 			<span class="comment"># 修改分区ID,可以通过l查看id</span></span><br><span class="line">u change display/entry units 				<span class="comment"># 修改容量单位,磁柱或扇区</span></span><br><span class="line">v verify the partition table 				<span class="comment"># 检验分区表</span></span><br><span class="line">w write table to disk <span class="keyword">and</span> exit 				<span class="comment"># 保存退出</span></span><br><span class="line">x extra functionality (experts only) 		<span class="comment"># 拓展功能</span></span><br><span class="line"></span><br><span class="line">优先掌握</span><br><span class="line">    fdisk创建分区</span><br><span class="line">    m				<span class="comment"># 展示帮助信息</span></span><br><span class="line">    p				<span class="comment"># 显示分区列表</span></span><br><span class="line">    n 				<span class="comment"># 创建分区</span></span><br><span class="line">    d				<span class="comment"># 删除分区</span></span><br><span class="line">    w  				<span class="comment"># 保存退出</span></span><br><span class="line">    x 				<span class="comment"># 拓展功能</span></span><br></pre></td></tr></table></figure>

<h4 id="fdisk创建分区"><a href="#fdisk创建分区" class="headerlink" title="fdisk创建分区"></a>fdisk创建分区</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">fdisk /dev/sdb</span><br><span class="line">    欢迎使⽤ fdisk (util-linux <span class="number">2.23</span><span class="number">.2</span>)。</span><br><span class="line">    更改将停留在内存中，直到您决定将更改写⼊磁盘。</span><br><span class="line">    使⽤写⼊命令前请三思。</span><br><span class="line">    Device does <span class="keyword">not</span> contain a recognized partition table</span><br><span class="line">    使⽤磁盘标识符 <span class="number">0x12c57921</span> 创建新的 DOS 磁盘标签。</span><br><span class="line">命令(输⼊ m 获取帮助)：n</span><br><span class="line">    Partition <span class="built_in">type</span>:</span><br><span class="line">     p primary (<span class="number">0</span> primary, <span class="number">0</span> extended, <span class="number">4</span> free)</span><br><span class="line">     e extended</span><br><span class="line">    Select (default p): p</span><br><span class="line">    分区号 (<span class="number">1</span>-<span class="number">4</span>，默认 <span class="number">1</span>)：</span><br><span class="line">    起始 扇区 (<span class="number">2048</span>-<span class="number">41943039</span>，默认为 <span class="number">2048</span>)：</span><br><span class="line">    将使⽤默认值 <span class="number">2048</span></span><br><span class="line">    Last 扇区, +扇区 <span class="keyword">or</span> +size&#123;K,M,G&#125; (<span class="number">2048</span>-<span class="number">41943039</span>，默认为 <span class="number">41943039</span>)：+1G</span><br><span class="line">    分区 <span class="number">1</span> 已设置为 Linux 类型，⼤⼩设为 <span class="number">1</span> GiB</span><br><span class="line">命令(输⼊ m 获取帮助)：p</span><br><span class="line">    磁盘 /dev/sdb：<span class="number">21.5</span> GB, <span class="number">21474836480</span> 字节，<span class="number">41943040</span> 个扇区</span><br><span class="line">    Units = 扇区 of <span class="number">1</span> * <span class="number">512</span> = <span class="number">512</span> <span class="built_in">bytes</span></span><br><span class="line">    扇区⼤⼩(逻辑/物理)：<span class="number">512</span> 字节 / <span class="number">512</span> 字节</span><br><span class="line">    I/O ⼤⼩(最⼩/最佳)：<span class="number">512</span> 字节 / <span class="number">512</span> 字节</span><br><span class="line">    磁盘标签类型：dos</span><br><span class="line">    磁盘标识符：<span class="number">0x12c57921</span></span><br><span class="line">     设备 Boot Start End Blocks Id System</span><br><span class="line">    /dev/sdb1 <span class="number">2048</span> <span class="number">2099199</span> <span class="number">1048576</span> <span class="number">83</span> Linux</span><br><span class="line">命令(输⼊ m 获取帮助)： w <span class="comment"># 保存</span></span><br><span class="line">[root@chenyang ~]<span class="comment"># lsblk /dev/sdb  # 查看分区信息</span></span><br></pre></td></tr></table></figure>

<h4 id="磁盘分区的格式化及挂载"><a href="#磁盘分区的格式化及挂载" class="headerlink" title="磁盘分区的格式化及挂载"></a>磁盘分区的格式化及挂载</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">mkfs.xfs   : 性能强，功能完善</span><br><span class="line">mkfs.ext   : 性能稍弱</span><br><span class="line">mkfs.btrfs : 性能最强 新出不久</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">磁盘必须格式化制作⽂件系统，然后挂载才能使⽤</span></span><br><span class="line"><span class="string">	针对⼀块硬盘/dev/sdb</span></span><br><span class="line"><span class="string">	可以不分区，直接格式化制作⽂件系统</span></span><br><span class="line"><span class="string">	也可以基于mbr或者gpt分区⽅式分区完毕后，针对某⼀个分区⽐如/dev/sdb1制作⽂件系统</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.创建分区并保存</span></span><br><span class="line">	[root@egon ~]<span class="comment"># fdisk /dev/sdb</span></span><br><span class="line">    ...</span><br><span class="line">    命令(输⼊ m 获取帮助)： w <span class="comment"># 保存</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 2.格式化文件系统</span></span><br><span class="line">	[root@egon ~]<span class="comment"># mkfs.xfs /dev/sdb       # /dev/sdb整体就是⼀个分区</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.挂载分区到文件夹上</span></span><br><span class="line">	[root@egon ~]<span class="comment"># mount /dev/sdb1 /opt/</span></span><br><span class="line">				    命令   分区路径  挂载路径</span><br><span class="line">				    </span><br><span class="line"><span class="comment"># 4.查看挂载详情</span></span><br><span class="line">	[root@python mnt]<span class="comment"># df -h</span></span><br><span class="line">	</span><br><span class="line"><span class="comment"># 5.卸载</span></span><br><span class="line">	umount /dev/sdb1 <span class="comment"># 或者umount /opt</span></span><br><span class="line">    (umount -l /dev/sdb1 <span class="comment"># 或者umount -l /opt 强制卸载)</span></span><br><span class="line">	</span><br><span class="line"><span class="comment"># 错误处理</span></span><br><span class="line">    [root@python mnt]<span class="comment"># umount /mnt </span></span><br><span class="line">    umount: /mnt：目标忙。</span><br><span class="line">            (有些情况下通过 lsof(<span class="number">8</span>) 或 fuser(<span class="number">1</span>) 可以找到有关使用该设备的进程的有用信息)</span><br><span class="line">	解决:</span><br><span class="line">        当前所在目录为挂载目录，切换一个目录即可。</span><br></pre></td></tr></table></figure>

<ul>
<li>创建文件(touch)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># # 在Linux系统中创建test.txt</span></span><br><span class="line">[root@localhost ~]<span class="comment"># touch test.txt</span></span><br></pre></td></tr></table></figure>

<ul>
<li>创建文件夹(mkdir)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># # 创建一个文件夹</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkdir /root/python</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls /root/</span></span><br><span class="line">anaconda-ks.cfg  python  test.txt</span><br><span class="line">[root@localhost ~]<span class="comment"># mkdir /root/python1</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls /root/</span></span><br><span class="line">anaconda-ks.cfg  python  python1  test.txt</span><br><span class="line">[root@localhost ~]<span class="comment"># cd /root/python</span></span><br><span class="line">[root@localhost python]<span class="comment"># pwd</span></span><br><span class="line">/root/python</span><br><span class="line"></span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">-p : 递归创建目录</span><br><span class="line">[root@localhost python]<span class="comment"># mkdir -p /aa/bb/cc</span></span><br><span class="line">[root@localhost python]<span class="comment"># cd /aa/bb/cc</span></span><br><span class="line">[root@localhost cc]<span class="comment"># pwd</span></span><br><span class="line">/aa/bb/cc</span><br><span class="line"></span><br><span class="line">-v : 显示创建的过程</span><br><span class="line">[root@localhost cc]<span class="comment"># mkdir -p -v /aaa/bbb/ccc</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">&quot;/aaa&quot;</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">&quot;/aaa/bbb&quot;</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">&quot;/aaa/bbb/ccc&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>查看文件夹下面的文件(ls)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看文件需要跟对应的路径</span></span><br><span class="line"><span class="comment"># Linux中最顶级目录是根目录：/</span></span><br><span class="line">[root@localhost ~]<span class="comment"># # 根目录（最顶级目录）：/</span></span><br><span class="line">[root@localhost ~]<span class="comment"># # 根目录下有哪些内容</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls / </span></span><br><span class="line">bin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看文件的详细信息</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls -l</span></span><br><span class="line">总用量 4</span><br><span class="line">-rw-------. 1 root root 1766 6月  10 17:15 anaconda-ks.cfg</span><br><span class="line">drwxr-xr-x. 2 root root    6 6月  11 15:19 python</span><br><span class="line">drwxr-xr-x. 2 root root    6 6月  11 15:20 python1</span><br><span class="line">[root@localhost ~]<span class="comment"># ll</span></span><br><span class="line">总用量 4</span><br><span class="line">-rw-------. 1 root root 1766 6月  10 17:15 anaconda-ks.cfg</span><br><span class="line">drwxr-xr-x. 2 root root    6 6月  11 15:19 python</span><br><span class="line">drwxr-xr-x. 2 root root    6 6月  11 15:20 python1</span><br></pre></td></tr></table></figure>

<ul>
<li>查看当前所在路径(pwd)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前所在路径：pwd</span></span><br><span class="line"><span class="comment"># pwd命令查看的所有路径都是从根目录（/）开始的</span></span><br><span class="line">[root@localhost ~]<span class="comment"># pwd</span></span><br><span class="line">/root</span><br></pre></td></tr></table></figure>

<ul>
<li>切换目录(cd)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换目录：cd </span></span><br><span class="line"><span class="comment"># 以绝对路径的方式切换路径（从根目录开始）</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cd /etc</span></span><br><span class="line">[root@localhost etc]<span class="comment"># pwd</span></span><br><span class="line">/etc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 以相对路劲方式切换目录</span></span><br><span class="line"><span class="comment"># . 和 .. </span></span><br><span class="line"><span class="comment"># . : 在任何目录下都代表当前目录</span></span><br><span class="line">[root@localhost etc]<span class="comment"># cd .</span></span><br><span class="line">[root@localhost etc]<span class="comment"># pwd</span></span><br><span class="line">/etc</span><br><span class="line"></span><br><span class="line"><span class="comment"># .. : 在任何目录下都代表上一级目录（顶级目录除外）</span></span><br><span class="line">[root@localhost /]<span class="comment"># cd /etc/sysconfig/network-scripts/</span></span><br><span class="line">[root@localhost network-scripts]<span class="comment"># pwd</span></span><br><span class="line">/etc/sysconfig/network-scripts</span><br><span class="line">[root@localhost network-scripts]<span class="comment"># cd ..</span></span><br><span class="line">[root@localhost sysconfig]<span class="comment"># pwd</span></span><br><span class="line">/etc/sysconfig</span><br><span class="line"></span><br><span class="line"><span class="comment"># cd命令切换的默认目录为家目录（~ ：在linux当中指的是当前用户的家目录）</span></span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br><span class="line">[用户名@主机名 当前所在的目录]<span class="comment">#</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改主机名（重新进入系统才会生效）</span></span><br><span class="line">[root@localhost ~]<span class="comment"># hostnamectl set-hostname python</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 退出登录</span></span><br><span class="line">[<span class="built_in">test</span>@python ~]$ <span class="built_in">exit</span></span><br><span class="line">登出</span><br></pre></td></tr></table></figure>

<ul>
<li>移动文件(mv)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 移动文件：mv</span></span><br><span class="line"><span class="comment"># mv 源路径  移动后的路径</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mv /root/test.txt /</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">anaconda-ks.cfg  python  python1</span><br><span class="line">[root@localhost ~]<span class="comment"># ls /</span></span><br><span class="line">a  aa  aaa  bin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  test.txt</span><br></pre></td></tr></table></figure>

<ul>
<li>复制文件(cp)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cp [参数] 源路径  移动后的路径</span></span><br><span class="line"><span class="comment"># 复制文件</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cp anaconda-ks.cfg /</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 递归复制参数</span></span><br><span class="line">-r : 递归复制（常用于复制目录）</span><br><span class="line">[root@localhost ~]<span class="comment"># cp -r python /</span></span><br></pre></td></tr></table></figure>

<ul>
<li>删除文件(rm)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除文件的命令：rm</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">anaconda-ks.cfg  python  python1</span><br><span class="line">[root@localhost ~]<span class="comment"># rm anaconda-ks.cfg </span></span><br><span class="line">rm：是否删除普通文件 <span class="string">&quot;anaconda-ks.cfg&quot;</span>？n</span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">anaconda-ks.cfg  python  python1</span><br><span class="line">[root@localhost ~]<span class="comment"># rm anaconda-ks.cfg </span></span><br><span class="line">rm：是否删除普通文件 <span class="string">&quot;anaconda-ks.cfg&quot;</span>？y</span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">python  python1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除目录（-r ： 递归删除文件）</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">python  python1</span><br><span class="line">[root@localhost ~]<span class="comment"># rm python1</span></span><br><span class="line">rm: 无法删除<span class="string">&quot;python1&quot;</span>: 是一个目录</span><br><span class="line">[root@localhost ~]<span class="comment"># rm -r python1</span></span><br><span class="line">rm：是否删除目录 <span class="string">&quot;python1&quot;</span>？y</span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">python</span><br><span class="line"></span><br><span class="line"><span class="comment"># -f : 免去删除提示</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">python</span><br><span class="line">[root@localhost ~]<span class="comment"># rm -r -f python/</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br></pre></td></tr></table></figure>

<ul>
<li>打印命令(echo)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;打印的内容&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>打印出当前系统中所有的变量</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># printenv </span></span><br></pre></td></tr></table></figure>

<ul>
<li>重定向符号(&gt;和&gt;&gt;)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &gt; 和 &gt;&gt; </span></span><br><span class="line"><span class="comment"># &gt; : 覆盖重定向(先删除文件内容，后写入内容到文件)</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo &quot;Hello China&quot; &gt; test.txt</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &gt;&gt; : 追加重定向（原来的内容不动，后来的内容从底部插入）</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo &quot;Hello World&quot; &gt;&gt; test.txt</span></span><br></pre></td></tr></table></figure>

<ul>
<li>查看文件内容</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># cat test.txt </span></span><br><span class="line">Hello World</span><br></pre></td></tr></table></figure>

<ul>
<li>隐藏文件(.文件名)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文件名以.开头的就是隐藏文件</span></span><br><span class="line"></span><br><span class="line">-a : 查看隐藏文件</span><br><span class="line">[root@localhost ~]<span class="comment"># ls -a</span></span><br><span class="line">....bash_logout  .bash_profile</span><br><span class="line"></span><br><span class="line">-l : 查看文件详细信息</span><br><span class="line">[root@localhost ~]<span class="comment"># ls -l</span></span><br><span class="line">总用量 4</span><br><span class="line">-rw-r--r--. 1 root root 24 6月  11 16:26 test.txt</span><br><span class="line"> 文件权限       所属用户 所属组  文件的大小  创建时间  文件名称</span><br><span class="line"> </span><br><span class="line">[root@localhost ~]<span class="comment"># # ls -l 等价于 ll</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ll</span></span><br><span class="line">总用量 4</span><br><span class="line">-rw-r--r--. 1 root root 24 6月  11 16:26 test.txt</span><br><span class="line">[root@localhost ~]<span class="comment"># ls -l</span></span><br><span class="line">总用量 4</span><br><span class="line">-rw-r--r--. 1 root root 24 6月  11 16:26 test.txt</span><br><span class="line"></span><br><span class="line">-h : 以方便查看方式查看文件大小（必须配合-l参数）</span><br><span class="line"></span><br><span class="line">reboot : 重启系统</span><br><span class="line">shutdown -h now : 立即关机</span><br><span class="line">shutdown -h 2 : </span><br></pre></td></tr></table></figure>

<h2 id="GPT分区"><a href="#GPT分区" class="headerlink" title="GPT分区"></a>GPT分区</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">分区版本:</span><br><span class="line">    beat	: 公测版本</span><br><span class="line">    stable	: 稳定版本</span><br><span class="line">    alpahe	: 内测版本</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">1、相较于MBR分区 </span><br><span class="line">	GPT分区可以实现2TB以上的硬盘分区</span><br><span class="line"></span><br><span class="line">2、分区命令(类似于MBR分区)</span><br><span class="line">	安装分区工具:</span><br><span class="line">		yum install gdisk -y</span><br><span class="line">	分区命令:</span><br><span class="line">		gdisk /dev/sdd</span><br><span class="line">	常用命令:</span><br><span class="line">		? : 查看帮助</span><br><span class="line">		n : 新建一个分区</span><br><span class="line">		p : 查看分区列表</span><br><span class="line">		w : 保存并退出</span><br><span class="line">		d : 删除一个分区	</span><br><span class="line">		</span><br><span class="line">eg:</span><br><span class="line">	[root@python ~]# gdisk /dev/sdd</span><br></pre></td></tr></table></figure>

<h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/bin : 系统命令</span><br><span class="line">/boot: linux系统启动文件</span><br><span class="line">/etc : 系统配置目录</span><br><span class="line">/home: 普通用户的家目录</span><br><span class="line">/media: 多媒体目录</span><br><span class="line">/mnt : 挂载一些硬件设备的目录</span><br><span class="line">/opt : 下载文件常用目录</span><br><span class="line">/proc: 关联系统虚拟设备</span><br><span class="line">/srv : 该⽬录存放⼀些服务启动之后需要提取的数据。</span><br><span class="line">/root: 管理员家目录</span><br><span class="line">/run : 存放系统运行临时数据目录</span><br><span class="line">/sbin: 存放系统管理员命令</span><br><span class="line">/tmp : Linux系统的垃圾桶</span><br><span class="line">/usr : 存放系统安装软件的目录</span><br><span class="line">/var : 存放系统日志</span><br></pre></td></tr></table></figure>

<h2 id="vi-vim编辑器"><a href="#vi-vim编辑器" class="headerlink" title="vi/vim编辑器"></a>vi/vim编辑器</h2><h4 id="vi编辑器常用功能"><a href="#vi编辑器常用功能" class="headerlink" title="vi编辑器常用功能"></a>vi编辑器常用功能</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">vim是vi的升级版(用法命令大同)</span><br><span class="line"></span><br><span class="line">写入</span><br><span class="line">	a : 进入插入模式，并在光标之后进行插入</span><br><span class="line">	i : 进入插入模式，并在光标之前进行插入</span><br><span class="line">	o : 进入插入模式，并在光标所在行开启下一行</span><br><span class="line">	</span><br><span class="line">查找</span><br><span class="line">	在命令行模式下按下键盘上的/，然后输入要查询的内容，搜索到内容后光标自动定位并设置颜色</span><br><span class="line"></span><br><span class="line">删除</span><br><span class="line">	1、进入插入模式，像修改文本一样去删除文件。</span><br><span class="line">	2、连续按d键两次，删除一行内容</span><br><span class="line">	3、先按一个数字n，然后按d键两次，向下删除n行</span><br><span class="line"></span><br><span class="line">复制</span><br><span class="line">	1、连续按y键两次，复制当前光标所在行，p键粘贴</span><br><span class="line">	2、先按一个数字n，然后按y键两次从光标所在行向下复制n行，p键粘贴</span><br><span class="line"></span><br><span class="line">保存</span><br><span class="line">	首先进入末行模式</span><br><span class="line">	w ： 保存</span><br><span class="line">	q : 退出（！强制退出，退出之后未保存内容丢失）</span><br><span class="line"></span><br><span class="line">补充：</span><br><span class="line">	x : 删除光标包含的内容</span><br><span class="line">	u : 返回上一步，只在同一次编辑中有效</span><br><span class="line">	U ：还原上一步</span><br><span class="line">	$ : 光标运行到行尾</span><br><span class="line">	0 : 光标运行到行首</span><br><span class="line">	G ：光标移动到行尾</span><br><span class="line">	gg: 光标移动到行首</span><br><span class="line">	H ：运行第一行的行首</span><br><span class="line">	M ：中间行的行首</span><br><span class="line">	L ：最后一行的行首</span><br><span class="line"></span><br><span class="line">可视块：</span><br><span class="line">	ctrl + v: 选择你要修改的内容，</span><br><span class="line">		删除：x</span><br><span class="line">		编辑：<span class="built_in">shift</span> + i（退出可视块编辑模式按ESC键，等一会才会同步修改内容）</span><br></pre></td></tr></table></figure>

<h4 id="vim编辑器高级"><a href="#vim编辑器高级" class="headerlink" title="vim编辑器高级"></a>vim编辑器高级</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># 定位到某一行</span><br><span class="line">:n  跳转到n行</span><br><span class="line"></span><br><span class="line"># 内容替换(末行模式)</span><br><span class="line">:开始位置,结束的位置  s/被替换内容/替换的内容</span><br><span class="line"></span><br><span class="line">1、指定位置</span><br><span class="line">	:2,10 s/Hello/nihao 从第2行开始，到第十行结束</span><br><span class="line">	:2,$  s/Hello/nihao 从第二行开始，到最后</span><br><span class="line">	:%    s/Hello/nihao 全文替换</span><br><span class="line"></span><br><span class="line">2、写入文件</span><br><span class="line">	:w 写入文件</span><br><span class="line">	:w /root 写入新的文件</span><br><span class="line">	:1,3 w /root/bcd.txt 指定行写入到新的文件中</span><br><span class="line">	:1,3 w！ /root/bcd.txt 指定行强制写入到新的文件中</span><br><span class="line"></span><br><span class="line">3、同时编辑多个文件</span><br><span class="line">	vim -o 文件名 文件名 : 水平分割</span><br><span class="line">	vim -O 文件名 文件名 : 垂直分割</span><br><span class="line"></span><br><span class="line">4、同时对比编辑两个不同文件</span><br><span class="line">	ctrl + ww : 切换屏幕</span><br><span class="line">	</span><br><span class="line">ps:</span><br><span class="line">	有几个文件则保存几次</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/06/20/Go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80-Maps/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="左大大">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="左大大的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/20/Go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80-Maps/" class="post-title-link" itemprop="url">Go语言基础-Maps</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-06-20 18:20:25" itemprop="dateCreated datePublished" datetime="2020-06-20T18:20:25+08:00">2020-06-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Go%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index"><span itemprop="name">Go语言</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Go语言基础-Maps"><a href="#Go语言基础-Maps" class="headerlink" title="Go语言基础-Maps"></a>Go语言基础-Maps</h1><h1 id="Maps"><a href="#Maps" class="headerlink" title="Maps"></a>Maps</h1><h2 id="什么是-map-？"><a href="#什么是-map-？" class="headerlink" title="什么是 map ？"></a>什么是 map ？</h2><p>map 是在 Go 中将值（value）与键（key）关联的内置类型。通过相应的键可以获取到值。</p>
<h2 id="如何创建-map-？"><a href="#如何创建-map-？" class="headerlink" title="如何创建 map ？"></a>如何创建 map ？</h2><p>通过向 <code>make</code> 函数传入键和值的类型，可以创建 map。<code>make(map[type of key]type of value)</code> 是创建 map 的语法。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">personSalary := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br></pre></td></tr></table></figure>

<p>上面的代码创建了一个名为 <code>personSalary</code> 的 map，其中键是 string 类型，而值是 int 类型。</p>
<p>map 的零值是 <code>nil</code>。如果你想添加元素到 nil map 中，会触发运行时 panic。因此 map 必须使用 <code>make</code> 函数初始化。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    <span class="keyword">var</span> personSalary <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span></span><br><span class="line">    <span class="keyword">if</span> personSalary == <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;map is nil. Going to make one.&quot;</span>)</span><br><span class="line">        personSalary = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的程序中，personSalary 是 nil，因此需要使用 make 方法初始化，程序将输出 <code>map is nil. Going to make one.</code>。</p>
<h2 id="给-map-添加元素"><a href="#给-map-添加元素" class="headerlink" title="给 map 添加元素"></a>给 map 添加元素</h2><p>给 map 添加新元素的语法和数组相同。下面的程序给 <code>personSalary</code> map 添加了几个新元素。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    personSalary := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br><span class="line">    personSalary[<span class="string">&quot;steve&quot;</span>] = <span class="number">12000</span></span><br><span class="line">    personSalary[<span class="string">&quot;jamie&quot;</span>] = <span class="number">15000</span></span><br><span class="line">    personSalary[<span class="string">&quot;mike&quot;</span>] = <span class="number">9000</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;personSalary map contents:&quot;</span>, personSalary)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的程序输出：<code>personSalary map contents: map[steve:12000 jamie:15000 mike:9000]</code></p>
<p>你也可以在声明的时候初始化 map。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    personSalary := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span> &#123;</span><br><span class="line">        <span class="string">&quot;steve&quot;</span>: <span class="number">12000</span>,</span><br><span class="line">        <span class="string">&quot;jamie&quot;</span>: <span class="number">15000</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    personSalary[<span class="string">&quot;mike&quot;</span>] = <span class="number">9000</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;personSalary map contents:&quot;</span>, personSalary)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的程序声明了 personSalary，并在声明的同时添加两个元素。之后又添加了键 <code>mike</code>。程序输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">personSalary map contents: map[steve:12000 jamie:15000 mike:9000]</span><br></pre></td></tr></table></figure>

<p>键不一定只能是 string 类型。所有可比较的类型，如 boolean，interger，float，complex，string 等，都可以作为键。关于可比较的类型，如果你想了解更多，请访问 <a target="_blank" rel="noopener" href="http://golang.org/ref/spec#Comparison_operators%E3%80%82">http://golang.org/ref/spec#Comparison_operators。</a></p>
<h2 id="获取-map-中的元素"><a href="#获取-map-中的元素" class="headerlink" title="获取 map 中的元素"></a>获取 map 中的元素</h2><p>目前我们已经给 map 添加了几个元素，现在学习下如何获取它们。获取 map 元素的语法是 <code>map[key]</code> 。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    personSalary := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>&#123;</span><br><span class="line">        <span class="string">&quot;steve&quot;</span>: <span class="number">12000</span>,</span><br><span class="line">        <span class="string">&quot;jamie&quot;</span>: <span class="number">15000</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    personSalary[<span class="string">&quot;mike&quot;</span>] = <span class="number">9000</span></span><br><span class="line">    employee := <span class="string">&quot;jamie&quot;</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;Salary of&quot;</span>, employee, <span class="string">&quot;is&quot;</span>, personSalary[employee])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的程序很简单。获取并打印员工 <code>jamie</code> 的薪资。程序输出 <code>Salary of jamie is 15000</code>。</p>
<p>如果获取一个不存在的元素，会发生什么呢？map 会返回该元素类型的零值。在 <code>personSalary</code> 这个 map 里，如果我们获取一个不存在的元素，会返回 <code>int</code> 类型的零值 <code>0</code>。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    personSalary := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>&#123;</span><br><span class="line">        <span class="string">&quot;steve&quot;</span>: <span class="number">12000</span>,</span><br><span class="line">        <span class="string">&quot;jamie&quot;</span>: <span class="number">15000</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    personSalary[<span class="string">&quot;mike&quot;</span>] = <span class="number">9000</span></span><br><span class="line">    employee := <span class="string">&quot;jamie&quot;</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;Salary of&quot;</span>, employee, <span class="string">&quot;is&quot;</span>, personSalary[employee])</span><br><span class="line">    fmt.Println(<span class="string">&quot;Salary of joe is&quot;</span>, personSalary[<span class="string">&quot;joe&quot;</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面程序输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">Salary of jamie is 15000</span><br><span class="line">Salary of joe is 0</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<p>上面程序返回 <code>joe</code> 的薪资是 0。<code>personSalary</code> 中不包含 <code>joe</code> 的情况下我们不会获取到任何运行时错误。</p>
<p>如果我们想知道 map 中到底是不是存在这个 <code>key</code>，该怎么做：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">value, ok := <span class="keyword">map</span>[key]</span><br></pre></td></tr></table></figure>

<p>上面就是获取 map 中某个 key 是否存在的语法。如果 <code>ok</code> 是 true，表示 key 存在，key 对应的值就是 <code>value</code> ，反之表示 key 不存在。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    personSalary := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>&#123;</span><br><span class="line">        <span class="string">&quot;steve&quot;</span>: <span class="number">12000</span>,</span><br><span class="line">        <span class="string">&quot;jamie&quot;</span>: <span class="number">15000</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    personSalary[<span class="string">&quot;mike&quot;</span>] = <span class="number">9000</span></span><br><span class="line">    newEmp := <span class="string">&quot;joe&quot;</span></span><br><span class="line">    value, ok := personSalary[newEmp]</span><br><span class="line">    <span class="keyword">if</span> ok == <span class="literal">true</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;Salary of&quot;</span>, newEmp, <span class="string">&quot;is&quot;</span>, value)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        fmt.Println(newEmp,<span class="string">&quot;not found&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的程序中，第 15 行，<code>joe</code> 不存在，所以 <code>ok</code> 是 false。程序将输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">joe not found</span><br></pre></td></tr></table></figure>

<p>遍历 map 中所有的元素需要用 <code>for range</code> 循环。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    personSalary := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>&#123;</span><br><span class="line">        <span class="string">&quot;steve&quot;</span>: <span class="number">12000</span>,</span><br><span class="line">        <span class="string">&quot;jamie&quot;</span>: <span class="number">15000</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    personSalary[<span class="string">&quot;mike&quot;</span>] = <span class="number">9000</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;All items of a map&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> key, value := <span class="keyword">range</span> personSalary &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;personSalary[%s] = %d\n&quot;</span>, key, value)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面程序输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">All items of a map</span><br><span class="line">personSalary[mike] = 9000</span><br><span class="line">personSalary[steve] = 12000</span><br><span class="line">personSalary[jamie] = 15000</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<p><strong>有一点很重要，当使用 for range 遍历 map 时，不保证每次执行程序获取的元素顺序相同。</strong></p>
<h2 id="删除-map-中的元素"><a href="#删除-map-中的元素" class="headerlink" title="删除 map 中的元素"></a>删除 map 中的元素</h2><p>删除 <code>map</code> 中 <code>key</code> 的语法是 [<em>delete(map, key)</em>]。这个函数没有返回值。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    personSalary := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>&#123;</span><br><span class="line">        <span class="string">&quot;steve&quot;</span>: <span class="number">12000</span>,</span><br><span class="line">        <span class="string">&quot;jamie&quot;</span>: <span class="number">15000</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    personSalary[<span class="string">&quot;mike&quot;</span>] = <span class="number">9000</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;map before deletion&quot;</span>, personSalary)</span><br><span class="line">    <span class="built_in">delete</span>(personSalary, <span class="string">&quot;steve&quot;</span>)</span><br><span class="line">    fmt.Println(<span class="string">&quot;map after deletion&quot;</span>, personSalary)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上述程序删除了键 “steve”，输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">map before deletion map[steve:12000 jamie:15000 mike:9000]</span><br><span class="line">map after deletion map[mike:9000 jamie:15000]</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="获取-map-的长度"><a href="#获取-map-的长度" class="headerlink" title="获取 map 的长度"></a>获取 map 的长度</h2><p>获取 map 的长度使用 [len]函数。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    personSalary := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>&#123;</span><br><span class="line">        <span class="string">&quot;steve&quot;</span>: <span class="number">12000</span>,</span><br><span class="line">        <span class="string">&quot;jamie&quot;</span>: <span class="number">15000</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    personSalary[<span class="string">&quot;mike&quot;</span>] = <span class="number">9000</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;length is&quot;</span>, <span class="built_in">len</span>(personSalary))</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上述程序中的 <em>len(personSalary)</em> 函数获取了 map 的长度。程序输出 <code>length is 3</code>。</p>
<h2 id="Map-是引用类型"><a href="#Map-是引用类型" class="headerlink" title="Map 是引用类型"></a>Map 是引用类型</h2><p>和 [slices]类似，map 也是引用类型。当 map 被赋值为一个新变量的时候，它们指向同一个内部数据结构。因此，改变其中一个变量，就会影响到另一变量。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    personSalary := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>&#123;</span><br><span class="line">        <span class="string">&quot;steve&quot;</span>: <span class="number">12000</span>,</span><br><span class="line">        <span class="string">&quot;jamie&quot;</span>: <span class="number">15000</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    personSalary[<span class="string">&quot;mike&quot;</span>] = <span class="number">9000</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;Original person salary&quot;</span>, personSalary)</span><br><span class="line">    newPersonSalary := personSalary</span><br><span class="line">    newPersonSalary[<span class="string">&quot;mike&quot;</span>] = <span class="number">18000</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;Person salary changed&quot;</span>, personSalary)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面程序中的第 14 行，<code>personSalary</code> 被赋值给 <code>newPersonSalary</code>。下一行 ，<code>newPersonSalary</code> 中 <code>mike</code> 的薪资变成了 <code>18000</code> 。<code>personSalary</code> 中 <code>Mike</code> 的薪资也会变成 <code>18000</code>。程序输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">Original person salary map[steve:12000 jamie:15000 mike:9000]</span><br><span class="line">Person salary changed map[steve:12000 jamie:15000 mike:18000]</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<p>当 map 作为函数参数传递时也会发生同样的情况。函数中对 map 的任何修改，对于外部的调用都是可见的。</p>
<h2 id="Map-的相等性"><a href="#Map-的相等性" class="headerlink" title="Map 的相等性"></a>Map 的相等性</h2><p>map 之间不能使用 <code>==</code> 操作符判断，<code>==</code> 只能用来检查 map 是否为 <code>nil</code>。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    map1 := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>&#123;</span><br><span class="line">        <span class="string">&quot;one&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;two&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    map2 := map1</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> map1 == map2 &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面程序抛出编译错误 **invalid operation: map1 == map2 (map can only be compared to nil)**。</p>
<p>判断两个 map 是否相等的方法是遍历比较两个 map 中的每个元素。我建议你写一段这样的程序实现这个功能</p>
<hr>
<hr>
<h2 id="maps-小练习"><a href="#maps-小练习" class="headerlink" title="maps(小练习)"></a>maps(小练习)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line">// maps：key-value存储的数据结构</span><br><span class="line">func main() &#123;</span><br><span class="line">	// 定义，取值，赋值，修改值</span><br><span class="line">	//var m <span class="built_in">map</span>[string]<span class="built_in">int</span> // 定义</span><br><span class="line">	//var m <span class="built_in">map</span>[string]<span class="built_in">int</span>=make(<span class="built_in">map</span>[string]<span class="built_in">int</span>)  // 定义并初始化</span><br><span class="line">	//fmt.Println(m==nil)  //<span class="built_in">map</span>[] --&gt;nil</span><br><span class="line">	//m[<span class="string">&quot;name&quot;</span>]=<span class="number">1</span>  // <span class="built_in">map</span>的赋值</span><br><span class="line">	//fmt.Println(m[<span class="string">&quot;name&quot;</span>]) // <span class="built_in">map</span>的取值</span><br><span class="line">	//m[<span class="string">&quot;name&quot;</span>]=<span class="number">999</span></span><br><span class="line">	//fmt.Println(m)</span><br><span class="line"></span><br><span class="line">	// <span class="number">2</span> 获取不存在的元素</span><br><span class="line">	//var m <span class="built_in">map</span>[string]string= <span class="built_in">map</span>[string]string&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;lqz&quot;</span>,<span class="string">&quot;age&quot;</span>:<span class="string">&quot;18&quot;</span>&#125;</span><br><span class="line">	//fmt.Println(m[<span class="string">&quot;name&quot;</span>])</span><br><span class="line">	//fmt.Println(m[<span class="string">&quot;gender&quot;</span>])  // 取不存在的值，取出value值的<span class="number">0</span>值</span><br><span class="line"></span><br><span class="line">	//var m <span class="built_in">map</span>[<span class="built_in">int</span>]<span class="built_in">int</span>= <span class="built_in">map</span>[<span class="built_in">int</span>]<span class="built_in">int</span>&#123;<span class="number">1</span>:<span class="number">11</span>,<span class="number">2</span>:<span class="number">22</span>,<span class="number">3</span>:<span class="number">0</span>&#125;</span><br><span class="line">	//fmt.Println(m[<span class="number">1</span>])</span><br><span class="line">	//fmt.Println(m[<span class="number">3</span>])  // 取不存在的值，取出value值的<span class="number">0</span>值</span><br><span class="line"></span><br><span class="line">	//var m <span class="built_in">map</span>[<span class="built_in">int</span>][]<span class="built_in">int</span>=<span class="built_in">map</span>[<span class="built_in">int</span>][]<span class="built_in">int</span>&#123;<span class="number">1</span>:&#123;<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,&#125;,<span class="number">2</span>:&#123;<span class="number">0</span>,&#125;&#125;</span><br><span class="line">	//fmt.Println(m[<span class="number">1</span>])</span><br><span class="line">	//fmt.Println(m[<span class="number">4</span>]==nil)   //[]</span><br><span class="line"></span><br><span class="line">	// <span class="number">4</span> 判断一个key是否在<span class="built_in">map</span>中</span><br><span class="line">	//var m <span class="built_in">map</span>[<span class="built_in">int</span>][]<span class="built_in">int</span>=<span class="built_in">map</span>[<span class="built_in">int</span>][]<span class="built_in">int</span>&#123;<span class="number">1</span>:&#123;<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,&#125;,<span class="number">2</span>:&#123;<span class="number">0</span>,&#125;&#125;</span><br><span class="line">	//a,ok:=m[<span class="number">3</span>]  // ok返回布尔值，如果是true，表示key存在，如果为false，表示key不存在</span><br><span class="line">	//fmt.Println(a)</span><br><span class="line">	//fmt.Println(ok)</span><br><span class="line"></span><br><span class="line">	//<span class="number">5</span>  删除<span class="built_in">map</span>中元素</span><br><span class="line">	//var m <span class="built_in">map</span>[<span class="built_in">int</span>]<span class="built_in">int</span>= <span class="built_in">map</span>[<span class="built_in">int</span>]<span class="built_in">int</span>&#123;<span class="number">1</span>:<span class="number">11</span>,<span class="number">2</span>:<span class="number">22</span>,<span class="number">3</span>:<span class="number">0</span>&#125;</span><br><span class="line">	// 添加和修改一样，有则修改，没则添加</span><br><span class="line">	// 内置函数</span><br><span class="line">	//fmt.Println(m)</span><br><span class="line">	//delete(m,<span class="number">3</span>)</span><br><span class="line">	//fmt.Println(m)</span><br><span class="line"></span><br><span class="line">	// <span class="number">6</span> 获取长度</span><br><span class="line">	//var m <span class="built_in">map</span>[<span class="built_in">int</span>]<span class="built_in">int</span>= <span class="built_in">map</span>[<span class="built_in">int</span>]<span class="built_in">int</span>&#123;<span class="number">1</span>:<span class="number">11</span>,<span class="number">2</span>:<span class="number">22</span>,<span class="number">3</span>:<span class="number">0</span>&#125;</span><br><span class="line">	//fmt.Println(<span class="built_in">len</span>(m))</span><br><span class="line"></span><br><span class="line">	// <span class="number">7</span> <span class="built_in">map</span>是引用类型</span><br><span class="line">	//var m <span class="built_in">map</span>[<span class="built_in">int</span>]<span class="built_in">int</span>= <span class="built_in">map</span>[<span class="built_in">int</span>]<span class="built_in">int</span>&#123;<span class="number">1</span>:<span class="number">11</span>,<span class="number">2</span>:<span class="number">22</span>,<span class="number">3</span>:<span class="number">0</span>&#125;</span><br><span class="line">	//fmt.Println(m)</span><br><span class="line">	//test4(m)</span><br><span class="line">	//fmt.Println(m)</span><br><span class="line"></span><br><span class="line">	// <span class="number">7</span> Map 的相等性,不能直接等号比较相等</span><br><span class="line">	//map1 := <span class="built_in">map</span>[string]<span class="built_in">int</span>&#123;</span><br><span class="line">	//	<span class="string">&quot;one&quot;</span>: <span class="number">1</span>,</span><br><span class="line">	//	<span class="string">&quot;two&quot;</span>: <span class="number">2</span>,</span><br><span class="line">	//&#125;</span><br><span class="line">	//map2 := map1</span><br><span class="line">	//<span class="keyword">if</span> map1 == map2 &#123;</span><br><span class="line">	//&#125;</span><br><span class="line"></span><br><span class="line">	// <span class="number">8</span> 数组的长度是类型的一部分</span><br><span class="line">	//var a [<span class="number">3</span>]<span class="built_in">int</span>=[<span class="number">3</span>]<span class="built_in">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line">	//var b [<span class="number">3</span>]<span class="built_in">int</span>=[<span class="number">3</span>]<span class="built_in">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>&#125;</span><br><span class="line">	//var c [<span class="number">4</span>]<span class="built_in">int</span>=[<span class="number">4</span>]<span class="built_in">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>&#125;</span><br><span class="line">	//fmt.Println(a==b)</span><br><span class="line">	//fmt.Println(a==c)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func test4(m <span class="built_in">map</span>[<span class="built_in">int</span>]<span class="built_in">int</span>)  &#123;</span><br><span class="line">	m[<span class="number">1</span>]=<span class="number">99</span></span><br><span class="line">	m[<span class="number">5</span>]=<span class="number">888</span></span><br><span class="line">	fmt.Println(m)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/06/15/Go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80-%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0%E5%87%BD%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="左大大">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="左大大的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/15/Go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80-%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0%E5%87%BD%E6%95%B0/" class="post-title-link" itemprop="url">Go语言基础-可变参数函数</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-06-15 18:20:25" itemprop="dateCreated datePublished" datetime="2020-06-15T18:20:25+08:00">2020-06-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Go%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index"><span itemprop="name">Go语言</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Go语言基础-可变参数函数"><a href="#Go语言基础-可变参数函数" class="headerlink" title="Go语言基础-可变参数函数"></a>Go语言基础-可变参数函数</h1><h1 id="可变参数函数"><a href="#可变参数函数" class="headerlink" title="可变参数函数"></a>可变参数函数</h1><h2 id="什么是可变参数函数"><a href="#什么是可变参数函数" class="headerlink" title="什么是可变参数函数"></a>什么是可变参数函数</h2><p>可变参数函数是一种参数个数可变的函数。</p>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p>如果函数最后一个参数被记作 <code>...T</code> ，这时函数可以接受任意个 <code>T</code> 类型参数作为最后一个参数。</p>
<p>请注意只有函数的最后一个参数才允许是可变的。</p>
<h2 id="通过一些例子理解可变参数函数如何工作"><a href="#通过一些例子理解可变参数函数如何工作" class="headerlink" title="通过一些例子理解可变参数函数如何工作"></a>通过一些例子理解可变参数函数如何工作</h2><p>你是否曾经想过 append 函数是如何将任意个参数值加入到切片中的。这样 append 函数可以接受不同数量的参数。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">append</span><span class="params">(slice []Type, elems ...Type)</span> []<span class="title">Type</span></span></span><br></pre></td></tr></table></figure>

<p>上面是 append 函数的定义。在定义中 elems 是可变参数。这样 append 函数可以接受可变化的参数。</p>
<p>让我们创建一个我们自己的可变参数函数。我们将写一段简单的程序，在输入的整数列表里查找某个整数是否存在。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">find</span><span class="params">(num <span class="keyword">int</span>, nums ...<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;type of nums is %T\n&quot;</span>, nums)</span><br><span class="line">    found := <span class="literal">false</span></span><br><span class="line">    <span class="keyword">for</span> i, v := <span class="keyword">range</span> nums &#123;</span><br><span class="line">        <span class="keyword">if</span> v == num &#123;</span><br><span class="line">            fmt.Println(num, <span class="string">&quot;found at index&quot;</span>, i, <span class="string">&quot;in&quot;</span>, nums)</span><br><span class="line">            found = <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> !found &#123;</span><br><span class="line">        fmt.Println(num, <span class="string">&quot;not found in &quot;</span>, nums)</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    find(<span class="number">89</span>, <span class="number">89</span>, <span class="number">90</span>, <span class="number">95</span>)</span><br><span class="line">    find(<span class="number">45</span>, <span class="number">56</span>, <span class="number">67</span>, <span class="number">45</span>, <span class="number">90</span>, <span class="number">109</span>)</span><br><span class="line">    find(<span class="number">78</span>, <span class="number">38</span>, <span class="number">56</span>, <span class="number">98</span>)</span><br><span class="line">    find(<span class="number">87</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在上面程序中 <code>func find(num int, nums ...int)</code> 中的 <code>nums</code> 可接受任意数量的参数。在 find 函数中，参数 <code>nums</code> 相当于一个整型切片。</p>
<p><strong>可变参数函数的工作原理是把可变参数转换为一个新的切片。以上面程序中的第 22 行为例，find 函数中的可变参数是 89，90，95 。 find 函数接受一个 int 类型的可变参数。因此这三个参数被编译器转换为一个 int 类型切片 int []int{89, 90, 95} 然后被传入 find函数。</strong></p>
<p>在第 10 行， <code>for</code> 循环遍历 <code>nums</code> 切片,如果 <code>num</code> 在切片中，则打印 <code>num</code> 的位置。如果 <code>num</code> 不在切片中,则打印提示未找到该数字。</p>
<p>上面代码的输出值如下,</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">type of nums is []int</span><br><span class="line">89 found at index 0 in [89 90 95]</span><br><span class="line"></span><br><span class="line">type of nums is []int</span><br><span class="line">45 found at index 2 in [56 67 45 90 109]</span><br><span class="line"></span><br><span class="line">type of nums is []int</span><br><span class="line">78 not found in  [38 56 98]</span><br><span class="line"></span><br><span class="line">type of nums is []int</span><br><span class="line">87 not found in  []</span><br></pre></td></tr></table></figure>

<p>在上面程序的第 25 行，find 函数仅有一个参数。我们没有给可变参数 <code>nums ...int</code> 传入任何参数。这也是合法的，在这种情况下 <code>nums</code> 是一个长度和容量为 0 的 <code>nil</code> 切片。</p>
<h2 id="给可变参数函数传入切片"><a href="#给可变参数函数传入切片" class="headerlink" title="给可变参数函数传入切片"></a>给可变参数函数传入切片</h2><p>下面例子中，我们给可变参数函数传入一个切片，看看会发生什么。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">find</span><span class="params">(num <span class="keyword">int</span>, nums ...<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;type of nums is %T\n&quot;</span>, nums)</span><br><span class="line">    found := <span class="literal">false</span></span><br><span class="line">    <span class="keyword">for</span> i, v := <span class="keyword">range</span> nums &#123;</span><br><span class="line">        <span class="keyword">if</span> v == num &#123;</span><br><span class="line">            fmt.Println(num, <span class="string">&quot;found at index&quot;</span>, i, <span class="string">&quot;in&quot;</span>, nums)</span><br><span class="line">            found = <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> !found &#123;</span><br><span class="line">        fmt.Println(num, <span class="string">&quot;not found in &quot;</span>, nums)</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    nums := []<span class="keyword">int</span>&#123;<span class="number">89</span>, <span class="number">90</span>, <span class="number">95</span>&#125;</span><br><span class="line">    find(<span class="number">89</span>, nums)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在第 23 行中，我们将一个切片传给一个可变参数函数。</p>
<p>这种情况下无法通过编译，编译器报出错误 <code>main.go:23: cannot use nums (type []int) as type int in argument to find</code> 。</p>
<p>为什么无法工作呢？原因很直接，<code>find</code> 函数的说明如下，</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">find</span><span class="params">(num <span class="keyword">int</span>, nums ...<span class="keyword">int</span>)</span></span></span><br></pre></td></tr></table></figure>

<p>由可变参数函数的定义可知，<code>nums ...int</code> 意味它可以接受 <code>int</code> 类型的可变参数。</p>
<p>在上面程序的第 23 行，<code>nums</code> 作为可变参数传入 <code>find</code> 函数。前面我们知道，这些可变参数参数会被转换为 <code>int</code> 类型切片然后在传入 <code>find</code> 函数中。但是在这里 <code>nums</code> 已经是一个 int 类型切片，编译器试图在 <code>nums</code> 基础上再创建一个切片，像下面这样</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find(<span class="number">89</span>, []<span class="keyword">int</span>&#123;nums&#125;)</span><br></pre></td></tr></table></figure>

<p>这里之所以会失败是因为 <code>nums</code> 是一个 <code>[]int</code>类型 而不是 <code>int</code>类型。</p>
<p>那么有没有办法给可变参数函数传入切片参数呢？答案是肯定的。</p>
<p><strong>有一个可以直接将切片传入可变参数函数的语法糖，你可以在在切片后加上 … 后缀。如果这样做，切片将直接传入函数，不再创建新的切片</strong></p>
<p>在上面的程序中，如果你将第 23 行的 <code>find(89, nums)</code> 替换为 <code>find(89, nums...)</code> ，程序将成功编译并有如下输出</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> of nums is []<span class="keyword">int</span></span><br><span class="line"><span class="number">89</span> found at index <span class="number">0</span> in [<span class="number">89</span> <span class="number">90</span> <span class="number">95</span>]</span><br></pre></td></tr></table></figure>

<p>下面是完整的程序供您参考。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">find</span><span class="params">(num <span class="keyword">int</span>, nums ...<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;type of nums is %T\n&quot;</span>, nums)</span><br><span class="line">    found := <span class="literal">false</span></span><br><span class="line">    <span class="keyword">for</span> i, v := <span class="keyword">range</span> nums &#123;</span><br><span class="line">        <span class="keyword">if</span> v == num &#123;</span><br><span class="line">            fmt.Println(num, <span class="string">&quot;found at index&quot;</span>, i, <span class="string">&quot;in&quot;</span>, nums)</span><br><span class="line">            found = <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> !found &#123;</span><br><span class="line">        fmt.Println(num, <span class="string">&quot;not found in &quot;</span>, nums)</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    nums := []<span class="keyword">int</span>&#123;<span class="number">89</span>, <span class="number">90</span>, <span class="number">95</span>&#125;</span><br><span class="line">    find(<span class="number">89</span>, nums...)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="不直观的错误"><a href="#不直观的错误" class="headerlink" title="不直观的错误"></a>不直观的错误</h2><p>当你修改可变参数函数中的切片时，请确保你知道你正在做什么。</p>
<p>下面让我们来看一个简单的例子。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">change</span><span class="params">(s ...<span class="keyword">string</span>)</span></span> &#123;  </span><br><span class="line">    s[<span class="number">0</span>] = <span class="string">&quot;Go&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    welcome := []<span class="keyword">string</span>&#123;<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;world&quot;</span>&#125;</span><br><span class="line">    change(welcome...)</span><br><span class="line">    fmt.Println(welcome)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>你认为这段代码将输出什么呢？如果你认为它输出 <code>[Go world]</code> 。恭喜你！你已经理解了可变参数函数和切片。如果你猜错了，那也不要紧，让我来解释下为什么会有这样的输出。</p>
<p>在第 13 行，我们使用了语法糖 <code>...</code> 并且将切片作为可变参数传入 <code>change</code> 函数。</p>
<p>正如前面我们所讨论的，如果使用了 <code>...</code> ，<code>welcome</code> 切片本身会作为参数直接传入，不需要再创建一个新的切片。这样参数 <code>welcome</code> 将作为参数传入 <code>change</code> 函数</p>
<p>在 <code>change</code> 函数中，切片的第一个元素被替换成 <code>Go</code>，这样程序产生了下面的输出值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Go world]</span><br></pre></td></tr></table></figure>

<p>这里还有一个例子来理解可变参数函数。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">change</span><span class="params">(s ...<span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">    s[<span class="number">0</span>] = <span class="string">&quot;Go&quot;</span></span><br><span class="line">    s = <span class="built_in">append</span>(s, <span class="string">&quot;playground&quot;</span>)</span><br><span class="line">    fmt.Println(s)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    welcome := []<span class="keyword">string</span>&#123;<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;world&quot;</span>&#125;</span><br><span class="line">    change(welcome...)</span><br><span class="line">    fmt.Println(welcome)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<hr>
<h2 id="可变长参数-小练习"><a href="#可变长参数-小练习" class="headerlink" title="可变长参数(小练习)"></a>可变长参数(小练习)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line">// 可变长参数</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	//test2(<span class="string">&quot;11111&quot;</span>,<span class="string">&quot;2&quot;</span>)</span><br><span class="line">	var a []string=[]string&#123;<span class="string">&quot;lqz&quot;</span>,<span class="string">&quot;egon&quot;</span>&#125;</span><br><span class="line">	test2(a...)  // 把切片传入</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func test2(a ...string)  &#123;  // a是切片</span><br><span class="line">	fmt.Println(a)</span><br><span class="line">	fmt.Println(a[<span class="number">1</span>])</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%T&quot;</span>,a)</span><br><span class="line">	a=append(a,<span class="string">&quot;lqz&quot;</span>)</span><br><span class="line">	fmt.Println(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/06/10/Go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80-%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="左大大">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="左大大的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/10/Go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80-%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/" class="post-title-link" itemprop="url">Go语言基础-数组和切片</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-06-10 18:20:25" itemprop="dateCreated datePublished" datetime="2020-06-10T18:20:25+08:00">2020-06-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Go%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index"><span itemprop="name">Go语言</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Go语言基础-数组和切片"><a href="#Go语言基础-数组和切片" class="headerlink" title="Go语言基础-数组和切片"></a>Go语言基础-数组和切片</h1><h1 id="数组和切片"><a href="#数组和切片" class="headerlink" title="数组和切片"></a>数组和切片</h1><h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><p>数组是同一类型元素的集合。例如，整数集合 5,8,9,79,76 形成一个数组。Go 语言中不允许混合不同类型的元素，例如包含字符串和整数的数组。（译者注：当然，如果是 interface{} 类型数组，可以包含任意类型）</p>
<h3 id="数组的声明"><a href="#数组的声明" class="headerlink" title="数组的声明"></a>数组的声明</h3><p>一个数组的表示形式为 <code>[n]T</code>。<code>n</code> 表示数组中元素的数量，<code>T</code> 代表每个元素的类型。元素的数量 <code>n</code> 也是该类型的一部分（稍后我们将详细讨论这一点）。</p>
<p>可以使用不同的方式来声明数组，让我们一个一个的来看。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> a [<span class="number">3</span>]<span class="keyword">int</span> <span class="comment">//int array with length 3</span></span><br><span class="line">    fmt.Println(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>var a[3]int</strong> 声明了一个长度为 3 的整型数组。<strong>数组中的所有元素都被自动赋值为数组类型的零值。</strong> 在这种情况下，<code>a</code> 是一个整型数组，因此 <code>a</code> 的所有元素都被赋值为 <code>0</code>，即 int 型的零值。运行上述程序将 <strong>输出</strong> <code>[0 0 0]</code>。</p>
<p>数组的索引从 <code>0</code> 开始到 <code>length - 1</code> 结束。让我们给上面的数组赋值。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> a [<span class="number">3</span>]<span class="keyword">int</span> <span class="comment">//int array with length 3</span></span><br><span class="line">    a[<span class="number">0</span>] = <span class="number">12</span> <span class="comment">// array index starts at 0</span></span><br><span class="line">    a[<span class="number">1</span>] = <span class="number">78</span></span><br><span class="line">    a[<span class="number">2</span>] = <span class="number">50</span></span><br><span class="line">    fmt.Println(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>a[0] 将值赋给数组的第一个元素。该程序将 <strong>输出</strong> <code>[12 78 50]</code>。</p>
<p>让我们使用 <strong>简略声明</strong> 来创建相同的数组。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    a := [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">12</span>, <span class="number">78</span>, <span class="number">50</span>&#125; <span class="comment">// short hand declaration to create array</span></span><br><span class="line">    fmt.Println(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的程序将会打印相同的 <strong>输出</strong> <code>[12 78 50]</code>。</p>
<p>在简略声明中，不需要将数组中所有的元素赋值。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    a := [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">12</span>&#125; </span><br><span class="line">    fmt.Println(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在上述程序中的第 8 行 <code>a := [3]int&#123;12&#125;</code> 声明一个长度为 3 的数组，但只提供了一个值 <code>12</code>，剩下的 2 个元素自动赋值为 <code>0</code>。这个程序将<strong>输出</strong> <code>[12 0 0]</code>。</p>
<p>你甚至可以忽略声明数组的长度，并用 <code>...</code> 代替，让编译器为你自动计算长度，这在下面的程序中实现。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    a := [...]<span class="keyword">int</span>&#123;<span class="number">12</span>, <span class="number">78</span>, <span class="number">50</span>&#125; <span class="comment">// ... makes the compiler determine the length</span></span><br><span class="line">    fmt.Println(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>数组的大小是类型的一部分</strong>。因此 <code>[5]int</code> 和 <code>[25]int</code> 是不同类型。数组不能调整大小，不要担心这个限制，因为 <code>slices</code> 的存在能解决这个问题。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    a := [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">5</span>, <span class="number">78</span>, <span class="number">8</span>&#125;</span><br><span class="line">    <span class="keyword">var</span> b [<span class="number">5</span>]<span class="keyword">int</span></span><br><span class="line">    b = a <span class="comment">// not possible since [3]int and [5]int are distinct types</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在上述程序的第 6 行中, 我们试图将类型 <code>[3]int</code> 的变量赋给类型为 <code>[5]int</code> 的变量，这是不允许的，因此编译器将抛出错误 main.go:6: cannot use a (type [3]int) as type [5]int in assignment。</p>
<h3 id="数组是值类型"><a href="#数组是值类型" class="headerlink" title="数组是值类型"></a>数组是值类型</h3><p>Go 中的数组是值类型而不是引用类型。这意味着当数组赋值给一个新的变量时，该变量会得到一个原始数组的一个副本。如果对新变量进行更改，则不会影响原始数组。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    a := [...]<span class="keyword">string</span>&#123;<span class="string">&quot;USA&quot;</span>, <span class="string">&quot;China&quot;</span>, <span class="string">&quot;India&quot;</span>, <span class="string">&quot;Germany&quot;</span>, <span class="string">&quot;France&quot;</span>&#125;</span><br><span class="line">    b := a <span class="comment">// a copy of a is assigned to b</span></span><br><span class="line">    b[<span class="number">0</span>] = <span class="string">&quot;Singapore&quot;</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;a is &quot;</span>, a)</span><br><span class="line">    fmt.Println(<span class="string">&quot;b is &quot;</span>, b) </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在上述程序的第 7 行，<code>a</code> 的副本被赋给 <code>b</code>。在第 8 行中，<code>b</code> 的第一个元素改为 <code>Singapore</code>。这不会在原始数组 <code>a</code> 中反映出来。该程序将 <strong>输出</strong>,</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">a is [USA China India Germany France]  </span><br><span class="line">b is [Singapore China India Germany France]</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<p>同样，当数组作为参数传递给函数时，它们是按值传递，而原始数组保持不变。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">changeLocal</span><span class="params">(num [5]<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    num[<span class="number">0</span>] = <span class="number">55</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;inside function &quot;</span>, num)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    num := [...]<span class="keyword">int</span>&#123;<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">8</span>&#125;</span><br><span class="line">    fmt.Println(<span class="string">&quot;before passing to function &quot;</span>, num)</span><br><span class="line">    changeLocal(num) <span class="comment">//num is passed by value</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;after passing to function &quot;</span>, num)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在上述程序的 13 行中, 数组 <code>num</code> 实际上是通过值传递给函数 <code>changeLocal</code>，数组不会因为函数调用而改变。这个程序将输出,</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">before passing to function  [5 6 7 8 8]</span><br><span class="line">inside function  [55 6 7 8 8]</span><br><span class="line">after passing to function  [5 6 7 8 8]</span><br></pre></td></tr></table></figure>

<h3 id="数组的长度"><a href="#数组的长度" class="headerlink" title="数组的长度"></a>数组的长度</h3><p>通过将数组作为参数传递给 <code>len</code> 函数，可以得到数组的长度。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    a := [...]<span class="keyword">float64</span>&#123;<span class="number">67.7</span>, <span class="number">89.8</span>, <span class="number">21</span>, <span class="number">78</span>&#125;</span><br><span class="line">    fmt.Println(<span class="string">&quot;length of a is&quot;</span>,<span class="built_in">len</span>(a))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的程序输出为 <code>length of a is 4</code>。</p>
<h3 id="使用-range-迭代数组"><a href="#使用-range-迭代数组" class="headerlink" title="使用 range 迭代数组"></a>使用 range 迭代数组</h3><p><code>for</code> 循环可用于遍历数组中的元素。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    a := [...]<span class="keyword">float64</span>&#123;<span class="number">67.7</span>, <span class="number">89.8</span>, <span class="number">21</span>, <span class="number">78</span>&#125;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(a); i++ &#123; <span class="comment">// looping from 0 to the length of the array</span></span><br><span class="line">        fmt.Printf(<span class="string">&quot;%d th element of a is %.2f\n&quot;</span>, i, a[i])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的程序使用 <code>for</code> 循环遍历数组中的元素，从索引 <code>0</code> 到 <code>length of the array - 1</code>。这个程序运行后打印出，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">0 th element of a is 67.70  </span><br><span class="line">1 th element of a is 89.80  </span><br><span class="line">2 th element of a is 21.00  </span><br><span class="line">3 th element of a is 78.00</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<p>Go 提供了一种更好、更简洁的方法，通过使用 <code>for</code> 循环的 <strong>range</strong> 方法来遍历数组。<code>range</code> 返回索引和该索引处的值。让我们使用 range 重写上面的代码。我们还可以获取数组中所有元素的总和。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    a := [...]<span class="keyword">float64</span>&#123;<span class="number">67.7</span>, <span class="number">89.8</span>, <span class="number">21</span>, <span class="number">78</span>&#125;</span><br><span class="line">    sum := <span class="keyword">float64</span>(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">for</span> i, v := <span class="keyword">range</span> a &#123;<span class="comment">//range returns both the index and value</span></span><br><span class="line">        fmt.Printf(<span class="string">&quot;%d the element of a is %.2f\n&quot;</span>, i, v)</span><br><span class="line">        sum += v</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(<span class="string">&quot;\nsum of all elements of a&quot;</span>,sum)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上述程序的第 8 行 <code>for i, v := range a</code> 利用的是 for 循环 range 方式。 它将返回索引和该索引处的值。 我们打印这些值，并计算数组 <code>a</code> 中所有元素的总和。 程序的 <strong>输出是</strong>，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">0 the element of a is 67.70</span><br><span class="line">1 the element of a is 89.80</span><br><span class="line">2 the element of a is 21.00</span><br><span class="line">3 the element of a is 78.00</span><br><span class="line"></span><br><span class="line">sum of all elements of a 256.5</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<p>如果你只需要值并希望忽略索引，则可以通过用 <code>_</code> 空白标识符替换索引来执行。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> _, v := <span class="keyword">range</span> a &#123; <span class="comment">// ignores index  </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的 for 循环忽略索引，同样值也可以被忽略。</p>
<h3 id="多维数组"><a href="#多维数组" class="headerlink" title="多维数组"></a>多维数组</h3><p>到目前为止我们创建的数组都是一维的，Go 语言可以创建多维数组。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printarray</span><span class="params">(a [3][2]<span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> _, v1 := <span class="keyword">range</span> a &#123;</span><br><span class="line">        <span class="keyword">for</span> _, v2 := <span class="keyword">range</span> v1 &#123;</span><br><span class="line">            fmt.Printf(<span class="string">&quot;%s &quot;</span>, v2)</span><br><span class="line">        &#125;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    a := [<span class="number">3</span>][<span class="number">2</span>]<span class="keyword">string</span>&#123;</span><br><span class="line">        &#123;<span class="string">&quot;lion&quot;</span>, <span class="string">&quot;tiger&quot;</span>&#125;,</span><br><span class="line">        &#123;<span class="string">&quot;cat&quot;</span>, <span class="string">&quot;dog&quot;</span>&#125;,</span><br><span class="line">        &#123;<span class="string">&quot;pigeon&quot;</span>, <span class="string">&quot;peacock&quot;</span>&#125;, <span class="comment">// this comma is necessary. The compiler will complain if you omit this comma</span></span><br><span class="line">    &#125;</span><br><span class="line">    printarray(a)</span><br><span class="line">    <span class="keyword">var</span> b [<span class="number">3</span>][<span class="number">2</span>]<span class="keyword">string</span></span><br><span class="line">    b[<span class="number">0</span>][<span class="number">0</span>] = <span class="string">&quot;apple&quot;</span></span><br><span class="line">    b[<span class="number">0</span>][<span class="number">1</span>] = <span class="string">&quot;samsung&quot;</span></span><br><span class="line">    b[<span class="number">1</span>][<span class="number">0</span>] = <span class="string">&quot;microsoft&quot;</span></span><br><span class="line">    b[<span class="number">1</span>][<span class="number">1</span>] = <span class="string">&quot;google&quot;</span></span><br><span class="line">    b[<span class="number">2</span>][<span class="number">0</span>] = <span class="string">&quot;AT&amp;T&quot;</span></span><br><span class="line">    b[<span class="number">2</span>][<span class="number">1</span>] = <span class="string">&quot;T-Mobile&quot;</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">    printarray(b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在上述程序的第 17 行，用简略语法声明一个二维字符串数组 a 。20 行末尾的逗号是必需的。这是因为根据 Go 语言的规则自动插入分号。至于为什么这是必要的，如果你想了解更多，请阅读<a target="_blank" rel="noopener" href="https://golang.org/doc/effective_go.html#semicolons%E3%80%82">https://golang.org/doc/effective_go.html#semicolons。</a></p>
<p>另外一个二维数组 b 在 23 行声明，字符串通过每个索引一个一个添加。这是另一种初始化二维数组的方法。</p>
<p>第 7 行的 printarray 函数使用两个 range 循环来打印二维数组的内容。上述程序的 <strong>输出是</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">lion tiger</span><br><span class="line">cat dog</span><br><span class="line">pigeon peacock</span><br><span class="line"></span><br><span class="line">apple samsung</span><br><span class="line">microsoft google</span><br><span class="line">AT&amp;T T-Mobile</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<p>这就是数组，尽管数组看上去似乎足够灵活，但是它们具有固定长度的限制，不可能增加数组的长度。这就要用到 <strong>切片</strong> 了。事实上，在 Go 中，切片比传统数组更常见。</p>
<h2 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h2><p>切片是由数组建立的一种方便、灵活且功能强大的包装（Wrapper）。切片本身不拥有任何数据。它们只是对现有数组的引用。</p>
<h3 id="创建一个切片"><a href="#创建一个切片" class="headerlink" title="创建一个切片"></a>创建一个切片</h3><p>带有 T 类型元素的切片由 <code>[]T</code> 表示</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    a := [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">76</span>, <span class="number">77</span>, <span class="number">78</span>, <span class="number">79</span>, <span class="number">80</span>&#125;</span><br><span class="line">    <span class="keyword">var</span> b []<span class="keyword">int</span> = a[<span class="number">1</span>:<span class="number">4</span>] <span class="comment">// creates a slice from a[1] to a[3]</span></span><br><span class="line">    fmt.Println(b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用语法 <code>a[start:end]</code> 创建一个从 <code>a</code> 数组索引 <code>start</code> 开始到 <code>end - 1</code> 结束的切片。因此，在上述程序的第 9 行中, <code>a[1:4]</code> 从索引 1 到 3 创建了 <code>a</code> 数组的一个切片表示。因此, 切片 <code>b</code> 的值为 <code>[77 78 79]</code>。</p>
<p>让我们看看另一种创建切片的方法。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    c := []<span class="keyword">int</span>&#123;<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>&#125; <span class="comment">// creates and array and returns a slice reference</span></span><br><span class="line">    fmt.Println(c)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在上述程序的第 9 行，<code>c：= [] int &#123;6，7，8&#125;</code> 创建一个有 3 个整型元素的数组，并返回一个存储在 c 中的切片引用。</p>
<h3 id="切片的修改"><a href="#切片的修改" class="headerlink" title="切片的修改"></a>切片的修改</h3><p>切片自己不拥有任何数据。它只是底层数组的一种表示。对切片所做的任何修改都会反映在底层数组中。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    darr := [...]<span class="keyword">int</span>&#123;<span class="number">57</span>, <span class="number">89</span>, <span class="number">90</span>, <span class="number">82</span>, <span class="number">100</span>, <span class="number">78</span>, <span class="number">67</span>, <span class="number">69</span>, <span class="number">59</span>&#125;</span><br><span class="line">    dslice := darr[<span class="number">2</span>:<span class="number">5</span>]</span><br><span class="line">    fmt.Println(<span class="string">&quot;array before&quot;</span>, darr)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="keyword">range</span> dslice &#123;</span><br><span class="line">        dslice[i]++</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(<span class="string">&quot;array after&quot;</span>, darr)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在上述程序的第 9 行，我们根据数组索引 2,3,4 创建一个切片 <code>dslice</code>。for 循环将这些索引中的值逐个递增。当我们使用 for 循环打印数组时，我们可以看到对切片的更改反映在数组中。该程序的输出是</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Copyarray before [57 89 90 82 100 78 67 69 59]  </span><br><span class="line">array after [57 89 91 83 101 78 67 69 59]</span><br></pre></td></tr></table></figure>

<p>当多个切片共用相同的底层数组时，每个切片所做的更改将反映在数组中。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    numa := [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">78</span>, <span class="number">79</span> ,<span class="number">80</span>&#125;</span><br><span class="line">    nums1 := numa[:] <span class="comment">// creates a slice which contains all elements of the array</span></span><br><span class="line">    nums2 := numa[:]</span><br><span class="line">    fmt.Println(<span class="string">&quot;array before change 1&quot;</span>, numa)</span><br><span class="line">    nums1[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;array after modification to slice nums1&quot;</span>, numa)</span><br><span class="line">    nums2[<span class="number">1</span>] = <span class="number">101</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;array after modification to slice nums2&quot;</span>, numa)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 9 行中，<code>numa [:]</code> 缺少开始和结束值。开始和结束的默认值分别为 <code>0</code> 和 <code>len (numa)</code>。两个切片 <code>nums1</code> 和 <code>nums2</code> 共享相同的数组。该程序的输出是</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">array before change 1 [78 79 80]  </span><br><span class="line">array after modification to slice nums1 [100 79 80]  </span><br><span class="line">array after modification to slice nums2 [100 101 80]</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<p>从输出中可以清楚地看出，当切片共享同一个数组时，每个所做的修改都会反映在数组中。</p>
<h3 id="切片的长度和容量"><a href="#切片的长度和容量" class="headerlink" title="切片的长度和容量"></a>切片的长度和容量</h3><p>切片的长度是切片中的元素数。<strong>切片的容量是从创建切片索引开始的底层数组中元素数。</strong></p>
<p>让我们写一段代码来更好地理解这点。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fruitarray := [...]<span class="keyword">string</span>&#123;<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;grape&quot;</span>, <span class="string">&quot;mango&quot;</span>, <span class="string">&quot;water melon&quot;</span>, <span class="string">&quot;pine apple&quot;</span>, <span class="string">&quot;chikoo&quot;</span>&#125;</span><br><span class="line">    fruitslice := fruitarray[<span class="number">1</span>:<span class="number">3</span>]</span><br><span class="line">    fmt.Printf(<span class="string">&quot;length of slice %d capacity %d&quot;</span>, <span class="built_in">len</span>(fruitslice), <span class="built_in">cap</span>(fruitslice)) <span class="comment">// length of is 2 and capacity is 6</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在上面的程序中，<code>fruitslice</code> 是从 <code>fruitarray</code> 的索引 1 和 2 创建的。 因此，<code>fruitlice</code> 的长度为 <code>2</code>。</p>
<p><code>fruitarray</code> 的长度是 7。<code>fruiteslice</code> 是从 <code>fruitarray</code> 的索引 <code>1</code> 创建的。因此, <code>fruitslice</code> 的容量是从 <code>fruitarray</code> 索引为 <code>1</code> 开始，也就是说从 <code>orange</code> 开始，该值是 <code>6</code>。因此, <code>fruitslice</code> 的容量为 6。该[程序]输出切片的 <strong>长度为 2 容量为 6</strong> 。</p>
<p>切片可以重置其容量。任何超出这一点将导致程序运行时抛出错误。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fruitarray := [...]<span class="keyword">string</span>&#123;<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;grape&quot;</span>, <span class="string">&quot;mango&quot;</span>, <span class="string">&quot;water melon&quot;</span>, <span class="string">&quot;pine apple&quot;</span>, <span class="string">&quot;chikoo&quot;</span>&#125;</span><br><span class="line">    fruitslice := fruitarray[<span class="number">1</span>:<span class="number">3</span>]</span><br><span class="line">    fmt.Printf(<span class="string">&quot;length of slice %d capacity %d\n&quot;</span>, <span class="built_in">len</span>(fruitslice), <span class="built_in">cap</span>(fruitslice)) <span class="comment">// length of is 2 and capacity is 6</span></span><br><span class="line">    fruitslice = fruitslice[:<span class="built_in">cap</span>(fruitslice)] <span class="comment">// re-slicing furitslice till its capacity</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;After re-slicing length is&quot;</span>,<span class="built_in">len</span>(fruitslice), <span class="string">&quot;and capacity is&quot;</span>,<span class="built_in">cap</span>(fruitslice))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在上述程序的第 11 行中，<code>fruitslice</code> 的容量是重置的。以上程序输出为，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">length of slice 2 capacity 6 </span><br><span class="line">After re-slicing length is 6 and capacity is 6</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="使用-make-创建一个切片"><a href="#使用-make-创建一个切片" class="headerlink" title="使用 make 创建一个切片"></a>使用 make 创建一个切片</h3><p>func make（[]T，len，cap）[]T 通过传递类型，长度和容量来创建切片。容量是可选参数, 默认值为切片长度。make 函数创建一个数组，并返回引用该数组的切片。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    i := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">5</span>, <span class="number">5</span>)</span><br><span class="line">    fmt.Println(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用 make 创建切片时默认情况下这些值为零。上述程序的输出为 <code>[0 0 0 0 0]</code>。</p>
<h3 id="追加切片元素"><a href="#追加切片元素" class="headerlink" title="追加切片元素"></a>追加切片元素</h3><p>正如我们已经知道数组的长度是固定的，它的长度不能增加。 切片是动态的，使用 <code>append</code> 可以将新元素追加到切片上。append 函数的定义是 <code>func append（s[]T，x ... T）[]T</code>。</p>
<p><strong>x … T</strong> 在函数定义中表示该函数接受参数 x 的个数是可变的。这些类型的函数被称为[可变函数]。</p>
<p>有一个问题可能会困扰你。如果切片由数组支持，并且数组本身的长度是固定的，那么切片如何具有动态长度。以及内部发生了什么，当新的元素被添加到切片时，会创建一个新的数组。现有数组的元素被复制到这个新数组中，并返回这个新数组的新切片引用。现在新切片的容量是旧切片的两倍。下面的程序会让你清晰理解。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    cars := []<span class="keyword">string</span>&#123;<span class="string">&quot;Ferrari&quot;</span>, <span class="string">&quot;Honda&quot;</span>, <span class="string">&quot;Ford&quot;</span>&#125;</span><br><span class="line">    fmt.Println(<span class="string">&quot;cars:&quot;</span>, cars, <span class="string">&quot;has old length&quot;</span>, <span class="built_in">len</span>(cars), <span class="string">&quot;and capacity&quot;</span>, <span class="built_in">cap</span>(cars)) <span class="comment">// capacity of cars is 3</span></span><br><span class="line">    cars = <span class="built_in">append</span>(cars, <span class="string">&quot;Toyota&quot;</span>)</span><br><span class="line">    fmt.Println(<span class="string">&quot;cars:&quot;</span>, cars, <span class="string">&quot;has new length&quot;</span>, <span class="built_in">len</span>(cars), <span class="string">&quot;and capacity&quot;</span>, <span class="built_in">cap</span>(cars)) <span class="comment">// capacity of cars is doubled to 6</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在上述程序中，<code>cars</code> 的容量最初是 3。在第 10 行，我们给 cars 添加了一个新的元素，并把 <code>append(cars, &quot;Toyota&quot;)</code> 返回的切片赋值给 cars。现在 cars 的容量翻了一番，变成了 6。上述程序的输出是</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">cars: [Ferrari Honda Ford] has old length 3 and capacity 3  </span><br><span class="line">cars: [Ferrari Honda Ford Toyota] has new length 4 and capacity 6</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<p>切片类型的零值为 <code>nil</code>。一个 <code>nil</code> 切片的长度和容量为 0。可以使用 append 函数将值追加到 <code>nil</code> 切片。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (  </span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">    <span class="keyword">var</span> names []<span class="keyword">string</span> <span class="comment">//zero value of a slice is nil</span></span><br><span class="line">    <span class="keyword">if</span> names == <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;slice is nil going to append&quot;</span>)</span><br><span class="line">        names = <span class="built_in">append</span>(names, <span class="string">&quot;John&quot;</span>, <span class="string">&quot;Sebastian&quot;</span>, <span class="string">&quot;Vinay&quot;</span>)</span><br><span class="line">        fmt.Println(<span class="string">&quot;names contents:&quot;</span>,names)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在上面的程序 <code>names</code> 是 nil，我们已经添加 3 个字符串给 <code>names</code>。该程序的输出是</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">slice is nil going to append  </span><br><span class="line">names contents: [John Sebastian Vinay]</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<p>也可以使用 <code>...</code> 运算符将一个切片添加到另一个切片。 你可以在[可变参数函数]教程中了解有关此运算符的更多信息。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    veggies := []<span class="keyword">string</span>&#123;<span class="string">&quot;potatoes&quot;</span>, <span class="string">&quot;tomatoes&quot;</span>, <span class="string">&quot;brinjal&quot;</span>&#125;</span><br><span class="line">    fruits := []<span class="keyword">string</span>&#123;<span class="string">&quot;oranges&quot;</span>, <span class="string">&quot;apples&quot;</span>&#125;</span><br><span class="line">    food := <span class="built_in">append</span>(veggies, fruits...)</span><br><span class="line">    fmt.Println(<span class="string">&quot;food:&quot;</span>,food)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在上述程序的第 10 行，food 是通过 append(veggies, fruits…) 创建。程序的输出为 <code>food: [potatoes tomatoes brinjal oranges apples]</code>。</p>
<h3 id="切片的函数传递"><a href="#切片的函数传递" class="headerlink" title="切片的函数传递"></a>切片的函数传递</h3><p>我们可以认为，切片在内部可由一个结构体类型表示。这是它的表现形式，</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> slice <span class="keyword">struct</span> &#123;  </span><br><span class="line">    Length        <span class="keyword">int</span></span><br><span class="line">    Capacity      <span class="keyword">int</span></span><br><span class="line">    ZerothElement *<span class="keyword">byte</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>切片包含长度、容量和指向数组第零个元素的指针。当切片传递给函数时，即使它通过值传递，指针变量也将引用相同的底层数组。因此，当切片作为参数传递给函数时，函数内所做的更改也会在函数外可见。让我们写一个程序来检查这点。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">subtactOne</span><span class="params">(numbers []<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="keyword">range</span> numbers &#123;</span><br><span class="line">        numbers[i] -= <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    nos := []<span class="keyword">int</span>&#123;<span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>&#125;</span><br><span class="line">    fmt.Println(<span class="string">&quot;slice before function call&quot;</span>, nos)</span><br><span class="line">    subtactOne(nos)                               <span class="comment">// function modifies the slice</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;slice after function call&quot;</span>, nos) <span class="comment">// modifications are visible outside</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上述程序的行号 17 中，调用函数将切片中的每个元素递减 2。在函数调用后打印切片时，这些更改是可见的。如果你还记得，这是不同于数组的，对于函数中一个数组的变化在函数外是不可见的。上述[程序]的输出是，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">array before function call [8 7 6]  </span><br><span class="line">array after function call [6 5 4]</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="多维切片"><a href="#多维切片" class="headerlink" title="多维切片"></a>多维切片</h3><p>类似于数组，切片可以有多个维度。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;  </span><br><span class="line">     pls := [][]<span class="keyword">string</span> &#123;</span><br><span class="line">            &#123;<span class="string">&quot;C&quot;</span>, <span class="string">&quot;C++&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;JavaScript&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;Go&quot;</span>, <span class="string">&quot;Rust&quot;</span>&#125;,</span><br><span class="line">            &#125;</span><br><span class="line">    <span class="keyword">for</span> _, v1 := <span class="keyword">range</span> pls &#123;</span><br><span class="line">        <span class="keyword">for</span> _, v2 := <span class="keyword">range</span> v1 &#123;</span><br><span class="line">            fmt.Printf(<span class="string">&quot;%s &quot;</span>, v2)</span><br><span class="line">        &#125;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>程序的输出为，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">C C++  </span><br><span class="line">JavaScript  </span><br><span class="line">Go Rust</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="内存优化"><a href="#内存优化" class="headerlink" title="内存优化"></a>内存优化</h3><p>切片持有对底层数组的引用。只要切片在内存中，数组就不能被垃圾回收。在内存管理方面，这是需要注意的。让我们假设我们有一个非常大的数组，我们只想处理它的一小部分。然后，我们由这个数组创建一个切片，并开始处理切片。这里需要重点注意的是，在切片引用时数组仍然存在内存中。</p>
<p>一种解决方法是使用 [copy] 函数 <code>func copy(dst，src[]T)int</code> 来生成一个切片的副本。这样我们可以使用新的切片，原始数组可以被垃圾回收。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">countries</span><span class="params">()</span> []<span class="title">string</span></span> &#123;</span><br><span class="line">    countries := []<span class="keyword">string</span>&#123;<span class="string">&quot;USA&quot;</span>, <span class="string">&quot;Singapore&quot;</span>, <span class="string">&quot;Germany&quot;</span>, <span class="string">&quot;India&quot;</span>, <span class="string">&quot;Australia&quot;</span>&#125;</span><br><span class="line">    neededCountries := countries[:<span class="built_in">len</span>(countries)<span class="number">-2</span>]</span><br><span class="line">    countriesCpy := <span class="built_in">make</span>([]<span class="keyword">string</span>, <span class="built_in">len</span>(neededCountries))</span><br><span class="line">    <span class="built_in">copy</span>(countriesCpy, neededCountries) <span class="comment">//copies neededCountries to countriesCpy</span></span><br><span class="line">    <span class="keyword">return</span> countriesCpy</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    countriesNeeded := countries()</span><br><span class="line">    fmt.Println(countriesNeeded)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在上述程序的第 9 行，<code>neededCountries := countries[:len(countries)-2</code> 创建一个去掉尾部 2 个元素的切片 <code>countries</code>，在上述程序的 11 行，将 <code>neededCountries</code> 复制到 <code>countriesCpy</code> 同时在函数的下一行返回 countriesCpy。现在 <code>countries</code> 数组可以被垃圾回收, 因为 <code>neededCountries</code> 不再被引用。</p>
<hr>
<h2 id="数组（小案例）"><a href="#数组（小案例）" class="headerlink" title="数组（小案例）"></a>数组（小案例）</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line">// 数组：数组是同一类型元素的集合，Go 语言中不允许混合不同类型的元素，例如包含字符串和整数的数组</span><br><span class="line">// 在内存中连续存储</span><br><span class="line">// 数组一旦定义，大小不能变化</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">	// <span class="number">1</span> 定义数组</span><br><span class="line">	//var a [<span class="number">3</span>]<span class="built_in">int</span>   // 定义了一个大小为<span class="number">3</span>的<span class="built_in">int</span>类型数组</span><br><span class="line">	//a :=[<span class="number">3</span>]<span class="built_in">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line">	//fmt.Println(a)</span><br><span class="line"></span><br><span class="line">	// <span class="number">2</span> 使用数组</span><br><span class="line">	//fmt.Println(a[<span class="number">2</span>])   // 取值</span><br><span class="line">	//a[<span class="number">0</span>]=<span class="number">999</span>           // 赋值</span><br><span class="line">	//fmt.Println(a)</span><br><span class="line"></span><br><span class="line">	//<span class="number">3</span> 数组是值类型 (值类型和引用类型)  字符串，数字，布尔，数组都是值类型</span><br><span class="line">	// 值类型的空值，是相应类型的<span class="number">0</span>值</span><br><span class="line">	//var s string</span><br><span class="line">	//var b <span class="built_in">bool</span></span><br><span class="line">	//fmt.Println(b)</span><br><span class="line">	//当数组作为参数传递给函数时，它们是按值传递，而原始数组保持不变</span><br><span class="line">	// go语言中参数传递，都是copy传递</span><br><span class="line">	//var b =[<span class="number">3</span>]<span class="built_in">int</span>&#123;<span class="number">4</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line">	//fmt.Println(b)</span><br><span class="line">	//test5(b)</span><br><span class="line">	//fmt.Println(b)</span><br><span class="line"></span><br><span class="line">	// <span class="number">4</span> 数组长度</span><br><span class="line">	//fmt.Println(<span class="built_in">len</span>(b))</span><br><span class="line"></span><br><span class="line">	// <span class="number">5</span> 数组循环  rang</span><br><span class="line">	//<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="built_in">len</span>(b);i++&#123;</span><br><span class="line">	//	fmt.Println(b[i])</span><br><span class="line">	//&#125;</span><br><span class="line">	// 基于迭代的循环</span><br><span class="line"></span><br><span class="line">	//<span class="keyword">for</span> i,v:=<span class="built_in">range</span> b&#123;</span><br><span class="line">	//<span class="keyword">for</span> _,v:=<span class="built_in">range</span> b&#123;</span><br><span class="line">	//<span class="keyword">for</span> i:=<span class="built_in">range</span> b&#123;  // 这个值是索引</span><br><span class="line">	//	//fmt.Println(i,<span class="string">&quot;====&quot;</span>,v)</span><br><span class="line">	//	//fmt.Println(<span class="string">&quot;====&quot;</span>,v)</span><br><span class="line">	//	fmt.Println(<span class="string">&quot;====&quot;</span>,i)</span><br><span class="line">	//&#125;</span><br><span class="line"></span><br><span class="line">	// <span class="number">6</span> 多维数组</span><br><span class="line">	// 长度为<span class="number">3</span> 的 [<span class="number">4</span>]<span class="built_in">int</span> 类型数组</span><br><span class="line">	//var a [<span class="number">3</span>][<span class="number">4</span>]<span class="built_in">int</span></span><br><span class="line">	//fmt.Println(a)</span><br><span class="line">	//a[<span class="number">1</span>][<span class="number">2</span>]=<span class="number">999</span></span><br><span class="line">	//fmt.Println(a[<span class="number">0</span>][<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">	//var a [<span class="number">3</span>][<span class="number">4</span>]<span class="built_in">int</span>=[<span class="number">3</span>][<span class="number">4</span>]<span class="built_in">int</span>&#123;&#123;<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>&#125;,&#123;&#125;,&#123;&#125;&#125;</span><br><span class="line">	//fmt.Println(a)</span><br><span class="line"></span><br><span class="line">	//var a [<span class="number">100</span>]<span class="built_in">int</span> =[<span class="number">100</span>]<span class="built_in">int</span>&#123;<span class="number">98</span>:<span class="number">99</span>,<span class="number">10</span>:<span class="number">110</span>&#125;</span><br><span class="line">	//fmt.Println(a)</span><br><span class="line">	a := [<span class="number">3</span>][<span class="number">2</span>]string&#123;</span><br><span class="line">		&#123;<span class="string">&quot;lion&quot;</span>, <span class="string">&quot;tiger&quot;</span>&#125;,</span><br><span class="line">		&#123;<span class="string">&quot;cat&quot;</span>, <span class="string">&quot;dog&quot;</span>&#125;,</span><br><span class="line">		&#123;<span class="string">&quot;pigeon&quot;</span>, <span class="string">&quot;peacock&quot;</span>&#125;, // this comma <span class="keyword">is</span> necessary. The compiler will complain <span class="keyword">if</span> you omit this comma</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(a[<span class="number">0</span>][<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func test5(a [<span class="number">3</span>]<span class="built_in">int</span>)  &#123;</span><br><span class="line">	a[<span class="number">0</span>]=<span class="number">999</span></span><br><span class="line">	fmt.Println(a)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">左大大</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
