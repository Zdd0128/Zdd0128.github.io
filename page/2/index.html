<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","version":"8.6.1","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<meta property="og:type" content="website">
<meta property="og:title" content="左大大的博客">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="左大大的博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="左大大">
<meta property="article:tag" content="Python Linux Vue">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/2/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/2/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>左大大的博客</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">左大大的博客</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="左大大"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">左大大</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">97</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>



          </div>
        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/12/Docker%E7%BD%91%E7%BB%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="左大大">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="左大大的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/12/Docker%E7%BD%91%E7%BB%9C/" class="post-title-link" itemprop="url">Docker网络</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-12 18:20:25" itemprop="dateCreated datePublished" datetime="2020-08-12T18:20:25+08:00">2020-08-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Docker网络"><a href="#Docker网络" class="headerlink" title="Docker网络"></a>Docker网络</h1><h3 id="理解Docker0"><a href="#理解Docker0" class="headerlink" title="理解Docker0"></a>理解Docker0</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 测试</span></span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625091157445.png" alt="image-20210625091157445"></p>
<p><strong>如图三个网络</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">问题:docker 是如何处理网络访问的?</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625091951813.png" alt="image-20210625091951813"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> [root@localhost ~]<span class="comment"># docker run -d -it --name django django:v2</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看容器的内部网络地址 ip addr	容器启动的时候会得到一个 eth0@if34 ip地址,是由docker0分配</span></span><br><span class="line">[root@localhost ~]# docker exec -it django ip addr</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">39: eth0@if40: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default </span><br><span class="line">    link/ether 02:42:ac:12:00:02 brd ff:ff:ff:ff:ff:ff link-netnsid 0</span><br><span class="line">    inet 172.18.0.2/16 brd 172.18.255.255 scope global eth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">       </span><br><span class="line"><span class="meta">#</span><span class="bash"> 思考:linux主机能不能ping通容器内部</span></span><br><span class="line">[root@localhost /]# ping 172.18.0.3</span><br><span class="line">PING 172.18.0.3 (172.18.0.3) 56(84) bytes of data.</span><br><span class="line">64 bytes from 172.18.0.3: icmp_seq=1 ttl=64 time=0.037 ms</span><br><span class="line">64 bytes from 172.18.0.3: icmp_seq=2 ttl=64 time=0.121 ms</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> linux主机能ping通docker容器内部</span></span><br></pre></td></tr></table></figure>

<h5 id="原理"><a href="#原理" class="headerlink" title="原理"></a><strong>原理</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.每启动一个docker容器,docker就会给docker容器分配一个ip,只要安装了docker,就会有一个网卡docker0桥接模式,使用的技术是veth-pair技术</span><br></pre></td></tr></table></figure>

<h5 id="再次测试ip-addr"><a href="#再次测试ip-addr" class="headerlink" title="再次测试ip addr"></a>再次测试ip addr</h5><p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625110536039.png" alt="image-20210625110536039"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.再启动一个容器测试,发现又多了一对网卡信息</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625110139708.png" alt="image-20210625110139708"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 这些这些容器带来的网卡都是一对一对的</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> veth-pair 就是一对的虚拟设备接口,他们都是成对出现的,一端连着协议,一段彼此相连</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 正因为这个特性,veth-pair 充当一个桥梁</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> OpenStac,Docker容器之间的连接,ovs的连接,都是使用veth-pair技术</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">3.测试django01和django02是否可以ping通</span><br><span class="line">    [root@localhost ~]# docker exec -it django01 ping 172.17.0.3</span><br><span class="line">    PING 172.17.0.3 (172.17.0.3) 56(84) bytes of data.</span><br><span class="line">    64 bytes from 172.17.0.3: icmp_seq=1 ttl=64 time=0.124 ms</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    [root@localhost ~]# docker exec -it django02 ping 172.17.0.2</span><br><span class="line">    PING 172.17.0.2 (172.17.0.2) 56(84) bytes of data.</span><br><span class="line">    64 bytes from 172.17.0.2: icmp_seq=1 ttl=64 time=0.190 ms</span><br><span class="line">    </span><br><span class="line"><span class="meta">#</span><span class="bash"> 结论:</span></span><br><span class="line">	容器之间通过ip地址可以相互ping通</span><br><span class="line">	容器之间通过容器名称不可以相互ping通</span><br></pre></td></tr></table></figure>

<h5 id="网络模型图"><a href="#网络模型图" class="headerlink" title="网络模型图:"></a><strong>网络模型图:</strong></h5><p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625114316763.png" alt="image-20210625114316763"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">结论:</span><br><span class="line">	django01 和django02是公用的一个路由器,docker0</span><br><span class="line">	所有的容器不指定网络的情况下,都是docker0路由的,docker会给我们的容器分配一个默认可用ip</span><br></pre></td></tr></table></figure>

<h5 id="小结"><a href="#小结" class="headerlink" title="小结:"></a><strong>小结:</strong></h5><p>​        Docker使用的是linux桥接,宿主机中是一个docker容器的网桥(docker0)</p>
<p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625114632626.png" alt="image-20210625114632626"></p>
<p>Docker中所有的网络接口都是虚拟的,虚拟的转发效率高(内网传递)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ps:只要容器删除对应的网桥一对就没了</span></span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625120358874.png" alt="image-20210625120358874"></p>
<h5 id="–link"><a href="#–link" class="headerlink" title="–link"></a>–link</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">高可用!</span><br><span class="line"><span class="meta">#</span><span class="bash">思考:</span></span><br><span class="line">	编写一个微服务,database url=ip,项目不重启,数据库ip换掉了,怎么处理这个问题?</span><br><span class="line">	可以用名称来进行访问容器</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">[root@localhost ~]# docker exec -it django02 ping django01</span><br><span class="line">ping: django01: Name or service not known</span><br><span class="line">[root@localhost ~]# docker exec -it django01 ping django2</span><br><span class="line">ping: django2: Name or service not known</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如何解决容器名称ping不通?</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 通过--link 容器名 就可以解决网络联通问题</span></span><br><span class="line">[root@localhost ~]# docker run -d -it --name django03 --link django02 django:v2</span><br><span class="line">df78d1a7a88a8466cd4ec5c6015f2cf4a6c2f955eeaeea9fde6edd90f7e5e63f</span><br><span class="line">[root@localhost ~]# docker exec -it django03 ping django02</span><br><span class="line">PING django02 (172.17.0.3) 56(84) bytes of data.</span><br><span class="line">64 bytes from django02 (172.17.0.3): icmp_seq=1 ttl=64 time=0.143 ms</span><br><span class="line">64 bytes from django02 (172.17.0.3): icmp_seq=2 ttl=64 time=0.077 ms</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 反向可以ping通吗?</span></span><br><span class="line">[root@localhost ~]# docker exec -it django02 ping django03</span><br><span class="line">ping: django03: Name or service not known</span><br></pre></td></tr></table></figure>

<p><strong>探究</strong>:inspect</p>
<p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625120532263.png" alt="image-20210625120532263"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">hosts:</span><br><span class="line">	配置本地绑定</span><br><span class="line">eg:</span><br><span class="line">	127.0.0.1 ww.baidu.com  # 请求百度会直接转发到127.0.0.1 </span><br><span class="line">	</span><br><span class="line"><span class="meta">	</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看hosts配置 在这里发现原理</span></span><br><span class="line">[root@localhost ~]# docker exec -it django03 cat /etc/hosts</span><br><span class="line">127.0.0.1	localhost</span><br><span class="line">::1	localhost ip6-localhost ip6-loopback</span><br><span class="line">fe00::0	ip6-localnet</span><br><span class="line">ff00::0	ip6-mcastprefix</span><br><span class="line">ff02::1	ip6-allnodes</span><br><span class="line">ff02::2	ip6-allrouters</span><br><span class="line">172.17.0.3	django02 f877b7f32c16  </span><br><span class="line">172.17.0.4	df78d1a7a88a</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 本质:--link就是我们在hosts配置中增加了一个172.17.0.3	django02 f877b7f32c16(不建议使用)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 更多的是自定义网络,不使用docker0(官方网桥,很多功能局限)</span></span><br><span class="line">	docker0问题:不支持容器名连接访问</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看django02发现没有配置上述相关信息,所以ping不通</span></span><br><span class="line">[root@localhost ~]# docker exec -it django02 cat /etc/hosts</span><br><span class="line">127.0.0.1	localhost</span><br><span class="line">::1	localhost ip6-localhost ip6-loopback</span><br><span class="line">fe00::0	ip6-localnet</span><br><span class="line">ff00::0	ip6-mcastprefix</span><br><span class="line">ff02::1	ip6-allnodes</span><br><span class="line">ff02::2	ip6-allrouters</span><br><span class="line">172.17.0.3	f877b7f32c16</span><br></pre></td></tr></table></figure>

<h3 id="自定义网络"><a href="#自定义网络" class="headerlink" title="自定义网络"></a>自定义网络</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看所有docker网络</span></span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625194038689.png" alt="image-20210625194038689"></p>
<h5 id="网络模式"><a href="#网络模式" class="headerlink" title="网络模式"></a>网络模式</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> docker网络模式</span>	</span><br><span class="line">    bridge:桥接 docker默认(自己创建也使用bridge模式)</span><br><span class="line">    none:不配置网络</span><br><span class="line">    host:和宿主机共享网络</span><br><span class="line">    container:容器网络连通(用的少,局限性大)</span><br></pre></td></tr></table></figure>

<h5 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 我们直接启动的命令 --net bridge 而这个就是我们的的docker0</span></span><br><span class="line">docker run -d -p --name django django:v1</span><br><span class="line">docker run -d -p --name django --net bridge django:v1</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> docker0特点:默认,域名(容器名)不能访问 --link可以打通连接</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 自定义一个网络</span></span><br><span class="line"><span class="meta">	#</span><span class="bash"> --driver bridge				网络模式</span></span><br><span class="line"><span class="meta">	#</span><span class="bash"> --subnet 192.168.0.0/16		子网地址  (192.168.0.2&lt;--&gt;192.168.255.255)</span></span><br><span class="line"><span class="meta">	#</span><span class="bash"> -gateway 192.168.0.1			网关</span></span><br><span class="line">[root@localhost ~]# docker network create --driver bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 mynet</span><br><span class="line">0931009e997f0c812b0c65980e4b00464bd498a59390a32719a27af9f5cea936</span><br><span class="line">[root@localhost ~]# docker network ls</span><br><span class="line">NETWORK ID     NAME                    DRIVER    SCOPE</span><br><span class="line">37d9dd39eba1   bridge                  bridge    local</span><br><span class="line">0d2ead8c4bbd   django                  bridge    local</span><br><span class="line">eaa007dae7ac   docker-compose_django   bridge    local</span><br><span class="line">4390198b7777   host                    host      local</span><br><span class="line">f8fedee819b4   ls                      bridge    local</span><br><span class="line">0931009e997f   mynet                   bridge    local</span><br></pre></td></tr></table></figure>

<p><strong>自己的网络:</strong></p>
<p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625195403214.png" alt="image-20210625195403214"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker run -d -P --name nginx01 --net mynet nginx</span><br><span class="line">11bf5d03197fcbebc94c23ed5c6f94da2fd56aa66a1b71fc268a907223e0b928</span><br><span class="line">[root@localhost ~]# docker run -d -P --name nginx02 --net mynet nginx</span><br><span class="line">34e466b9717610f8ef64f4461f45045ff2ba75601252edefc7b144233c368b73</span><br><span class="line">[root@localhost ~]# docker network inspect mynet</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;Name&quot;: &quot;mynet&quot;,</span><br><span class="line">        &quot;Id&quot;: &quot;0931009e997f0c812b0c65980e4b00464bd498a59390a32719a27af9f5cea936&quot;,</span><br><span class="line">        &quot;Created&quot;: &quot;2021-06-25T19:50:34.325511356+08:00&quot;,</span><br><span class="line">        &quot;Scope&quot;: &quot;local&quot;,</span><br><span class="line">        &quot;Driver&quot;: &quot;bridge&quot;,</span><br><span class="line">        &quot;EnableIPv6&quot;: false,</span><br><span class="line">        &quot;IPAM&quot;: &#123;</span><br><span class="line">            &quot;Driver&quot;: &quot;default&quot;,</span><br><span class="line">            &quot;Options&quot;: &#123;&#125;,</span><br><span class="line">            &quot;Config&quot;: [</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;Subnet&quot;: &quot;192.168.0.0/16&quot;,</span><br><span class="line">                    &quot;Gateway&quot;: &quot;192.168.0.1&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Internal&quot;: false,</span><br><span class="line">        &quot;Attachable&quot;: false,</span><br><span class="line">        &quot;Ingress&quot;: false,</span><br><span class="line">        &quot;ConfigFrom&quot;: &#123;</span><br><span class="line">            &quot;Network&quot;: &quot;&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;ConfigOnly&quot;: false,</span><br><span class="line">        &quot;Containers&quot;: &#123;</span><br><span class="line">            &quot;11bf5d03197fcbebc94c23ed5c6f94da2fd56aa66a1b71fc268a907223e0b928&quot;: &#123;</span><br><span class="line">                &quot;Name&quot;: &quot;nginx01&quot;,</span><br><span class="line">                &quot;EndpointID&quot;: &quot;23a533baca75e6d2c47dc7e7af4e3dd057398597c91df0cf5483be0a9f6cf944&quot;,</span><br><span class="line">                &quot;MacAddress&quot;: &quot;02:42:c0:a8:00:02&quot;,</span><br><span class="line">                &quot;IPv4Address&quot;: &quot;192.168.0.2/16&quot;,</span><br><span class="line">                &quot;IPv6Address&quot;: &quot;&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;34e466b9717610f8ef64f4461f45045ff2ba75601252edefc7b144233c368b73&quot;: &#123;</span><br><span class="line">                &quot;Name&quot;: &quot;nginx02&quot;,</span><br><span class="line">                &quot;EndpointID&quot;: &quot;569b06b3d66d39078f124aa3a5a95163e6f7a17a7eb3899cb34e88457846e38c&quot;,</span><br><span class="line">                &quot;MacAddress&quot;: &quot;02:42:c0:a8:00:03&quot;,</span><br><span class="line">                &quot;IPv4Address&quot;: &quot;192.168.0.3/16&quot;,</span><br><span class="line">                &quot;IPv6Address&quot;: &quot;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Options&quot;: &#123;&#125;,</span><br><span class="line">        &quot;Labels&quot;: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 再次测试ping连接</span></span><br><span class="line">[root@localhost ~]# docker exec -it django01 ping 192.168.0.3</span><br><span class="line">PING 192.168.0.3 (192.168.0.3) 56(84) bytes of data.</span><br><span class="line">64 bytes from 192.168.0.3: icmp_seq=1 ttl=64 time=0.070 ms</span><br><span class="line">...</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 现在不使用--link也可以ping名字了</span></span><br><span class="line">[root@localhost ~]# docker exec -it django01 ping django02</span><br><span class="line">PING django02 (192.168.0.3) 56(84) bytes of data.</span><br><span class="line">64 bytes from django02.mynet (192.168.0.3): icmp_seq=1 ttl=64 time=0.026 ms</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">ps:我们自定义的网络docker都已经帮我们维护好了对应关系,推荐使用</span><br><span class="line">好处:</span><br><span class="line">	redis:不同的集群使用不同的网络,保证集群是安全和健康的</span><br><span class="line">	mysql:不同的集群使用不同的网络,保证集群是安全和健康的</span><br></pre></td></tr></table></figure>

<h3 id="网络联通"><a href="#网络联通" class="headerlink" title="网络联通"></a>网络联通</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 不同网络之间容器是不可以相互ping通的</span></span><br><span class="line">[root@localhost ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE       COMMAND                  CREATED          STATUS          PORTS                                         NAMES</span><br><span class="line">98c858bfaf24   django:v1   &quot;/bin/sh -c &#x27;python3…&quot;   27 seconds ago   Up 26 seconds   0.0.0.0:49165-&gt;8000/tcp, :::49165-&gt;8000/tcp   django2</span><br><span class="line">06348589c8dc   django:v1   &quot;/bin/sh -c &#x27;python3…&quot;   32 seconds ago   Up 31 seconds   0.0.0.0:49164-&gt;8000/tcp, :::49164-&gt;8000/tcp   django1</span><br><span class="line">9a8f3e131abc   django:v1   &quot;/bin/sh -c &#x27;python3…&quot;   8 minutes ago    Up 8 minutes    0.0.0.0:49163-&gt;8000/tcp, :::49163-&gt;8000/tcp   django02</span><br><span class="line">90dbc178391d   django:v1   &quot;/bin/sh -c &#x27;python3…&quot;   8 minutes ago    Up 8 minutes    0.0.0.0:49162-&gt;8000/tcp, :::49162-&gt;8000/tcp   django01</span><br><span class="line">[root@localhost ~]# docker exec -it django01 ping django2</span><br><span class="line">ping: django2: Name or service not known</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625202248049.png" alt="image-20210625202248049"></p>
<p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625201003268.png" alt="image-20210625201003268"></p>
<p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625201136426.png" alt="image-20210625201136426"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 测试打通 django1 - mynet</span></span><br><span class="line">[root@localhost ~]# docker network connect mynet django1</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 连通之后就是将 django1 放到了 mynet 网络下</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 一个容器两个IP地址</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 阿里云服务:公网ip,私网ip</span></span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625201433570.png" alt="image-20210625201433570"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> django1 连通ok</span></span><br><span class="line">[root@localhost ~]# docker exec -it django01 ping django1</span><br><span class="line">PING django1 (192.168.0.4) 56(84) bytes of data.</span><br><span class="line">64 bytes from django1.mynet (192.168.0.4): icmp_seq=1 ttl=64 time=0.043 ms</span><br><span class="line">...</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> django2 是依旧打不通的</span></span><br><span class="line">[root@localhost ~]# docker exec -it django01 ping django2</span><br><span class="line">ping: django2: Name or service not known</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 结论:假设要跨网络操作别人,就需要使用 docker network connect 连通...</span></span><br></pre></td></tr></table></figure>

<h3 id="实战-部署Redis集群"><a href="#实战-部署Redis集群" class="headerlink" title="实战:部署Redis集群"></a>实战:部署Redis集群</h3><p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625202736139.png" alt="image-20210625202736139"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 创建网卡</span></span><br><span class="line">docker network create redis --subnet 172.38.0.0/16</span><br><span class="line">    [root@localhost ~]# docker network create redis --subnet 172.38.0.0/16</span><br><span class="line">    4f3b3875a14fe3377640ec1f67cc8c36929b04f855924ca4601e0bc23473b8ef</span><br><span class="line">    [root@localhost ~]# docker network ls</span><br><span class="line">    NETWORK ID     NAME                    DRIVER    SCOPE</span><br><span class="line">    37d9dd39eba1   bridge                  bridge    local</span><br><span class="line">    402236585e48   none                    null      local</span><br><span class="line">    4f3b3875a14f   redis                   bridge    local</span><br><span class="line">    ...</span><br><span class="line">    </span><br><span class="line"><span class="meta">#</span><span class="bash"> 通过脚本创建六个redis配置(直接粘贴回车)</span></span><br><span class="line">for port in $(seq 1 6);\</span><br><span class="line">do \</span><br><span class="line">mkdir -p /mydata/redis/node-$&#123;port&#125;/conf</span><br><span class="line">touch /mydata/redis/node-$&#123;port&#125;/conf/redis.conf</span><br><span class="line">cat &lt;&lt; EOF &gt;&gt; /mydata/redis/node-$&#123;port&#125;/conf/redis.conf</span><br><span class="line">port 6379</span><br><span class="line">bind 0.0.0.0</span><br><span class="line">cluster-enabled yes</span><br><span class="line">cluster-config-file nodes.conf</span><br><span class="line">cluster-node-timeout 5000</span><br><span class="line">cluster-announce-ip 172.38.0.1$&#123;port&#125;</span><br><span class="line">cluster-announce-port 6379</span><br><span class="line">cluster-announce-bus-port 16379</span><br><span class="line">appendonly yes</span><br><span class="line">EOF</span><br><span class="line">done</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 通过脚本运行六个redis(直接粘贴回车)</span></span><br><span class="line">for port in $(seq 1 6);\</span><br><span class="line">do \</span><br><span class="line">docker run -p 637$&#123;port&#125;:6379 -p 1637$&#123;port&#125;:16379 --name redis-$&#123;port&#125; \</span><br><span class="line">-v /mydata/redis/node-$&#123;port&#125;/data:/data \</span><br><span class="line">-v /mydata/redis/node-$&#123;port&#125;/conf/redis.conf:/etc/redis/redis.conf \</span><br><span class="line">-d --net redis --ip 172.38.0.1$&#123;port&#125; redis:5.0.9-alpine3.11 redis-server /etc/redis/redis.conf </span><br><span class="line">done</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建集群配置</span></span><br><span class="line">/data # redis-cli --cluster create 172.38.0.11:6379 172.38.0.12:6379 172.38.0.13:6379 172.38.0.14:6379 172.38.0.15:6379 172.38.0.16</span><br><span class="line">:6379  --cluster-replicas 1  </span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; Performing <span class="built_in">hash</span> slots allocation on 6 nodes...</span></span><br><span class="line">Master[0] -&gt; Slots 0 - 5460</span><br><span class="line">Master[1] -&gt; Slots 5461 - 10922</span><br><span class="line">Master[2] -&gt; Slots 10923 - 16383</span><br><span class="line">Adding replica 172.38.0.15:6379 to 172.38.0.11:6379</span><br><span class="line">Adding replica 172.38.0.16:6379 to 172.38.0.12:6379</span><br><span class="line">Adding replica 172.38.0.14:6379 to 172.38.0.13:6379</span><br><span class="line">M: 6388012edd045565b10c4888342f32f912e4d794 172.38.0.11:6379</span><br><span class="line">   slots:[0-5460] (5461 slots) master</span><br><span class="line">M: 8ee73c4a63da38012fe53e64b37309b7b238751b 172.38.0.12:6379</span><br><span class="line">   slots:[5461-10922] (5462 slots) master</span><br><span class="line">M: 941a3b5e627d34abab777424b0ae744896d1de7e 172.38.0.13:6379</span><br><span class="line">   slots:[10923-16383] (5461 slots) master</span><br><span class="line">S: d912cfbdb0b5d747dc65eb8d78bc63c217f5574c 172.38.0.14:6379</span><br><span class="line">   replicates 941a3b5e627d34abab777424b0ae744896d1de7e</span><br><span class="line">S: 38a0007b20f12a45a7d97aac4e336c50e37a47bf 172.38.0.15:6379</span><br><span class="line">   replicates 6388012edd045565b10c4888342f32f912e4d794</span><br><span class="line">S: 36c3c37d4f10af8b367ea43d73b2e765672768c5 172.38.0.16:6379</span><br><span class="line">   replicates 8ee73c4a63da38012fe53e64b37309b7b238751b</span><br><span class="line">Can I set the above configuration? (type &#x27;yes&#x27; to accept): yes</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; Nodes configuration updated</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; Assign a different config epoch to each node</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; Sending CLUSTER MEET messages to join the cluster</span></span><br><span class="line">Waiting for the cluster to join</span><br><span class="line">....</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; Performing Cluster Check (using node 172.38.0.11:6379)</span></span><br><span class="line">M: 6388012edd045565b10c4888342f32f912e4d794 172.38.0.11:6379</span><br><span class="line">   slots:[0-5460] (5461 slots) master</span><br><span class="line">   1 additional replica(s)</span><br><span class="line">S: 36c3c37d4f10af8b367ea43d73b2e765672768c5 172.38.0.16:6379</span><br><span class="line">   slots: (0 slots) slave</span><br><span class="line">   replicates 8ee73c4a63da38012fe53e64b37309b7b238751b</span><br><span class="line">M: 8ee73c4a63da38012fe53e64b37309b7b238751b 172.38.0.12:6379</span><br><span class="line">   slots:[5461-10922] (5462 slots) master</span><br><span class="line">   1 additional replica(s)</span><br><span class="line">S: 38a0007b20f12a45a7d97aac4e336c50e37a47bf 172.38.0.15:6379</span><br><span class="line">   slots: (0 slots) slave</span><br><span class="line">   replicates 6388012edd045565b10c4888342f32f912e4d794</span><br><span class="line">S: d912cfbdb0b5d747dc65eb8d78bc63c217f5574c 172.38.0.14:6379</span><br><span class="line">   slots: (0 slots) slave</span><br><span class="line">   replicates 941a3b5e627d34abab777424b0ae744896d1de7e</span><br><span class="line">M: 941a3b5e627d34abab777424b0ae744896d1de7e 172.38.0.13:6379</span><br><span class="line">   slots:[10923-16383] (5461 slots) master</span><br><span class="line">   1 additional replica(s)</span><br><span class="line">[OK] All nodes agree about slots configuration.</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; Check <span class="keyword">for</span> open slots...</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; Check slots coverage...</span></span><br><span class="line">[OK] All 16384 slots covered.</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">停止redis并删除容器</span></span><br><span class="line">for port in $(seq 1 6);\</span><br><span class="line">do \</span><br><span class="line">docker stop redis-$&#123;port&#125;; \</span><br><span class="line">docker rm redis-$&#123;port&#125;;</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">docker exec -it redis-1 /bin/sh #redis默认没有bash</span><br><span class="line">redis-cli --cluster create 172.38.0.11:6379 172.38.0.12:6379 172.38.0.13:6379 172.38.0.14:6379 172.38.0.15:6379 172.38.0.16:6379  --cluster-replicas 1</span><br></pre></td></tr></table></figure>

<p><strong>docker搭建redis集群完成</strong>:</p>
<p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625204849552.png" alt="image-20210625204849552"></p>
<p><strong>使用docker之后,所有技术都会慢慢变得简单起来</strong></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/10/Docker%E9%95%9C%E5%83%8F%E8%AF%A6%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="左大大">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="左大大的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/10/Docker%E9%95%9C%E5%83%8F%E8%AF%A6%E8%A7%A3/" class="post-title-link" itemprop="url">Docker镜像详解</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-10 18:20:25" itemprop="dateCreated datePublished" datetime="2020-08-10T18:20:25+08:00">2020-08-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Docker镜像详解"><a href="#Docker镜像详解" class="headerlink" title="Docker镜像详解"></a>Docker镜像详解</h1><h3 id="1-镜像是什么"><a href="#1-镜像是什么" class="headerlink" title="1.镜像是什么?"></a>1.镜像是什么?</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 镜像是什么?</span></span><br><span class="line">	镜像就是一个轻量级的,可执行的独立软件包,用来打包软件运行环境和基于运行环境开发的软件,它包含运行某个软件所需的所有内容,包括代码,运行时,库,环境变量和配置文件。</span><br><span class="line">	所有的应用,直接打包docker镜像,就可以直接跑起来!</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如何得到镜像:</span></span><br><span class="line">    1.从远程仓库下载</span><br><span class="line">    2.朋友拷贝给你</span><br><span class="line">    3.自己制作一个镜像 DockerFile</span><br></pre></td></tr></table></figure>

<h3 id="2-Docker镜像加载原理"><a href="#2-Docker镜像加载原理" class="headerlink" title="2.Docker镜像加载原理"></a>2.Docker镜像加载原理</h3><h4 id="1-UnionFs-联合文件系统查询"><a href="#1-UnionFs-联合文件系统查询" class="headerlink" title="1.UnionFs(联合文件系统查询)"></a>1.UnionFs(联合文件系统查询)</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> UnionFs(联合文件系统查询)</span></span><br><span class="line">	我们下载的时候看到的一层一层就是这个</span><br><span class="line"></span><br><span class="line">	UnionFs(联合文件系统): Union文件系统(UnionFS)是一种分层,轻量级并且高性能的文件系统,它支持对文件系统的修改作为一次提交来一层层的叠加,同时可以将不同目录挂载到同一个虚拟文件系统下,Union文件系统是Docker镜像的基础,镜像可以通过分层来进行继承,基于基础镜像(没有父镜像),可以制作各种具体的应用镜像</span><br><span class="line"></span><br><span class="line">特性: </span><br><span class="line">	一次同时加载多个文件系统,但从外面看起来,只能看到一个文件系统,联合加载会把各层文件系统叠加起来,这样最终的文件系统会包含所有底层的文件和目录结构</span><br></pre></td></tr></table></figure>

<h4 id="2-Docker镜像加载原理-1"><a href="#2-Docker镜像加载原理-1" class="headerlink" title="2.Docker镜像加载原理"></a>2.Docker镜像加载原理</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker的镜像实际上由一层一层的文件系统组成,这种层级的文件系统UnionFS</span><br><span class="line"></span><br><span class="line">bootfs(boot file system)主要包含bootlloader和kernel,bootfs主要是引导加载kernel,Linux刚启动时会加载bootfs文件系统,在docker镜像的最底层是bootfs,这一层与我们典型的Linux/Unix系统是一样的,包含boot加载器和内核,当boot加载完成之后整个内核就在内存中了,此时内存的使用权已由bootfa转交给内核,此时系统也会卸载bootfs</span><br><span class="line"></span><br><span class="line">rootfs(root file system),在bootfs之上,包含的就是典型Linux系统中的/dev, /proc,/bin, /etc等标准目录和文件,rootfs就是各种不同的操作系统发行版,比如Ubuntu, CentOS等等</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625213313404.png" alt="image-20210625213313404"></p>
<p>平时我们安装进虚拟机的CentOS都是好几个G,为什么Docker这里才200M?</p>
<p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625213335327.png" alt="image-20210625213335327"></p>
<p>对于一个精简的OS,rootfs可以很小,只需要包含基本的命令,工具和程序库就可以了,因为底层直接用Host的kernel,自己只需要提供rootFS就可以了。由此可见对于不同的linux发行版,bootfs基本是一致的,rootfs会有差别,因此不同的发行版可以共用bootfs</p>
<h4 id="3-分层理解"><a href="#3-分层理解" class="headerlink" title="3.分层理解"></a>3.分层理解</h4><h5 id="分层的镜像"><a href="#分层的镜像" class="headerlink" title="分层的镜像"></a>分层的镜像</h5><p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625213443543.png" alt="image-20210625213443543"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 思考: 为什么Docker镜像要采用这种分层的结构呢?</span></span><br><span class="line">	最大好处,我觉得莫过于资源共享了!比如有多个镜像都从相同的Base镜像构建而来,那么宿主机</span><br><span class="line"></span><br><span class="line">只需在磁盘上保留一份base镜像,同时内存中也只需要加载一份base镜像,这样就可以为所有的容器服务了,而且镜像的每一层都可以被共享</span><br><span class="line"></span><br><span class="line">查看镜像分层的方式可以通过 docker image inspect 命令</span><br><span class="line"></span><br><span class="line">[root@CZP ~]# docker images</span><br><span class="line">REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">nginx                 latest              2622e6cca7eb        32 hours ago        132MB</span><br><span class="line">portainer/portainer   latest              cd645f5a4769        9 days ago          79.1MB</span><br><span class="line">redis                 latest              36304d3b4540        13 days ago         104MB</span><br><span class="line">...</span><br><span class="line">[root@CZP ~]# docker image inspect redis</span><br><span class="line">[</span><br><span class="line">        &quot;RootFS&quot;: &#123;</span><br><span class="line">            &quot;Type&quot;: &quot;layers&quot;,</span><br><span class="line">            &quot;Layers&quot;: [</span><br><span class="line">                &quot;sha256:ffc9b21953f4cd7956cdf532a5db04ff0a2daa7475ad796f1bad58cfbaf77a07&quot;,</span><br><span class="line">                &quot;sha256:d4e681f320297add0ede0554524eb9106d8c3eb3a43e6e99d79db6f76f020248&quot;,</span><br><span class="line">                &quot;sha256:59bd5a888296b623ae5a9efc8f18285c8ac1a8662e5d3775a0d2d736c66ba825&quot;,</span><br><span class="line">                &quot;sha256:c112794a20c5eda6a791cbec8700fb98eab30671a2248ac7e2059b475c46c45f&quot;,</span><br><span class="line">                &quot;sha256:bf8b736583f08c02b92f8a75ac5ea181e4d74107876177caa80ddad8b6b57a72&quot;,</span><br><span class="line">                &quot;sha256:6ef422d19214800243b28017d346c7ab9bfe63cb198a39312d1714394b232449&quot;</span><br><span class="line">            ]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h5 id="理解"><a href="#理解" class="headerlink" title="理解"></a>理解</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">	所有的镜像都起始于一个基础镜像层,当进行修改或增加新的内容时,就会在当前镜像层之上,创建一个新的镜像层</span><br><span class="line"></span><br><span class="line">	举一个简单的例子,假如基于Ubuntu Linux 16.64创建一个新的镜像,这就是新镜像的第一层,如果在该镜像中添加python包,就会在该镜像之上创建第二个镜像层; 如果继续添加一个安全补丁,就会创建第三个镜像层</span><br><span class="line"></span><br><span class="line">该镜像已经包含3个镜像层,如下图所示(这只是一个简单的例子)</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625213609656.png" alt="image-20210625213609656"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在添加额外的镜像层的同时,镜像始终保持是当前所有镜像的组合,理解这一点非常重要,下图举了一个简单的例子,每个镜像层包含3个文件,而镜像包含了两个镜像层的6个文件</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625213631474.png" alt="image-20210625213631474"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">上图中的镜像层跟之前图中的略有区别,主要是便于展示文件</span><br><span class="line"></span><br><span class="line">下图中展示了一个稍微复杂的三层镜像,在外部看来整个镜像只有6个文件,这是因为最上层的文件7是文件5的一个更新版本</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625213700157.png" alt="image-20210625213700157"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">	这种情况下,上层镜像层中的文件覆盖了底层镜像层中的文件,这样就使得文件的更新版本作为一个新镜像层添加到镜像当中</span><br><span class="line"></span><br><span class="line">	Docker通过存储引擎(新版本采用快照机制)的方式来实现镜像层堆栈,并保证多层镜像层对外展示为统一的文件系统</span><br><span class="line"></span><br><span class="line">	Lunux上可用的存储引擎有AUFS,Overlay2,Device Mapper,Btrfs以及ZFS,顾名思义,每种存储引擎都是基于Linux对应的文件系统或者块设备技术,并且每种存储引擎都有其独有的性能特点</span><br><span class="line"></span><br><span class="line">	Docker在Windows上仅支持windosfilter一种存储引擎,该引擎基于NTFS文件系统之上实现了分层和CoW[1]</span><br><span class="line"></span><br><span class="line">下图展示了与系统显示相同的三层镜像,所有的镜像层堆叠合并,对外提供统一的视图层</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625213730502.png" alt="image-20210625213730502"></p>
<h5 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Docker镜像都是只读的,当容器启动时,一个新的可写层被加载到镜像的顶部!</span><br><span class="line">这一层就是我们通常所说的容器层,容器之下的都叫镜像层</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625213822039.png" alt="image-20210625213822039"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 如何提交一个自己的镜像?</span></span><br></pre></td></tr></table></figure>

<h3 id="3-commit镜像-构建镜像"><a href="#3-commit镜像-构建镜像" class="headerlink" title="3.commit镜像(构建镜像)"></a>3.commit镜像(构建镜像)</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> docker commit 提交容器成为一个新的镜像</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">命令和git原理类似</span></span><br><span class="line">	docker commit -m=&quot;提交的描述信息&quot; -a=&quot;作者&quot; 容器ID 目标镜像名:[tag]</span><br><span class="line"><span class="meta">	</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> eg:</span></span><br><span class="line">	[root@CZP ~]# docker ps</span><br><span class="line">94b00b6f6172        tomcat:9.0            &quot;catalina.sh run&quot;        17 hours ago        Up 17 hours         0.0.0.0:8080-&gt;8080/tcp                           tomcat</span><br><span class="line">d458bc50a808        nginx                 &quot;/docker-entrypoint.…&quot;   18 hours ago        Up 18 hours         0.0.0.0:80-&gt;80/tcp                               nginx01</span><br><span class="line">63d4c4115212        36304d3b4540          &quot;docker-entrypoint.s…&quot;   22 hours ago        Up 22 hours         0.0.0.0:6379-&gt;6379/tcp                           redis</span><br><span class="line">[root@CZP ~]# docker commit -a=&quot;czp&quot; -m=&quot;add basic webapps app&quot; 94b00b6f6172 tomcat_9.0:1.0</span><br><span class="line">sha256:75e6ea173695b146c9ddf9d5865e7bdeb78e69c84d2d3520e516cd9f498a1e9a</span><br><span class="line">[root@CZP ~]# docker images</span><br><span class="line">REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">tomcat_9.0            1.0                 75e6ea173695        8 seconds ago       652MB</span><br><span class="line">nginx                 latest              2622e6cca7eb        33 hours ago        132MB</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/10/Redis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="左大大">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="左大大的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/10/Redis/" class="post-title-link" itemprop="url">Redis</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-10 18:20:25" itemprop="dateCreated datePublished" datetime="2020-08-10T18:20:25+08:00">2020-08-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Redis/" itemprop="url" rel="index"><span itemprop="name">Redis</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h1><h2 id="1-Redis介绍和安装"><a href="#1-Redis介绍和安装" class="headerlink" title="1.Redis介绍和安装"></a>1.Redis介绍和安装</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 参考:</span></span><br><span class="line">	https://www.cnblogs.com/liuqingzheng/articles/<span class="number">9833534.</span>html</span><br><span class="line">        </span><br><span class="line"><span class="comment"># redis:</span></span><br><span class="line">	是一个key-value存储系统,非关系型数据库(nosql数据库),数据存在于内存中,缓存数据库</span><br><span class="line">    </span><br><span class="line"><span class="comment"># redis支持5大数据类型:</span></span><br><span class="line">	字符串,列表,<span class="built_in">hash</span>(字典),集合,有序集合</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用Redis有哪些好处?</span></span><br><span class="line">	<span class="number">1.</span>速度快：缓存数据库(内存)</span><br><span class="line">    <span class="number">2.</span>支持丰富数据类型：<span class="number">5</span>大数据类型</span><br><span class="line">    <span class="number">3.</span>支持事务：通过管道实现(单实例上有效)</span><br><span class="line">    <span class="number">4.</span>丰富的特性：可用于缓存,消息队列，按key设置过期时间，过期自动删除</span><br><span class="line">    </span><br><span class="line"><span class="comment"># redis对比memcached?</span></span><br><span class="line">	相同点:</span><br><span class="line">        两者都是内存数据库</span><br><span class="line">    不同点:</span><br><span class="line">        <span class="number">1.</span>redis类型丰富,有<span class="number">5</span>大类型,但memcached只支持字符串类型</span><br><span class="line">    	<span class="number">2.</span>redis支持持久化,但memcached不支持持久化</span><br><span class="line">    	<span class="number">3.</span>redis速度比mencached快</span><br><span class="line">    </span><br><span class="line"><span class="comment"># redis特点</span></span><br><span class="line">	<span class="number">1.</span>可以持久化</span><br><span class="line">	<span class="number">2.</span>单线程，单进程</span><br><span class="line">    	-redis最新版本是<span class="number">6.</span>x</span><br><span class="line">        -<span class="number">6.</span>x之前是单线程，单进程</span><br><span class="line">        </span><br><span class="line"><span class="comment"># redis单线程为什么这么快？并发量：10w(实际6w左右)</span></span><br><span class="line">	<span class="number">1.</span>纯内存操作</span><br><span class="line">    <span class="number">2.</span>使用了io多路复用模型(自身使用epoll   windows使用select)</span><br><span class="line">    <span class="number">3.</span>因为是单线程，不存在线程间切换，节省资源</span><br><span class="line">    </span><br><span class="line"><span class="comment"># redis服务:</span></span><br><span class="line">	客户端,服务端(同mysql,是存数据的地方)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># redis安装:</span></span><br><span class="line">	<span class="number">1.</span>redis使用c语言写的,开源,它不支持windows</span><br><span class="line">    <span class="number">2.</span>第三方,基于redis源码，自行修改，编译成windows平台可以运行的(win平台：维护到 <span class="number">3.</span>x版本),以<span class="number">3.</span>x为例</span><br><span class="line">    </span><br><span class="line"><span class="comment"># redis官网:</span></span><br><span class="line">	http://redis.cn/</span><br><span class="line">    	<span class="number">1.</span>官网提供了c源码，需要自行下载，编译</span><br><span class="line">    	<span class="number">2.</span>win平台,自己找一个安装包(非官方提供)</span><br><span class="line">        </span><br><span class="line">    https://github.com/microsoftarchive/redis</span><br><span class="line">        <span class="number">1.</span>Redis-x64-<span class="number">3.2</span><span class="number">.100</span>.msi：</span><br><span class="line">        	安装一路下一步</span><br><span class="line">        <span class="number">2</span>图形化界面的客户端：redis-desktop-manager：</span><br><span class="line">        	一开始免费，后来收费了;安装一路下一步</span><br><span class="line">        </span><br><span class="line"><span class="comment"># redis监听端口默认是:</span></span><br><span class="line">	<span class="number">6379</span></span><br><span class="line">   </span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动redis服务</span></span><br><span class="line">	方法一:</span><br><span class="line">        在任意路径下敲：redis-server    <span class="comment"># 等同于mysqld</span></span><br><span class="line">    方法二:</span><br><span class="line">        win平台，已经做成了服务，把服务启动即可</span><br><span class="line">    	-<span class="string">&quot;D:\Program Files\Redis\redis-server.exe&quot;</span> --service-run <span class="string">&quot;D:\Program Files\Redis\redis.windows-service.conf&quot;</span></span><br><span class="line"><span class="comment"># 客户端连接</span></span><br><span class="line">	-第一种方式：在任意路径下敲：redis-cli -h <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> -p <span class="number">6379</span>   <span class="comment"># 等同于  mysql -h -P</span></span><br><span class="line">    	-如果连本地的<span class="number">6379</span>端口，直接敲redis-cli</span><br><span class="line">    -使用客户端连接</span><br><span class="line">    -使用python操作：pip3 install redis</span><br></pre></td></tr></table></figure>

<h2 id="1-2普通连接和连接池"><a href="#1-2普通连接和连接池" class="headerlink" title="1.2普通连接和连接池"></a>1.2普通连接和连接池</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># redis普通连接</span></span><br><span class="line">	<span class="keyword">from</span> redis <span class="keyword">import</span> Redis</span><br><span class="line">	<span class="comment"># 1.先拿到一个redis连接</span></span><br><span class="line">	conn=Redis(host=<span class="string">&#x27;127.0.0.1&#x27;</span>,port=<span class="number">6380</span>) <span class="comment"># 自行指定端口(默认6379)</span></span><br><span class="line">	<span class="comment"># conn=Redis()</span></span><br><span class="line">    </span><br><span class="line">	<span class="comment"># 2.操作redis</span></span><br><span class="line">	conn.<span class="built_in">set</span>(<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;lqz&#x27;</span>)	<span class="comment"># set设置值</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 3.关闭redis</span></span><br><span class="line">	conn.close()</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="comment"># redis连接池</span></span><br><span class="line">	<span class="keyword">import</span> redis</span><br><span class="line">	<span class="comment"># 1.生成一个连接数为3的连接池</span></span><br><span class="line">    POOL=redis.ConnectionPool(max_connections=<span class="number">3</span>,host=<span class="string">&#x27;127.0.0.1&#x27;</span>, port=<span class="number">6380</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment"># 2.从连接池中拿出一个连接，给conn</span></span><br><span class="line">	conn=redis.Redis(connection_pool=POOL)</span><br><span class="line">    </span><br><span class="line">	<span class="comment"># 3.操作redis</span></span><br><span class="line">	conn.get(<span class="string">&#x27;name&#x27;</span>) <span class="comment"># get获取值</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 4.关闭redis</span></span><br><span class="line">	conn.close()  <span class="comment"># 不是关闭连接，把该连接，放回到连接池</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 把POOL以单例形式使用(以模块导入方式)</span></span><br><span class="line">    <span class="keyword">import</span> redis</span><br><span class="line">	</span><br><span class="line">    <span class="keyword">from</span> pool <span class="keyword">import</span> POOL 	<span class="comment"># 以模块形式导入，是天然单例</span></span><br><span class="line">    conn=redis.Redis(connection_pool=POOL)</span><br><span class="line">    <span class="comment"># conn2=redis.Redis(connection_pool=POOL)</span></span><br><span class="line">    <span class="comment"># conn3=redis.Redis(connection_pool=POOL)</span></span><br><span class="line">    <span class="comment"># conn4=redis.Redis(connection_pool=POOL)</span></span><br><span class="line"></span><br><span class="line">    conn.<span class="built_in">set</span>(<span class="string">&#x27;age&#x27;</span>,<span class="number">19</span>)</span><br><span class="line">    conn.close()  <span class="comment"># 不是关闭连接，把该连接，放回到连接池</span></span><br></pre></td></tr></table></figure>

<h2 id="3-Redis-五大数据类型"><a href="#3-Redis-五大数据类型" class="headerlink" title="3.Redis 五大数据类型"></a>3.Redis 五大数据类型</h2><h3 id="3-1字符串"><a href="#3-1字符串" class="headerlink" title="3.1字符串"></a>3.1字符串</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span>(name, value, ex=<span class="literal">None</span>, px=<span class="literal">None</span>, nx=<span class="literal">False</span>, xx=<span class="literal">False</span>)   <span class="comment"># 重点	设值</span></span><br><span class="line">mset(*args, **kwargs)         		<span class="comment"># 重点	批量设值</span></span><br><span class="line">get(name)                    		<span class="comment"># 重点	取值</span></span><br><span class="line">mget(keys, *args)             		<span class="comment"># 重点	批量取值</span></span><br><span class="line">strlen(name)                     	<span class="comment"># 重点	获取&#x27;name&#x27;字节长度</span></span><br><span class="line">incr(self, name, amount=<span class="number">1</span>)          <span class="comment"># 重点	指定&#x27;name&#x27;自增,默认自增一</span></span><br><span class="line"></span><br><span class="line">setnx(name, value)</span><br><span class="line">setex(name, value, time)</span><br><span class="line">psetex(name, time_ms, value)</span><br><span class="line">getset(name, value)</span><br><span class="line">getrange(key, start, end)</span><br><span class="line">setrange(name, offset, value)</span><br><span class="line">setbit(name, offset, value)</span><br><span class="line">getbit(name, offset)</span><br><span class="line">bitcount(key, start=<span class="literal">None</span>, end=<span class="literal">None</span>)</span><br><span class="line">incrbyfloat(self, name, amount=<span class="number">1.0</span>)</span><br><span class="line">decr(self, name, amount=<span class="number">1</span>)</span><br><span class="line">append(key, value)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"></span><br><span class="line">conn=redis.Redis()</span><br><span class="line"></span><br><span class="line"><span class="comment"># set:放字符串值</span></span><br><span class="line">	参数详解:</span><br><span class="line">		ex:过期时间（秒）</span><br><span class="line">		px:过期时间（毫秒）</span><br><span class="line">		nx:若设置为<span class="literal">True</span>,只有name不存在时,当前<span class="built_in">set</span>操作才执行,存在,不修改,执行无效果</span><br><span class="line">		xx:若设置为<span class="literal">True</span>,只有name存在时,当前<span class="built_in">set</span>操作才执行，存在,修改,不存在,不会设置新值</span><br><span class="line"></span><br><span class="line"><span class="comment"># conn.set(&#x27;name&#x27;,&#x27;lqz&#x27;)</span></span><br><span class="line"><span class="comment"># res=conn.set(&#x27;name&#x27;,&#x27;lqz&#x27;,ex=3)</span></span><br><span class="line"><span class="comment"># res=conn.set(&#x27;name&#x27;,&#x27;lqz&#x27;,px=3000)</span></span><br><span class="line"><span class="comment"># res=conn.set(&#x27;name&#x27;,&#x27;lqz&#x27;)</span></span><br><span class="line"><span class="comment"># res=conn.set(&#x27;name&#x27;,&#x27;egon&#x27;)</span></span><br><span class="line"><span class="comment"># res=conn.set(&#x27;name&#x27;,&#x27;lqz&#x27;,nx=True)</span></span><br><span class="line"><span class="comment"># res=conn.set(&#x27;name&#x27;,&#x27;19&#x27;,xx=True)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># get 获取值</span></span><br><span class="line"><span class="comment"># res=conn.get(&#x27;name&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># mset 批量设置值</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># conn.mset(&#123;&#x27;name&#x27;:&#x27;lqz&#x27;,&#x27;age&#x27;:19,&#x27;sex&#x27;:&#x27;男&#x27;&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># mget  批量获取值</span></span><br><span class="line"><span class="comment"># res=conn.mget([&#x27;name&#x27;,&#x27;age&#x27;])</span></span><br><span class="line"><span class="comment"># res=conn.mget(&#x27;name&#x27;,&#x27;age&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># conn.setex(name, value, time)</span></span><br><span class="line"><span class="comment"># conn.psetex(name, time_ms, value)</span></span><br><span class="line"><span class="comment"># conn.set(name, valeu, px=time)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># res=conn.getset(&#x27;name&#x27;, &#x27;刘亦菲&#x27;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># res=conn.getrange(&#x27;name&#x27;,3,5)  #前闭后闭区间 拿字节</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># print(str(res,encoding=&#x27;utf-8&#x27;))</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># res=conn.setrange(&#x27;name&#x27;,0,&#x27;lqzzzzzzz&#x27;)</span></span><br><span class="line"><span class="comment"># res=conn.setrange(&#x27;name&#x27;,0,&#x27;qq&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##获取和设置比特位</span></span><br><span class="line"><span class="comment"># setbit(name, offset, value)</span></span><br><span class="line"><span class="comment"># getbit(name, offset)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(conn.getbit(&#x27;name&#x27;,3))</span></span><br><span class="line"><span class="comment"># conn.setbit(&#x27;name&#x27;,0,1)</span></span><br><span class="line"><span class="comment"># print(conn.getbit(&#x27;name&#x27;,0))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(conn.strlen(&#x27;name&#x27;))  # 指的是字节     获取字节长度</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># conn.incr(&#x27;age&#x27;)   # 让该键自增1</span></span><br><span class="line"><span class="comment"># conn.incrby(&#x27;age&#x27;,3)   # 让该键自增3</span></span><br><span class="line"><span class="comment"># conn.incrbyfloat(&#x27;age&#x27;, amount=1.1)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">conn.append(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;nb&#x27;</span>)</span><br><span class="line"></span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure>

<h3 id="3-2hash-字典"><a href="#3-2hash-字典" class="headerlink" title="3.2hash(字典)"></a>3.2hash(字典)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">hset(name, key, value)   			<span class="comment"># 重点	设值</span></span><br><span class="line">hmset(name, mapping)   				<span class="comment"># 重点	批量设值</span></span><br><span class="line">hget(name,key)        				<span class="comment"># 重点	取值</span></span><br><span class="line">hmget(name, keys, *args)  			<span class="comment"># 重点	批量取值</span></span><br><span class="line">hlen(name)              			<span class="comment"># 重点	计算长度</span></span><br><span class="line">hincrby(name, key, amount=<span class="number">1</span>)   		<span class="comment"># 重点	自增</span></span><br><span class="line"></span><br><span class="line">hgetall(name)</span><br><span class="line">hkeys(name)</span><br><span class="line">hvals(name)</span><br><span class="line">hexists(name, key)</span><br><span class="line">hdel(name,*keys)</span><br><span class="line">hincrbyfloat(name, key, amount=<span class="number">1.0</span>)</span><br><span class="line">hscan(name, cursor=<span class="number">0</span>, match=<span class="literal">None</span>, count=<span class="literal">None</span>)</span><br><span class="line">hscan_iter(name, match=<span class="literal">None</span>, count=<span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"></span><br><span class="line">conn=redis.Redis()</span><br><span class="line"></span><br><span class="line"><span class="comment"># conn.hset(&#x27;users&#x27;,&#x27;name&#x27;,&#x27;egon&#x27;)</span></span><br><span class="line"><span class="comment"># conn.hset(&#x27;users&#x27;,&#x27;age&#x27;,&#x27;19&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># res=conn.hget(&#x27;users&#x27;,&#x27;age&#x27;)</span></span><br><span class="line"><span class="comment"># res=conn.hget(&#x27;users&#x27;,&#x27;name&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># conn.hmset(&#x27;h1&#x27;,&#123;&#x27;name&#x27;:&#x27;lqz&#x27;,&#x27;age&#x27;:19&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># res=conn.hmget(&#x27;h1&#x27;,[&#x27;name&#x27;,&#x27;age&#x27;])</span></span><br><span class="line"><span class="comment"># res=conn.hmget(&#x27;h1&#x27;,&#x27;name&#x27;,&#x27;age&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># res=conn.hlen(&#x27;users&#x27;)  # 统计键值对的个数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># res=conn.hkeys(&#x27;users&#x27;)</span></span><br><span class="line"><span class="comment"># res=conn.hvals(&#x27;users&#x27;)</span></span><br><span class="line"><span class="comment"># hvals(name)</span></span><br><span class="line"><span class="comment"># print(str(res[2],encoding=&#x27;utf-8&#x27;))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># res=conn.hexists(&#x27;users&#x27;,&#x27;age1&#x27;)</span></span><br><span class="line"><span class="comment"># res=conn.hdel(&#x27;users&#x27;,&#x27;age&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># conn.hincrby(&#x27;h1&#x27;, &#x27;age&#x27;,7)</span></span><br><span class="line"><span class="comment"># conn.hincrbyfloat(&#x27;h1&#x27;, &#x27;age&#x27;, amount=-1.01)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for i in range(1000):</span></span><br><span class="line"><span class="comment">#     conn.hset(&#x27;htest&#x27;,i,&#x27;第%s个鸡蛋&#x27;%i)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###hash（字典）类型是无序的</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># res=conn.hgetall(&#x27;htest&#x27;)</span></span><br><span class="line"><span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># res=conn.hscan(&#x27;htest&#x27;, cursor=0,count=500)  # 用的少</span></span><br><span class="line"><span class="comment"># print(res)</span></span><br><span class="line"><span class="comment"># res=conn.hscan(&#x27;htest&#x27;, cursor=254,count=499)  # 用的少</span></span><br><span class="line"><span class="comment"># print(res)</span></span><br><span class="line"><span class="comment"># res=conn.hscan(&#x27;htest&#x27;, cursor=511,count=2)  # 用的少</span></span><br><span class="line"><span class="comment"># print(res)</span></span><br><span class="line"><span class="comment"># print(res)</span></span><br><span class="line"><span class="comment"># print(len(res[1]))</span></span><br><span class="line"></span><br><span class="line">res=conn.hscan_iter(<span class="string">&#x27;htest&#x27;</span>, count=<span class="number">20</span>)   <span class="comment"># 把hash类型的所有数据都打印出来，比hgetall节省内存</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> res:</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">str</span>(item[<span class="number">1</span>],encoding=<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure>

<h3 id="3-3列表"><a href="#3-3列表" class="headerlink" title="3.3列表"></a>3.3列表</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">llen(name)           					<span class="comment"># 重点	计算长度</span></span><br><span class="line">linsert(name, where, refvalue, value)  	<span class="comment"># 重点	指定位置插值</span></span><br><span class="line"></span><br><span class="line">lpush(name,values)   			<span class="comment"># 设值,自左向右依次放在第一个位置</span></span><br><span class="line">rpush(name,values)   			<span class="comment"># 设值,自右向左依次放在第一个位置</span></span><br><span class="line">lpushx(name,value)				<span class="comment"># 设值,从第一个位置放入</span></span><br><span class="line">lset(name, index, value)		<span class="comment"># 指定索引位置并放入值</span></span><br><span class="line">lrem(name, count, value)        <span class="comment"># 删除值</span></span><br><span class="line">lpop(name)             			<span class="comment"># 从左侧弹出</span></span><br><span class="line">lindex(name, index)</span><br><span class="line">lrange(name, start, end)		<span class="comment"># 取索引范围内的值,前闭后闭</span></span><br><span class="line">ltrim(name, start, end)</span><br><span class="line">rpoplpush(src, dst)</span><br><span class="line">blpop(keys, timeout)          	<span class="comment"># 阻塞式弹出</span></span><br><span class="line">brpoplpush(src, dst, timeout=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"></span><br><span class="line">conn=redis.Redis()</span><br><span class="line"></span><br><span class="line"><span class="comment"># conn.lpush(&#x27;list1&#x27;,&#x27;1&#x27;)  #左侧插入，上部</span></span><br><span class="line"><span class="comment"># conn.lpush(&#x27;list1&#x27;,&#x27;lqz&#x27;)</span></span><br><span class="line"><span class="comment"># conn.rpush(&#x27;list1&#x27;,&#x27;egon&#x27;)  #右侧插入，下部</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># conn.rpushx(&#x27;list1&#x27;,&#x27;刘亦菲&#x27;)  # 只有name存在才能插入</span></span><br><span class="line"><span class="comment"># conn.lpushx(&#x27;list2&#x27;,&#x27;刘亦菲&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(conn.llen(&#x27;list1&#x27;))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># conn.linsert(&#x27;list1&#x27;,&#x27;before&#x27;,&#x27;egon&#x27;,&#x27;迪丽热巴&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># conn.linsert(&#x27;list1&#x27;,&#x27;AFTER&#x27;,&#x27;egon&#x27;,&#x27;古力娜扎&#x27;)</span></span><br><span class="line"><span class="comment"># conn.linsert(&#x27;list1&#x27;,&#x27;AFTER&#x27;,&#x27;1&#x27;,&#x27;99999&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># conn.lset(&#x27;list1&#x27;,3,66666) # 修改某个位置的值</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果count=0,表示删除所有符合条件的，删除所有66666</span></span><br><span class="line"><span class="comment"># conn.lrem(&#x27;list1&#x27;,0,&#x27;66666&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果count=1，表示从左侧删除1个符合条件的，删除1个99999</span></span><br><span class="line"><span class="comment"># conn.lrem(&#x27;list1&#x27;,1,&#x27;99999&#x27;)</span></span><br><span class="line"><span class="comment"># 如果count=-2，表示从底部，从右侧，删除符合条件的2个</span></span><br><span class="line"><span class="comment"># conn.lrem(&#x27;list1&#x27;,-2,&#x27;99999&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># res=conn.lpop(&#x27;list1&#x27;)</span></span><br><span class="line"><span class="comment"># res=conn.rpop(&#x27;list1&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># res=conn.lindex(&#x27;list1&#x27;,1)  #返回某个索引的值  列表操作 l[0]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># res=conn.lrange(&#x27;list1&#x27;, 0, 4)  # 前闭后闭</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># res=conn.ltrim(&#x27;list1&#x27;, 1, 3)  #修剪，不符合范围的都删除，前闭后闭</span></span><br><span class="line"><span class="comment"># conn.lpush(&#x27;list2&#x27;,&#x27;李易峰&#x27;,&#x27;刘亦菲&#x27;,&#x27;迪丽热巴&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># conn.rpoplpush(&#x27;list1&#x27;, &#x27;list2&#x27;)</span></span><br><span class="line"></span><br><span class="line">res=conn.blpop(<span class="string">&#x27;list2&#x27;</span>,timeout=<span class="number">2</span>)   <span class="comment"># 阻塞式弹出,通过它做一些分布式任务，可以用来做消息队列</span></span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"></span><br><span class="line"><span class="comment"># brpoplpush(src, dst, timeout=0)</span></span><br><span class="line"></span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure>

<h3 id="3-4其他操作-通用"><a href="#3-4其他操作-通用" class="headerlink" title="3.4其他操作(通用)"></a>3.4其他操作(通用)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">delete(*names)			<span class="comment"># 根据删除redis中的任意数据类型</span></span><br><span class="line">exists(name)			<span class="comment"># 检测redis的name是否存在</span></span><br><span class="line">keys(pattern=<span class="string">&#x27;*&#x27;</span>)		<span class="comment"># 根据模型获取redis的name</span></span><br><span class="line">expire(name ,time)		<span class="comment"># 为某个redis的某个name设置超时时间</span></span><br><span class="line">rename(src, dst)		<span class="comment"># 对redis的name重命名为</span></span><br><span class="line">move(name, db)			<span class="comment"># 将redis的某个值移动到指定的db下</span></span><br><span class="line">randomkey()				<span class="comment"># 随机获取一个redis的name（不删除）</span></span><br><span class="line"><span class="built_in">type</span>(name)				<span class="comment"># 查看类型</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通用操作</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"></span><br><span class="line">conn=redis.Redis()</span><br><span class="line"><span class="comment"># conn.delete(&#x27;h1&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(conn.exists(&#x27;name&#x27;))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># res=conn.keys(&#x27;list*&#x27;)</span></span><br><span class="line"><span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># conn.expire(&#x27;list1&#x27;,3)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># conn.rename(&#x27;sex&#x27;,&#x27;sex111&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># conn.move(&#x27;sex111&#x27;,2)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># res=conn.randomkey()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># res=conn.type(&#x27;users&#x27;)</span></span><br><span class="line">res=conn.<span class="built_in">type</span>(<span class="string">&#x27;name&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure>

<h2 id="4-管道-事务的实现"><a href="#4-管道-事务的实现" class="headerlink" title="4.管道(事务的实现)"></a>4.管道(事务的实现)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 借助于管道实现</span></span><br><span class="line">    <span class="keyword">import</span> redis</span><br><span class="line">    conn=redis.Redis()</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 开启一个管道</span></span><br><span class="line">    pip_line=conn.pipeline(transaction=<span class="literal">True</span>)  	</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 往管道中放一个命令</span></span><br><span class="line">    pip_line.decr(<span class="string">&#x27;zhangsan&#x27;</span>,<span class="number">100</span>)     </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">raise</span> Exception(<span class="string">&#x27;程序崩了&#x27;</span>)		<span class="comment"># 上下两个命令都不会执行</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 往管道中放一个命令</span></span><br><span class="line">    pip_line.incrby(<span class="string">&#x27;wo&#x27;</span>,<span class="number">100</span>)     </span><br><span class="line">    </span><br><span class="line">	<span class="comment"># 把管道中的命令一次性执行</span></span><br><span class="line">    pip_line.execute()                       	</span><br><span class="line"></span><br><span class="line">    conn.close()</span><br></pre></td></tr></table></figure>

<h2 id="5-Django使用Redis"><a href="#5-Django使用Redis" class="headerlink" title="5.Django使用Redis"></a>5.Django使用Redis</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方式一:</span></span><br><span class="line">	通用方式,任何web框架都实用</span><br><span class="line">    <span class="keyword">from</span> luffy_api.utils.pool <span class="keyword">import</span> POOL</span><br><span class="line">    <span class="keyword">import</span> redis</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">index</span>(<span class="params">request</span>):</span></span><br><span class="line">    	<span class="comment"># 从连接池中取出一个连接并使用</span></span><br><span class="line">        conn=redis.Redis(connection_pool=POOL)</span><br><span class="line">        res=conn.get(<span class="string">&#x27;name&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">        <span class="built_in">print</span>(res)</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;ok&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment"># 方式二:</span></span><br><span class="line">	Django提供</span><br><span class="line">    <span class="number">1.</span>安装django_redis模块</span><br><span class="line">    	pip3 install django_redis</span><br><span class="line">        </span><br><span class="line">    <span class="number">2.</span>配置文件中配置,如下:</span><br><span class="line">    	CACHES = &#123;</span><br><span class="line">            <span class="string">&quot;default&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;BACKEND&quot;</span>: <span class="string">&quot;django_redis.cache.RedisCache&quot;</span>,</span><br><span class="line">                <span class="string">&quot;LOCATION&quot;</span>: <span class="string">&quot;redis://127.0.0.1:6379&quot;</span>,</span><br><span class="line">                <span class="string">&quot;OPTIONS&quot;</span>: &#123;</span><br><span class="line">                    <span class="string">&quot;CLIENT_CLASS&quot;</span>: <span class="string">&quot;django_redis.client.DefaultClient&quot;</span>,</span><br><span class="line">                    <span class="comment"># 连接池大小为100</span></span><br><span class="line">                    <span class="string">&quot;CONNECTION_POOL_KWARGS&quot;</span>: &#123;<span class="string">&quot;max_connections&quot;</span>: <span class="number">100</span>&#125;  </span><br><span class="line">                    <span class="comment"># &quot;PASSWORD&quot;: &quot;123&quot;,  # 有密码就写密码</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;	</span><br><span class="line">        </span><br><span class="line">     <span class="number">3.</span>使用:</span><br><span class="line">        <span class="keyword">from</span> django_redis <span class="keyword">import</span> get_redis_connection</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">index</span>(<span class="params">request</span>):</span></span><br><span class="line">            conn=get_redis_connection()</span><br><span class="line">            res=conn.get(<span class="string">&#x27;name&#x27;</span>)</span><br><span class="line">            <span class="built_in">print</span>(res)</span><br><span class="line">            <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;okkkkk&#x27;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 注意:</span></span><br><span class="line">    一旦这样配置,django中的缓存,也会使用redis</span><br><span class="line">    eg:</span><br><span class="line">        cache.<span class="built_in">set</span>(<span class="string">&#x27;key&#x27;</span>,python的任意对象)</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/06/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="左大大">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="左大大的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/06/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">Docker常用命令</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-06 18:20:25" itemprop="dateCreated datePublished" datetime="2020-08-06T18:20:25+08:00">2020-08-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Docker常用命令"><a href="#Docker常用命令" class="headerlink" title="Docker常用命令"></a>Docker常用命令</h1><h2 id="1-Docker概述"><a href="#1-Docker概述" class="headerlink" title="1.Docker概述"></a>1.Docker概述</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Docker为什么会出现?</span><br><span class="line">	一款产品:开发-上线 两套环境,应用配置!</span><br><span class="line">	开发 — 运维 问题: 项目在我的电脑上可以运行!版本更新,导致服务不可用!对于运维来说,考验就十分大</span><br><span class="line">	环境配置是十分的麻烦.每一个机器都要部署环境(集群Redis, ES, Hadoop…)! 费时费力</span><br><span class="line">	发布一个项目(Jar+ (Redis,ES, Hadoop)),项目为什么不带上环境安装打包</span><br><span class="line">	在服务器上配置十分麻烦,不能够跨平台</span><br><span class="line">	Windows开发,发布到Linux</span><br><span class="line">		传统开发: 开发人员做项目,运维人员做部署</span><br><span class="line">		现在: 开发打包部署上线,一套流程做完</span><br><span class="line"></span><br><span class="line">java – apk – 发布(应用商店) --使用者使用apk-- 安装即用</span><br><span class="line">java — jar(环境) — 打包上线自带环境(镜像) —(Docker仓库: 商店) — 下载我们发布的镜像 — 直接运行即可</span><br><span class="line"></span><br><span class="line">Docker是基于Go语言开发的开源项目!</span><br><span class="line"></span><br><span class="line">官网: https://www.docker.com/ </span><br><span class="line">文档地址: https://docs.docker.com/get-docker/</span><br><span class="line">仓库地址: https://hub.docker.com/</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625205617881.png" alt="image-20210625205617881"></p>
<h3 id="Docker能干嘛"><a href="#Docker能干嘛" class="headerlink" title="Docker能干嘛?"></a>Docker能干嘛?</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">之前的虚拟机技术</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625205845101.png" alt="image-20210625205845101"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 虚拟机技术缺点:</span></span><br><span class="line">	1. 资源占用十分多</span><br><span class="line">    2. 冗余技术多</span><br><span class="line">    3. 启动很慢</span><br><span class="line">    </span><br><span class="line">容器化技术:</span><br><span class="line">	容器化技术不是一个完整的操作系统</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625205941342.png" alt="image-20210625205941342"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 比较Docker和虚拟机技术的不同</span></span><br><span class="line">    传统的虚拟机,虚拟出一条硬件,运行一个完整的操作系统,然后在这个系统上安装和运行软件</span><br><span class="line">    每个容器间都是互相隔离的,每一个容器内都有一个属于自己的文件系统,互不影响</span><br><span class="line">    容器内的应用直接运行在宿主机的内容,容器是没有自己的内核的,也没有虚拟我们的硬件,所以就轻便了</span><br></pre></td></tr></table></figure>

<h3 id="DevOps-开发-运维"><a href="#DevOps-开发-运维" class="headerlink" title="DevOps(开发,运维)"></a>DevOps(开发,运维)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">更快速的交付和部署:</span><br><span class="line">    传统: 一堆帮助文档,安装程序</span><br><span class="line">    Docker: 一键运行打包镜像发布测试</span><br><span class="line"></span><br><span class="line">更便捷的升级和扩缩容:</span><br><span class="line">    使用了Docker之后,我们部署应用就像搭积木一样!</span><br><span class="line">    项目打包为一个镜像,扩展,服务器A!服务器B</span><br><span class="line"></span><br><span class="line">更简单的系统运维:</span><br><span class="line">    在容器化之后,我们开发,测试环境都是高度一致的</span><br><span class="line">    更高效的计算资源利用:</span><br><span class="line"></span><br><span class="line">Docker是内核级别的虚拟化, 可以在一个物理机上运行很多的容器实例! 服务器的性能可以被压榨到极致</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="2-Docker安装"><a href="#2-Docker安装" class="headerlink" title="2.Docker安装"></a>2.Docker安装</h2><h3 id="Docker基本组成-三大核心"><a href="#Docker基本组成-三大核心" class="headerlink" title="Docker基本组成(三大核心)"></a>Docker基本组成(三大核心)</h3><p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625210235586.png" alt="image-20210625210235586"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">镜像(image):</span><br><span class="line">	docker镜像好比一个模板,可以通过这个模板来创建容器服务,tomcat镜像===&gt;run==&gt;tomcat01容器(提供服务器)</span><br><span class="line">	通过这个镜像可以创建多个容器(最终服务运行或者项目运行就是在容器中的)</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">容器(container):</span><br><span class="line">	Docker利用容器技术,独立运行一个或者一个组应用,通过镜像来创建的</span><br><span class="line">	启动,停止,删除,基本命令!</span><br><span class="line"></span><br><span class="line">仓库(repository):</span><br><span class="line">	仓库就是存放镜像的地方!</span><br><span class="line">	仓库分为共有仓库和私有仓库</span><br><span class="line">    Docker Hub(默认是国外的)</span><br><span class="line">    阿里云… 都有容器服务器(配置镜像加速)</span><br></pre></td></tr></table></figure>

<h3 id="安装Docker"><a href="#安装Docker" class="headerlink" title="安装Docker"></a>安装Docker</h3><h4 id="1-环境准备"><a href="#1-环境准备" class="headerlink" title="1.环境准备"></a>1.环境准备</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">准备: </span><br><span class="line">    1.需要会一点点Linux基础</span><br><span class="line">    2.CentOS7</span><br><span class="line">    3.使用Xshell连接远程服务器</span><br></pre></td></tr></table></figure>

<h4 id="2-环境查看"><a href="#2-环境查看" class="headerlink" title="2.环境查看"></a>2.环境查看</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看系统内核</span></span><br><span class="line">    [root@iZ2zeheduaqlfxyl598si8Z /]# uname -r</span><br><span class="line">    3.10.0-1062.18.1.el7.x86_64</span><br><span class="line">    </span><br><span class="line"><span class="meta">#</span><span class="bash">系统版本</span></span><br><span class="line">    [root@CZP ~]# cat /etc/os-release</span><br><span class="line">    NAME=&quot;CentOS Linux&quot;</span><br><span class="line">    VERSION=&quot;7 (Core)&quot;</span><br><span class="line">    ID=&quot;centos&quot;</span><br><span class="line">    ID_LIKE=&quot;rhel fedora&quot;</span><br><span class="line">    VERSION_ID=&quot;7&quot;</span><br><span class="line">    PRETTY_NAME=&quot;CentOS Linux 7 (Core)&quot;</span><br><span class="line">    ANSI_COLOR=&quot;0;31&quot;</span><br><span class="line">    CPE_NAME=&quot;cpe:/o:centos:centos:7&quot;</span><br><span class="line">    HOME_URL=&quot;https://www.centos.org/&quot;</span><br><span class="line">    BUG_REPORT_URL=&quot;https://bugs.centos.org/&quot;</span><br><span class="line"></span><br><span class="line">    CENTOS_MANTISBT_PROJECT=&quot;CentOS-7&quot;</span><br><span class="line">    CENTOS_MANTISBT_PROJECT_VERSION=&quot;7&quot;</span><br><span class="line">    REDHAT_SUPPORT_PRODUCT=&quot;centos&quot;</span><br><span class="line">    REDHAT_SUPPORT_PRODUCT_VERSION=&quot;7&quot;</span><br></pre></td></tr></table></figure>

<h4 id="3-安装Docker"><a href="#3-安装Docker" class="headerlink" title="3.安装Docker"></a>3.安装Docker</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1.卸载旧的版本</span></span><br><span class="line">    $ sudo yum remove docker \</span><br><span class="line">                      docker-client \</span><br><span class="line">                      docker-client-latest \</span><br><span class="line">                      docker-common \</span><br><span class="line">                      docker-latest \</span><br><span class="line">                      docker-latest-logrotate \</span><br><span class="line">                      docker-logrotate \</span><br><span class="line">                      docker-engine</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2.需要安装的包</span></span><br><span class="line">	yum install -y yum-utils</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3.设置镜像仓库</span></span><br><span class="line">	yum-config-manager \</span><br><span class="line">    	--add-repo \</span><br><span class="line">    	https://download.docker.com/linux/centos/docker-ce.repo #默认国外</span><br><span class="line"></span><br><span class="line">    yum-config-manager \</span><br><span class="line">        --add-repo \</span><br><span class="line">        https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo #推荐</span><br><span class="line">        </span><br><span class="line"><span class="meta">#</span><span class="bash"> 4.更新yum软件包索引</span></span><br><span class="line">	yum makecache fast</span><br><span class="line"><span class="meta">#</span><span class="bash"> 5.安装docker</span>    </span><br><span class="line">	sudo yum install docker-ce docker-ce-cli containerd.io </span><br><span class="line"><span class="meta">#</span><span class="bash"> 6.启动docker</span></span><br><span class="line">    systemctl start docker</span><br><span class="line"><span class="meta">#</span><span class="bash"> 7.查看docker版本</span></span><br><span class="line">	docker version</span><br><span class="line"><span class="meta">	</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 下载镜像</span></span><br><span class="line">	docker pull [要下载的软件]</span><br><span class="line"><span class="meta">	</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看下载的镜像</span></span><br><span class="line">	docker images</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 卸载Docker</span></span><br><span class="line">    yum remove docker-ce docker-ce-cli containerd.io</span><br><span class="line">    rm -rf /var/lib/docker#docker默认工作路径</span><br></pre></td></tr></table></figure>

<h4 id="4-阿里云配置镜像加速"><a href="#4-阿里云配置镜像加速" class="headerlink" title="4.阿里云配置镜像加速"></a>4.阿里云配置镜像加速</h4><p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625211151183.png" alt="image-20210625211151183"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">执行命令:</span><br><span class="line">sudo mkdir -p /etc/docker</span><br><span class="line"> 	</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line">&#123;</span><br><span class="line">   &quot;registry-mirrors&quot;: [&quot;https://gojs472d.mirror.aliyuncs.com&quot;]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">    </span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">    </span><br><span class="line">    4.sudo systemctl restart docker</span><br></pre></td></tr></table></figure>

<h4 id="5-Docker-run运行流程图"><a href="#5-Docker-run运行流程图" class="headerlink" title="5.Docker run运行流程图"></a>5.Docker run运行流程图</h4><p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625211707236.png" alt="image-20210625211707236"></p>
<h4 id="6-底层原理"><a href="#6-底层原理" class="headerlink" title="6.底层原理"></a>6.底层原理</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Docker是怎么工作的?</span></span><br><span class="line">    Docker是一个C/S结构的系统,Docker的守护进程运行在主机上.通过Socket从客户端访问!</span><br><span class="line">    DockerServer接收到Docker-Client的指令,就会执行这个命令!</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625211907269.png" alt="image-20210625211907269"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Docker为什么比VM快?</span></span><br><span class="line">    1.Docker有着比虚拟机更少的抽象层</span><br><span class="line">    2.Docker利用的是宿主机的内核,vm需要的是Guest OS</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625211955591.png" alt="image-20210625211955591"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">所以说,新建一个容器的时候,docker不需要像虚拟机一样重新安装一个操作系统内核,虚拟机是加载Guest OS,分钟级别的,而docker是利用宿主机的操作系统,省略了这个复杂的过程</span><br></pre></td></tr></table></figure>

<h2 id="2-Docker常用命令"><a href="#2-Docker常用命令" class="headerlink" title="2.Docker常用命令"></a>2.Docker常用命令</h2><h3 id="1-帮助命令"><a href="#1-帮助命令" class="headerlink" title="1.帮助命令"></a>1.帮助命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker version 	# 显示版本信息</span><br><span class="line">docker info 		# 显示docker系统信息 包括镜像和容器数量</span><br><span class="line">docker --help		# 帮助命令</span><br><span class="line"></span><br><span class="line">ps:</span><br><span class="line">	帮助文档地址:https://docs.docker.com/reference/</span><br></pre></td></tr></table></figure>

<h3 id="2-镜像命令"><a href="#2-镜像命令" class="headerlink" title="2.镜像命令"></a>2.镜像命令</h3><p><strong>docker images</strong> 查看所本地主机上的镜像</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker images</span><br><span class="line">REPOSITORY       TAG              IMAGE ID       CREATED         SIZE</span><br><span class="line">nginx            latest           d1a364dc548d   3 weeks ago     133MB</span><br><span class="line">python           3.6-alpine3.13   ac438c122d19   4 weeks ago     40.8MB</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 解释</span></span><br><span class="line">REPOSITORY		镜像的仓库源</span><br><span class="line">TAG				镜像的标签</span><br><span class="line">IMAGE ID		镜像的id</span><br><span class="line">CREATED			镜像的创建时间</span><br><span class="line">SIZE			镜像的大小</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 可选项</span></span><br><span class="line">  -a, --all             # 列出所有的镜像</span><br><span class="line">  -q, --quiet           # 只显示镜像的id</span><br></pre></td></tr></table></figure>

<p><strong>docker search</strong>  搜索镜像</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker search mysql</span><br><span class="line">NAME         DESCRIPTION         							STARS     OFFICIAL   </span><br><span class="line">mysql       MySQL is a widely used, open-source relation…   11028     [OK]       </span><br><span class="line">mariadb     MariaDB Server is a high performing open sou…   4178      [OK] </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 可选项 通过收藏来过滤</span></span><br><span class="line">	--filter=STARS=3000 	# 搜索出来的镜像就是STARS大于3000的</span><br><span class="line">	</span><br><span class="line">[root@localhost ~]# docker search mysql --filter=STARS=3000</span><br><span class="line">NAME      DESCRIPTION                                     STARS     OFFICIAL   </span><br><span class="line">mysql     MySQL is a widely used, open-source relation…   11028     [OK]       </span><br><span class="line">mariadb   MariaDB Server is a high performing open sou…   4178      [OK]   </span><br><span class="line"></span><br><span class="line">[root@localhost ~]# docker search mysql --filter=STARS=5000</span><br><span class="line">NAME      DESCRIPTION                                     STARS     OFFICIAL   </span><br><span class="line">mysql     MySQL is a widely used, open-source relation…   11028     [OK]  </span><br></pre></td></tr></table></figure>

<p><strong>docker pull</strong>  下载镜像</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">  下载镜像 docker pull 镜像名[:tag]</span></span><br><span class="line">[root@localhost ~]# docker pull mysql</span><br><span class="line">Using default tag: latest	 # 如果不写 tag,默认 latest</span><br><span class="line">latest: Pulling from library/mysql</span><br><span class="line">69692152171a: Already exists 	# 分层下载,docker images的核心 联合文件系统</span><br><span class="line">1651b0be3df3: Already exists </span><br><span class="line">951da7386bc8: Already exists </span><br><span class="line">0f86c95aa242: Already exists </span><br><span class="line">37ba2d8bd4fe: Already exists </span><br><span class="line">6d278bb05e94: Already exists </span><br><span class="line">Digest: sha256:d50098d7fcb25b1fcb24e2d3247cae3fc55815d64fec640dc395840f8fa80969 </span><br><span class="line">Status: Downloaded newer image for mysql:latest</span><br><span class="line">docker.io/library/mysql:latest	# 真实地址</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> docker pull mysql  等价于 docker.io/library/mysql:latest</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 指定版本下载</span></span><br><span class="line">[root@localhost ~]# docker pull mysql:5.7</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p><strong>docker rmi</strong>  删除镜像</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost BBS05]# docker rmi -f 镜像id   					# 删除指定镜像</span><br><span class="line">[root@localhost BBS05]# docker rmi -f 镜像id 镜像id 镜像id	 	 # 删除多个镜像</span><br><span class="line">[root@localhost BBS05]# docker rmi -f $(docker images -aq)	   	 # 删除全部镜像</span><br></pre></td></tr></table></figure>

<h3 id="3-容器命令"><a href="#3-容器命令" class="headerlink" title="3.容器命令"></a>3.容器命令</h3><p><strong>说明:我们有了镜像才可以创建容器,linux,下载一个centos镜像测试学习</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost BBS05]# docker pull centos</span><br></pre></td></tr></table></figure>

<p><strong>新建容器并启动</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">docker run [可选参数] image</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 参数说明:</span></span><br><span class="line">--name=&#x27;name&#x27;    	容器名字  django01 django02 ,用来区分容器</span><br><span class="line">-d					后台方式运行</span><br><span class="line">-it					使用交互的方式运行,进入当前容器查看内容</span><br><span class="line">-p					指定容器端口 -p 8080:8080</span><br><span class="line">	-p ip:主机端口:容器端口</span><br><span class="line">	-p 主机端口:容器端口(常用)</span><br><span class="line">	-p 容器端口</span><br><span class="line">	容器端口</span><br><span class="line">-P(大写)			   随机指定端口</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 测试 启动并进入容器</span></span><br><span class="line">[root@localhost ~]# docker run -it centos /bin/bash</span><br><span class="line">[root@2ec114690ab4 /]# ls 	# 查看容器内的centos 基础版本 很多命令不完善</span><br><span class="line">bin  etc   lib	  lost+found  mnt  proc  run   srv  tmp  var</span><br><span class="line">dev  home  lib64  media       opt  root  sbin  sys  usr</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 从容器中退回主机</span></span><br><span class="line">[root@2ec114690ab4 /]# exit</span><br><span class="line">exit</span><br><span class="line">[root@localhost /]# ls</span><br><span class="line">bin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br></pre></td></tr></table></figure>

<p><strong>列出所有的运行的容器</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> docker ps 命令</span></span><br><span class="line"><span class="meta">	#</span><span class="bash"> 列出当前正在运行的容器</span></span><br><span class="line">-a  # 列出当前正在运行的容器+历史运行过的容器</span><br><span class="line">-n=?  # 显示最近创建的容器</span><br><span class="line">-q  # 只显示容器的编号</span><br><span class="line"></span><br><span class="line">[root@localhost /]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class="line">[root@localhost /]# docker ps -a</span><br><span class="line">CONTAINER ID   IMAGE      COMMAND       CREATED       STATUS         PORTS     </span><br><span class="line">  NAMES</span><br><span class="line">2ec114690ab4   centos    &quot;/bin/bash&quot;   3 minutes ago   Exited (0) About a minute ago     recursing_margulis</span><br><span class="line">7e7ef03a1c59   centos    &quot;/bin/bash&quot;   5 minutes ago   Exited (130) 5 minutes ago  </span><br><span class="line">  xenodochial_pike</span><br></pre></td></tr></table></figure>

<p><strong>退出容器</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">exit   # 直接容器停止并退出</span><br><span class="line">Ctrl + p + Q  # 容器不停止退出</span><br></pre></td></tr></table></figure>

<p><strong>删除容器</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker rm 容器id					# 删除指定容器(不能删除正在运行的容器 强制删除 rm -f)</span><br><span class="line">docker rm -f $(docker ps -aq)	 # 删除所有容器	</span><br><span class="line">docker ps -a -q|xargs docker rm  # 删除所有的容器</span><br></pre></td></tr></table></figure>

<p><strong>启动和停止容器的操作</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker start 容器id 			# 启动容器</span><br><span class="line">docker restart 容器id 		# 重启容器</span><br><span class="line">docker stop 容器id 			# 停止容器</span><br><span class="line">docker kill 容器id 			# 强制停止当前容器</span><br></pre></td></tr></table></figure>

<h2 id="3-常用其他命令"><a href="#3-常用其他命令" class="headerlink" title="3.常用其他命令"></a>3.常用其他命令</h2><p><strong>后台启动容器</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 命令 docker run -d 镜像名</span></span><br><span class="line">[root@localhost /]# docker run -d centos</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 问题: docker ps 发现centos停止了</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 常见的坑: docker 容器使用后台运行,就必须要有一个前台进程,docker发现没有应用,就会自动停止</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> nginx 容器启动后,发现自己没有提供服务,就会立刻停止,就是没有程序了</span></span><br></pre></td></tr></table></figure>

<p><strong>查看日志</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f -t --tail 容器,没有日志</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 自己编写一段shell脚本</span></span><br><span class="line">[root@localhost /]# docker run -d centos /bin/sh -c &quot;while true;do echo zqw;sleep 1;done&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">[root@localhost /]<span class="comment"># docker ps</span></span></span><br><span class="line">CONTAINER ID   IMAGE      </span><br><span class="line">2ec114690ab4   centos</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示日志</span></span><br><span class="line">-tf				# 显示日志</span><br><span class="line">--tail number   # 要显示的日志条数</span><br><span class="line">[root@localhost /]# docker logs -tf --tail 10 2ec114690ab4</span><br></pre></td></tr></table></figure>

<p><strong>查看容器中进程信息</strong>ps</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 命令 docker top 容器id</span></span><br><span class="line">[root@localhost /]# docker top 2ec114690ab4</span><br><span class="line">UID			PID		PPID	C		STIME		TTY</span><br><span class="line">root		22891	22875	0		21:21		?</span><br><span class="line">root		22821	22815	0		21:26		?</span><br></pre></td></tr></table></figure>

<p><strong>查看镜像元数据</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 命令</span>  </span><br><span class="line">docker inspect  容器id</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 测试</span></span><br><span class="line">[root@localhost /]# docker inspect 2ec114690ab4</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p><strong>进入当前正在运行的容器</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 通常容器都是使用后台方式运行的,需要进入容器修改一些配置</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">方式一:</span></span><br><span class="line">docker exec -it 容器id bashShell</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 测试</span></span><br><span class="line">[root@localhost /]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND       CREATED          STATUS          PORTS     NAMES</span><br><span class="line">1b8da83525a2   centos    &quot;/bin/bash&quot;   28 minutes ago   Up 28 minutes             jovial_turing</span><br><span class="line"></span><br><span class="line">[root@localhost /]# docker exec -it 1b8da83525a2 /bin/bash</span><br><span class="line">[root@1b8da83525a2 /]# ps -ef</span><br><span class="line">UID         PID   PPID  C STIME TTY          TIME CMD</span><br><span class="line">root          1      0  0 12:03 pts/0    00:00:00 /bin/bash</span><br><span class="line">root         15      0  0 12:32 pts/1    00:00:00 /bin/bash</span><br><span class="line">root         29     15  0 12:32 pts/1    00:00:00 ps -ef</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 方式二:</span></span><br><span class="line">docker attach 容器id</span><br><span class="line">[root@localhost /]# docker attach 1b8da83525a2</span><br><span class="line">正在执行当前的代码...</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> docker <span class="built_in">exec</span> 	 	<span class="comment"># 进入容器后开启一个新的终端(进程),可以在里面操作(常用)</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> docker attach		<span class="comment"># 进入容器正在执行的终端,不会启动新的进程!</span></span></span><br></pre></td></tr></table></figure>

<p><strong>从容器内拷贝文件到主机上</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">docker cp 容器id:容器内路径  目的的主机路径</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看当前主机目录下</span></span><br><span class="line">[root@localhost home]# ls</span><br><span class="line">[root@localhost home]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND       CREATED          STATUS          PORTS     NAMES</span><br><span class="line">1b8da83525a2   centos    &quot;/bin/bash&quot;   39 minutes ago   Up 39 minutes             jovial_turing</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 进入docker容器内部</span></span><br><span class="line">[root@localhost home]# docker attach 1b8da83525a2</span><br><span class="line">[root@1b8da83525a2 /]# cd /home</span><br><span class="line"><span class="meta">#</span><span class="bash"> 在容器内新建一个文件</span></span><br><span class="line">[root@1b8da83525a2 home]# touch home.py</span><br><span class="line">[root@1b8da83525a2 home]# exit</span><br><span class="line">exit</span><br><span class="line">[root@localhost home]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class="line">[root@localhost home]# docker ps -a</span><br><span class="line">CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS                         PORTS     NAMES</span><br><span class="line">1b8da83525a2   centos         &quot;/bin/bash&quot;              40 minutes ago   Exited (0) 14 seconds ago                jovial_turing</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将这个文件拷贝出来到主机上</span></span><br><span class="line">[root@localhost home]# docker cp 1b8da83525a2:/home/home.py /home</span><br><span class="line">[root@localhost home]# ls</span><br><span class="line">home.py</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 拷贝是一个手动过程 -v 卷的技术 可以实现同步</span></span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\左旗伟\AppData\Roaming\Typora\typora-user-images\image-20210625212502098.png" alt="image-20210625212502098"></p>
<h4 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">attach      Attach  to a running container # 进入容器内部,不启动新的进程</span><br><span class="line">build       Build an image from a Dockerfile # 通过dockerfile 定制镜像</span><br><span class="line">commit      Create a new image from a container&#x27;s changes #提交当前容器为新的镜像</span><br><span class="line">cp          Copy files/folders between a container and the local filesystem #从容器中拷贝指定的文件或者目录到宿主机上</span><br><span class="line">create      Create a new container # 创建一个新的容器,同run 但不启动容器</span><br><span class="line">diff        Inspect changeson a container&#x27;s filesystem # 查看docker容器变化</span><br><span class="line">events      Get real time events from the server# 从docker服务获取容器实时事件</span><br><span class="line">exec        Run a command in a running container# 在已存在的容器上运行命令</span><br><span class="line">expo		Export a container&#x27;s filesystem as a tar archive</span><br><span class="line">history     Show the history of an image</span><br><span class="line">images      List images</span><br><span class="line">import      Import the contents from a tarball to create a filesystem image</span><br><span class="line">info        Display system-wide information</span><br><span class="line">inspect     Return low-level information on Docker objects</span><br><span class="line">kill        Kill one or more running containers</span><br><span class="line">load        Load an image from a tar archive or STDIN</span><br><span class="line">login       Log in to a Docker registry</span><br><span class="line">logout      Log out from a Docker registry</span><br><span class="line">logs        Fetch the logs of a container</span><br><span class="line">pause       Pause all processes within one or more containers</span><br><span class="line">port        List port mappings or a specific mapping for the container</span><br><span class="line">ps          List containers</span><br><span class="line">pull        Pull an image or a repository from a registry</span><br><span class="line">push        Push an image or a repository to a registry</span><br><span class="line">rename      Rename a container</span><br><span class="line">restart     Restart one or more containers</span><br><span class="line">rm          Remove one or more containers</span><br><span class="line">rmi         Remove one or more images</span><br><span class="line">run         Run a command in a new container</span><br><span class="line">save        Save one or more images to a tar archive (streamed to STDOUT by default)</span><br><span class="line">search      Search the Docker Hub for images</span><br><span class="line">start       Start one or more stopped containers</span><br><span class="line">stats       Display a live stream of container(s) resource usage statistics</span><br><span class="line">stop        Stop one or more running containers</span><br><span class="line">tag         Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE</span><br><span class="line">top         Display the running processes of a container</span><br><span class="line">unpause     Unpause all processes within one or more containers</span><br><span class="line">update      Update configuration of one or more containers</span><br><span class="line">version     Show the Docker version information</span><br><span class="line">wait        Block until one or more containers stop, then print their exit codes</span><br></pre></td></tr></table></figure>

<p><img src="D:\python课程\课程笔记\Linux\截图\常用命令01.png" alt="常用命令01"></p>
<p><img src="D:\python课程\课程笔记\Linux\截图\常用命令02.png" alt="常用命令02"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/08/04/Docker/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="左大大">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="左大大的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/04/Docker/" class="post-title-link" itemprop="url">Docker精简版</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-08-04 18:20:25" itemprop="dateCreated datePublished" datetime="2020-08-04T18:20:25+08:00">2020-08-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="1-什么是Docker"><a href="#1-什么是Docker" class="headerlink" title="1.什么是Docker?"></a>1.什么是Docker?</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.个人见解：</span><br><span class="line">	Docker就是一个高性能的VM，并且不会浪费资源，主要用于Linux环境的虚拟化，类似VBox这种虚拟机，不同的是Docker专门为了服务器虚拟化，并支持镜像分享等功能。</span><br><span class="line"></span><br><span class="line">	Docker 是一个开源项目,诞生于2013年初,最初是dotCloud公司内部的一个业余项目。它基于Google公司推出的 Go语言实现。项目后来加入了Linux基金会，遵从了Apache2.0协议,项目代码在 GitHub上进行维护。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-Docker作用"><a href="#2-Docker作用" class="headerlink" title="2.Docker作用"></a>2.Docker作用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Docker的主要目标：</span><br><span class="line">	通过对应用组件的封装、分发、部署、运行等生命周期的管理，达到应用级别的一次封装，到处运行。</span><br><span class="line">	小贴士：这里的应用组件，可以是WEB应用，也可以是一套数据库服务，甚至可以是一个操作系统编译器。</span><br></pre></td></tr></table></figure>

<h3 id="3-Docker虚拟化特点"><a href="#3-Docker虚拟化特点" class="headerlink" title="3.Docker虚拟化特点"></a>3.Docker虚拟化特点</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">虚拟化特点:</span><br><span class="line">	1. 环境隔离</span><br><span class="line">	2.更快的交付和部署</span><br><span class="line">	3.更高效的利用资源</span><br><span class="line">	4.更轻松的迁移和扩展</span><br><span class="line">	5.更轻松的管理和更新</span><br></pre></td></tr></table></figure>

<h3 id="4-Docker概念和使用"><a href="#4-Docker概念和使用" class="headerlink" title="4.Docker概念和使用"></a>4.Docker概念和使用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.Docker三大核心概念</span><br><span class="line">	1.镜像(Image):</span><br><span class="line">		Docker镜像就相当于是一个root文件系统。比如官方镜像ubuntu:16.04就包含了完整的一套 Ubuntu16.04最小系统的root文件系统。</span><br><span class="line">	2.容器(Container)</span><br><span class="line">		镜像和容器的关系，就像是面向对象程序设计中的类和实例一样，镜像是静态的定义，容器是镜像运行时的实体。容器可以被创建、启动、停止、删除、暂停等</span><br><span class="line">	3. 仓库(Repository)</span><br><span class="line">		用来保存镜像的仓库。当我们构建好自己的镜像之后，需要存放在仓库中，当我们需要启动一个镜像时，可以在仓库中下载下来。</span><br></pre></td></tr></table></figure>

<h3 id="5-Docker安装"><a href="#5-Docker安装" class="headerlink" title="5.Docker安装"></a>5.Docker安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;</span><span class="string">&#x27;</span></span><br><span class="line"><span class="string">若之前安装过老版本的Docker,则要清理残留</span></span><br><span class="line"><span class="string">[root@python ~]# yum remove docker \</span></span><br><span class="line"><span class="string">    docker-client \</span></span><br><span class="line"><span class="string">    docker-client-latest \</span></span><br><span class="line"><span class="string">    docker-common \</span></span><br><span class="line"><span class="string">    docker-latest \</span></span><br><span class="line"><span class="string">    docker-latest-logrotate \</span></span><br><span class="line"><span class="string">    docker-logrotate \</span></span><br><span class="line"><span class="string">    docker-engine</span></span><br><span class="line"><span class="string">&#x27;</span><span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">1.更换系统yum源</span><br><span class="line">	<span class="comment"># 先备份原来的yum源</span></span><br><span class="line">	[root@python ~]<span class="comment"># cp /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak</span></span><br><span class="line">	<span class="comment"># 更换yum源</span></span><br><span class="line">	[root@python ~]<span class="comment"># curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo</span></span><br><span class="line"></span><br><span class="line">2. 建立yum源缓存</span><br><span class="line">	[root@python ~]<span class="comment"># yum makecache</span></span><br><span class="line">	</span><br><span class="line">3.更新操作系统</span><br><span class="line">	[root@python ~]<span class="comment"># yum update -y --exclud=kernel*</span></span><br><span class="line"></span><br><span class="line">4.安装基础软件</span><br><span class="line">	[root@localhost ~]<span class="comment"># yum install -y yum-utils device-mapper-persistent-data lvm2</span></span><br><span class="line">	</span><br><span class="line">5.安装Docker yum源</span><br><span class="line">	[root@localhost ~]<span class="comment"># yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span></span><br><span class="line"></span><br><span class="line">6.安装Docker</span><br><span class="line">	<span class="comment"># 建立元数据缓存</span></span><br><span class="line">	[root@localhost ~]<span class="comment"># yum makecache fast</span></span><br><span class="line">	<span class="comment"># 安装Docker</span></span><br><span class="line">	[root@localhost ~]<span class="comment"># yum -y install docker-ce</span></span><br><span class="line"></span><br><span class="line">7.启动Docker</span><br><span class="line">	[root@localhost ~]<span class="comment"># systemctl start docker</span></span><br><span class="line">	</span><br><span class="line">8.验证Docker启动</span><br><span class="line">	[root@localhost ~]<span class="comment"># docker run -p 8080:80 -d nginx</span></span><br><span class="line">    ps：测试能够通过8080访问我们的服务器就算成功</span><br><span class="line">   </span><br><span class="line">设置开机启动:</span><br><span class="line">	[root@alvin-test-os ~]<span class="comment"># systemctl enable --now docker</span></span><br></pre></td></tr></table></figure>

<h3 id="6-Docker镜像"><a href="#6-Docker镜像" class="headerlink" title="6.Docker镜像"></a>6.Docker镜像</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker镜像启动容器的模板，镜像一般情况下定义的是容器启动的服务。</span></span><br><span class="line"></span><br><span class="line">获取镜像</span><br><span class="line">	docker pull nginx(官方镜像名称)</span><br><span class="line">	docker pull registry.cn-hangzhou.aliyuncs.com/alvinos/docsfiy:v2(其他镜像路径)</span><br><span class="line">	</span><br><span class="line">1、公共的仓库(dockerHub[官方]、阿里云镜像仓库、华为云镜像仓库、腾讯云镜像仓库)</span><br><span class="line">    registry.cn-hangzhou.aliyuncs.com/alvinos/docsfiy:v2</span><br><span class="line"></span><br><span class="line">		镜像仓库URL：registry.cn-hangzhou.aliyuncs.com(默认：docker.io)</span><br><span class="line">		命名空间：alvinos(默认：library)</span><br><span class="line">		仓库名称：docsfiy</span><br><span class="line">		版本号：v2（默认：latest）</span><br><span class="line"></span><br><span class="line">2、私有的仓库（Harbor）</span><br><span class="line">	登录仓库：</span><br><span class="line">		docker login 仓库url(默认：docker.io)</span><br><span class="line">		</span><br><span class="line">3、获取镜像</span><br><span class="line">	docker pull [镜像名称or镜像路径]</span><br><span class="line">	</span><br><span class="line">4、镜像名称修改（tag）</span><br><span class="line">	docker tag [原来的tag] [新的tag]</span><br><span class="line">	一般将镜像名称改成被提交仓库路径(registry.cn-hangzhou.aliyuncs.com/zdd0128/nginx)</span><br><span class="line">	eg:</span><br><span class="line">		docker tag [镜像名称]:[镜像版本] [新的镜像名称]:[新的镜像版本]</span><br><span class="line">		docker tag [镜像id] [新的镜像名称]:[新的镜像版本]</span><br><span class="line">		docker tag d1a364dc548d(镜像id) registry.cn-hangzhou.aliyuncs.com/zdd0128/nginx:v1</span><br><span class="line">				</span><br><span class="line">5、获取当前系统上所有的docker镜像</span><br><span class="line">	docker image ls 或 docker images</span><br><span class="line">		-a : 列出系统中所有的临时镜像</span><br><span class="line">		--digests=<span class="literal">true</span> ： 列出系统中所有镜像的数字摘要值</span><br><span class="line">		-q : 仅显示镜像ID</span><br><span class="line">		</span><br><span class="line">6、上传镜像</span><br><span class="line">	1、创建阿里云仓库</span><br><span class="line">		产品--&gt;容器镜像--&gt;个人--&gt;添加仓库--&gt;添加名称空间</span><br><span class="line">	2、登录阿里云仓库</span><br><span class="line">		docker login --username=zdd1912419375 registry.cn-hangzhou.aliyuncs.com</span><br><span class="line">	3、修改镜像名称</span><br><span class="line">		docker tag [ImageId] registry.cn-hangzhou.aliyuncs.com/zdd0128/nginx:[镜像版本号]</span><br><span class="line">	4、上传镜像</span><br><span class="line">		docker push registry.cn-hangzhou.aliyuncs.com/zdd0128/nginx:[镜像版本号]</span><br><span class="line">		</span><br><span class="line">7、查看镜像详细信息</span><br><span class="line">	docker inspect [镜像名称|ID]</span><br><span class="line">		-f : 获取镜像部分详细信息</span><br><span class="line">８、删除镜像</span><br><span class="line">	docker rmi [镜像ID或镜像名称]</span><br><span class="line">		-f : 强制删除镜像</span><br><span class="line">	清空机器上所有的镜像</span><br><span class="line">	docker rmi $(docker images -q)</span><br><span class="line"></span><br><span class="line">案例:部署Django项目</span><br><span class="line">	1、拉取镜像</span><br><span class="line">		docker pull alvinos/django:v3</span><br><span class="line">	2、启动</span><br><span class="line">		docker run -d -p 8080:80 alvinos/django:v3</span><br><span class="line">	3、关闭服务</span><br><span class="line">		docker stop [容器名称]</span><br></pre></td></tr></table></figure>

<h4 id="Docker启动mysql"><a href="#Docker启动mysql" class="headerlink" title="Docker启动mysql"></a>Docker启动mysql</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">启动mysql容器</span><br><span class="line">	docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=密码 -d mysql:版本号</span><br><span class="line">		--name 		some-mysql --&gt; 容器名称 j</span><br><span class="line">		-e 			MYSQL_ROOT_PASSWORD --&gt; 设置环境变量,登录使用的密码</span><br><span class="line">进入该容器</span><br><span class="line">	docker exec -it some-mysql /bin/bash</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">添加数据库用户</span><br><span class="line"><span class="meta">	#</span><span class="bash"> 创建用户并授权</span></span><br><span class="line">		GRANT ALL PRIVILEGES ON *.* TO &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;000128&#x27; WITH GRANT OPTION;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">	#</span><span class="bash"> 刷新权限</span></span><br><span class="line">		FLUSH PRIVILEGES;</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="7-Docker容器"><a href="#7-Docker容器" class="headerlink" title="7.Docker容器"></a>7.Docker容器</h3><h4 id="容器基本命令"><a href="#容器基本命令" class="headerlink" title="容器基本命令"></a>容器基本命令</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">容器(container)</span><br><span class="line">	对外提供服务的实例，容器的本质是进程。</span><br><span class="line"></span><br><span class="line">1、运行一个容器</span><br><span class="line">	格式：</span><br><span class="line">		docker run [参数] [镜像名称|ID] [启动容器执行的命令]</span><br><span class="line">		</span><br><span class="line">		启动命令：不指定则执行默认的启动命令，指定则执行指定的命令。</span><br><span class="line">		镜像名称|ID：可以使用镜像名称，也可以使用镜像ID</span><br><span class="line">		参数：使用什么参数在添加什么参数。</span><br><span class="line">		</span><br><span class="line">		docker create + docker start = docker run</span><br><span class="line">	</span><br><span class="line">	前提：</span><br><span class="line">		docker容器启动的前提：至少有一个应用进程运行在前台。</span><br><span class="line">	</span><br><span class="line">	启动流程：</span><br><span class="line">        1、检查本地是否存在需要被使用的镜像，如果存在则直接使用，如果不存在则去公网下载。</span><br><span class="line">        2、根据镜像创建容器</span><br><span class="line"></span><br><span class="line">    参数：</span><br><span class="line">   		-d : 以守护进程方式运行</span><br><span class="line">   		-p : （固定）端口映射</span><br><span class="line">   		-P : （随机）端口映射</span><br><span class="line">   		-i : 打开标准输出</span><br><span class="line">   		-t : 创建一个终端</span><br><span class="line">   		-v : 将宿主主机上的目录映射到容器中</span><br><span class="line">   		--rm : 当容器的生命周期结束时立即删除容器</span><br><span class="line">   		--name : 将容器自定义一个容器名称， 将容器的名称加入DNS解析</span><br><span class="line">   		-e : 设置容器内部的环境变量</span><br><span class="line">   		-h : 设置容器内部的主机名</span><br><span class="line"></span><br><span class="line">127.0.0.1 回环网络</span><br><span class="line">172.16.1.100 </span><br><span class="line"></span><br><span class="line">2、展示docker容器列表</span><br><span class="line">	docker ps 默认情况下展示当前系统上所有的正在运行的容器</span><br><span class="line">	格式：</span><br><span class="line">		docker ps</span><br><span class="line">	解释：</span><br><span class="line">		CONTAINER ID：容器ID</span><br><span class="line">		IMAGE		：镜像ID|镜像名称</span><br><span class="line">		COMMAND		：容器启动执行的命令</span><br><span class="line">		CREATED		：创建距离现在的时间</span><br><span class="line">		STATUS		：状态</span><br><span class="line">		PORTS		：端口信息</span><br><span class="line">		NAMES		：容器的名称</span><br><span class="line">	</span><br><span class="line">	参数：</span><br><span class="line">		-a : 展示所有的容器</span><br><span class="line">		-q : 仅仅展示容器的ID</span><br><span class="line"></span><br><span class="line">3、删除容器</span><br><span class="line">	格式：</span><br><span class="line">		docker rm [容器的名称|ID]</span><br><span class="line">	</span><br><span class="line">	参数：</span><br><span class="line">		-f : 强制删除</span><br><span class="line">		</span><br><span class="line">	docker rm -f $(docker ps -a -q)</span><br><span class="line"></span><br><span class="line">4、创建容器</span><br><span class="line">	格式：</span><br><span class="line">		docker create </span><br><span class="line"></span><br><span class="line">5、启动容器</span><br><span class="line">	格式：</span><br><span class="line">		docker start </span><br><span class="line"></span><br><span class="line">6、进入容器</span><br><span class="line">	1、attach</span><br><span class="line">		解释：建立一个宿主主机到容器中pid为1的进程上的一个管道，但是一旦attach断开连接，docker容器随即退出。</span><br><span class="line">	2、exec（推荐）</span><br><span class="line">		解释：使用其可以在宿主主机上执行一个容器内部的命令。</span><br><span class="line">		docker exec -it relaxed_bhabha bash</span><br><span class="line">	3、nsenter</span><br><span class="line">		解释：建立一个宿主主机和容器之间的一个管道。</span><br><span class="line">		nsenter --target $( docker inspect -f &#123;&#123;.State.Pid&#125;&#125; elegant_margulis ) --mount --uts --ipc --net --pid</span><br><span class="line">		</span><br><span class="line">	4、ssh</span><br></pre></td></tr></table></figure>

<h4 id="容器和镜像的导入导出"><a href="#容器和镜像的导入导出" class="headerlink" title="容器和镜像的导入导出"></a>容器和镜像的导入导出</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">1、export和import</span><br><span class="line">	解释：针对的点是容器</span><br><span class="line">	</span><br><span class="line">	格式：</span><br><span class="line">		docker export -o [打包的文件名] [容器ID或名称]</span><br><span class="line">		docker export -o django.tar elegant_margulis</span><br><span class="line">		</span><br><span class="line">		docker import [文件名] [镜像名及版本号]</span><br><span class="line">		docker import django.tar django:v1</span><br><span class="line"></span><br><span class="line">2、save和load</span><br><span class="line">	解释：针对的点的镜像</span><br><span class="line">	</span><br><span class="line">	格式：</span><br><span class="line">		docker save -o [打包的文件名]  镜像名称及版本号</span><br><span class="line">		docker save -o python.tar python:3.6.8 alvinos/django:v3</span><br><span class="line">		</span><br><span class="line">		docker load &lt; [打包的文件名]</span><br><span class="line">		docker load &lt; python.tar</span><br><span class="line"></span><br><span class="line">3、import及export 和 save及load之间的区别</span><br><span class="line">	1、import可以自定义镜像名称，load则不行</span><br><span class="line">	2、save可以同时保存多个镜像，export则不能一次保存多个容器</span><br><span class="line">	3、save保存的镜像体积要大于export保存的镜像体积</span><br><span class="line">	4、两者之间互不能导入</span><br></pre></td></tr></table></figure>

<h5 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">1、什么是容器，什么是docker？</span><br><span class="line">    通过镜像运行起来的对外可以提供服务的一个进程实例。</span><br><span class="line">    docker是使用容器的一个软件。</span><br><span class="line"></span><br><span class="line">2、安装</span><br><span class="line">    windows</span><br><span class="line">    linux</span><br><span class="line">    1、配置yum源</span><br><span class="line">    2、安装需要依赖的软件</span><br><span class="line">    3、yum install docker-ce</span><br><span class="line">    4、启动 systemctl start docker</span><br><span class="line">    5、测试 docker run -d -p 8080:80 nginx</span><br><span class="line"></span><br><span class="line">3、镜像</span><br><span class="line">    启动容器的模板。</span><br><span class="line">	1、下载镜像</span><br><span class="line">		docker pull [仓库URL]/[命名空间名]/[仓库名]:[版本号]</span><br><span class="line">	2、镜像列表</span><br><span class="line">		docker images 或 docker image ls</span><br><span class="line">	3、增加镜像名称</span><br><span class="line">		docker tag [原名称] [新名词]</span><br><span class="line">	4、登录镜像仓库</span><br><span class="line">		docker login [仓库URL]</span><br><span class="line">	5、上传镜像</span><br><span class="line">		docker push [仓库URL]/[命名空间名]/[仓库名]:[版本号]</span><br><span class="line">	6、删除镜像</span><br><span class="line">		docker rmi [镜像名称]</span><br><span class="line">	7、查看镜像详细信息</span><br><span class="line">		docker inspect [镜像名称或ID]</span><br><span class="line">	</span><br><span class="line">		7.1、获取某一项信息</span><br><span class="line">			docker inspect -f &quot;&#123;&#123; .Id &#125;&#125;&quot; [镜像名称或ID]</span><br></pre></td></tr></table></figure>

<h3 id="8-linux网络"><a href="#8-linux网络" class="headerlink" title="8.linux网络"></a>8.linux网络</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 创建一个命名空间</span><br><span class="line">	ip netns add test01</span><br><span class="line"># 查看创建过的命名空间</span><br><span class="line">	ip netns list</span><br><span class="line"></span><br><span class="line"># 创建Veth设备对</span><br><span class="line">	ip link add veth type veth peer name veth001</span><br><span class="line"></span><br><span class="line"># 将Veth设备对分发至test01命名空间</span><br><span class="line">	ip link set veth001 netns test01</span><br><span class="line"></span><br><span class="line"># 将test01中veth001分配IP</span><br><span class="line">	ip netns exec test01 ip addr add 172.16.0.111/20 dev veth001</span><br><span class="line">	ip addr add 172.16.0.112/20 dev veth</span><br><span class="line">				</span><br><span class="line"># 重启veth设备对</span><br><span class="line">	ip netns exec test01 ip link set dev veth001 up/down</span><br></pre></td></tr></table></figure>

<h3 id="9-Docker网络模式"><a href="#9-Docker网络模式" class="headerlink" title="9.Docker网络模式"></a>9.Docker网络模式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">1、HOST模式</span><br><span class="line">	使用宿主主机的网卡</span><br><span class="line">	docker run --network host [镜像名称|ID]</span><br><span class="line"></span><br><span class="line">2、container模式</span><br><span class="line">	共享一个容器的网络</span><br><span class="line">	docker run -d --network &quot;container:[共享容器名称]&quot; nginx</span><br><span class="line">	</span><br><span class="line">3、none模式</span><br><span class="line">	不为容器提供任何网络。</span><br><span class="line">	docker run -d --network none centos</span><br><span class="line">	</span><br><span class="line">4、网桥</span><br><span class="line">	将多个容器使用docker网桥进行地址转换的方式实现网路互通</span><br><span class="line"></span><br><span class="line">	1、创建网桥</span><br><span class="line">	docker network create chenyang</span><br><span class="line">	</span><br><span class="line">	2、查看网桥</span><br><span class="line">	docker network ls</span><br><span class="line">	</span><br><span class="line">	3、使用网桥</span><br><span class="line">	docker run -d --network chenyang nginx</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="10-Docker-network"><a href="#10-Docker-network" class="headerlink" title="10.Docker network"></a>10.Docker network</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">1、展示当前主机上网桥列表</span><br><span class="line">	docker network ls</span><br><span class="line"></span><br><span class="line">2、创建网桥</span><br><span class="line">	docker network create</span><br><span class="line">    </span><br><span class="line">    参数：</span><br><span class="line">    	-d : 指定网桥的类型</span><br><span class="line">    	--gateway : 指定网关</span><br><span class="line">    	--subnet : 指定子网</span><br><span class="line"></span><br><span class="line">3、查看网桥的详细信息</span><br><span class="line">	docker network inspect [网桥名称|id]</span><br><span class="line"></span><br><span class="line">4、删除网桥</span><br><span class="line">	docker network rm </span><br><span class="line"></span><br><span class="line">5、清空空闲的并且是自创的网桥</span><br><span class="line">	docker network prune -f</span><br><span class="line"></span><br><span class="line">6、连接上一个网桥</span><br><span class="line">	docker network connect [参数] [网桥名称] [容器名称]</span><br><span class="line"></span><br><span class="line">7、断开链接</span><br><span class="line">	docker network disconnect [参数] [网桥名称] [容器名称]</span><br></pre></td></tr></table></figure>

<h3 id="11-Docker-compose"><a href="#11-Docker-compose" class="headerlink" title="11.Docker-compose"></a>11.Docker-compose</h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装:"></a>安装:</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">docker-compose是容器编排工具，需要注意的是，docker-compose只是单机的容器编排工具。</span><br><span class="line"></span><br><span class="line">1、docker-compose 默认的配置文件为：docker-compose.yaml</span><br><span class="line"></span><br><span class="line">2、安装docker-compose</span><br><span class="line">	1、下载</span><br><span class="line">		sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose</span><br><span class="line">		</span><br><span class="line">		curl -L https://get.daocloud.io/docker/compose/releases/download/1.24.0/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose</span><br><span class="line">		</span><br><span class="line">	2、chmod +x docker-compose-Linux-x86_64</span><br><span class="line">	3、mv docker-compose-Linux-x86_64 /usr/local/bin/</span><br><span class="line">	4、ln -s /usr/local/bin/docker-compose-Linux-x86_64 /usr/local/bin/docker-compose</span><br><span class="line">	5、curl -L https://raw.githubusercontent.com/docker/compose/1.25.5/contrib/completion/bash/docker-compose &gt; /etc/bash_completion.d/docker-compose</span><br></pre></td></tr></table></figure>

<h4 id="Docker-compose-yaml文件"><a href="#Docker-compose-yaml文件" class="headerlink" title="Docker-compose.yaml文件"></a>Docker-compose.yaml文件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">version: &quot;3.0&quot;</span><br><span class="line">services:</span><br><span class="line">  django:</span><br><span class="line">    image: django:v3</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;8000:8000&quot;</span><br><span class="line">    container_name: django</span><br><span class="line">    networks:</span><br><span class="line">      - django</span><br><span class="line">    depends_on:</span><br><span class="line">      - mysql</span><br><span class="line"></span><br><span class="line">  mysql:</span><br><span class="line">    image: mysql:5.7</span><br><span class="line">    environment:</span><br><span class="line">      MYSQL_ROOT_PASSWORD: root</span><br><span class="line">    container_name: mysql</span><br><span class="line">    volumes:</span><br><span class="line">    - &quot;/root/docker-compose/mysql/data:/var/lib/mysql&quot;</span><br><span class="line">    networks:</span><br><span class="line">      - django</span><br><span class="line">    depends_on:</span><br><span class="line">      - redis</span><br><span class="line"></span><br><span class="line">  redis:</span><br><span class="line">    image: redis:latest</span><br><span class="line">    container_name: redis</span><br><span class="line">    networks:</span><br><span class="line">      - django</span><br><span class="line"></span><br><span class="line">networks:</span><br><span class="line">  django:</span><br></pre></td></tr></table></figure>

<h4 id="Docker-compose指令"><a href="#Docker-compose指令" class="headerlink" title="Docker-compose指令"></a>Docker-compose指令</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># build</span></span><br><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.0&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">django:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">./django</span></span><br><span class="line"></span><br><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.0&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">django:</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./django</span></span><br><span class="line">      <span class="attr">dockerfile:</span> <span class="string">Dockerfile-py</span></span><br><span class="line">      <span class="attr">args:</span></span><br><span class="line">        <span class="attr">NAME:</span> <span class="string">py17</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># command</span></span><br><span class="line"><span class="string">设置容器启动命令</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># depends_on ： 指定在某容器之后启动</span></span><br><span class="line"><span class="comment"># env_file ： 指定环境变量文件</span></span><br></pre></td></tr></table></figure>

<h4 id="Docker-compose参数"><a href="#Docker-compose参数" class="headerlink" title="Docker-compose参数"></a>Docker-compose参数</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动：docker-compose up</span></span><br><span class="line"><span class="comment"># 删除：docker-compose down</span></span><br><span class="line"><span class="comment"># 停止：docker-compose stop</span></span><br><span class="line"><span class="comment"># 删除容器：docker-compose rm </span></span><br><span class="line"><span class="comment"># 重启：docker-compose restart [容器的名称]</span></span><br><span class="line"><span class="comment"># 进入容器：docker-compose exec [参数] [service] [CMD]</span></span><br><span class="line"><span class="comment"># 容器列表：docker-compose ps</span></span><br><span class="line"><span class="comment"># 查看容器进程：docker-compose top </span></span><br><span class="line"><span class="comment"># 暂停运行：docker-compose pause</span></span><br><span class="line"><span class="comment"># 恢复运行：docker-compose unpause</span></span><br></pre></td></tr></table></figure>

<h4 id="可视化工具"><a href="#可视化工具" class="headerlink" title="可视化工具"></a>可视化工具</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">version: &#x27;3.0&#x27;</span><br><span class="line">services:</span><br><span class="line">  portainer:</span><br><span class="line">    image: portainer/portainer-ce</span><br><span class="line">    ports:</span><br><span class="line">    - &quot;8001:8000&quot;</span><br><span class="line">    - &quot;9001:9000&quot;</span><br><span class="line">    container_name: portainer</span><br><span class="line">    networks:</span><br><span class="line">      - &quot;portainer&quot;</span><br><span class="line">    volumes:</span><br><span class="line">    - &quot;/var/run/docker.sock:/var/run/docker.sock&quot;</span><br><span class="line">    - &quot;/root/docker-compose/portainer_data:/data&quot;</span><br><span class="line">    healthcheck:</span><br><span class="line">      test: [&quot;CMD&quot;, &quot;ping&quot;, &quot;-c1&quot;, &quot;-t1&quot;, &quot;portainer&quot;]</span><br><span class="line">      interval: 30s</span><br><span class="line">      timeout: 10s</span><br><span class="line">      retries: 3</span><br><span class="line"></span><br><span class="line">networks:</span><br><span class="line">  portainer:</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/07/16/rpm%E8%BD%AF%E4%BB%B6%E5%8C%85%20/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="左大大">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="左大大的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/07/16/rpm%E8%BD%AF%E4%BB%B6%E5%8C%85%20/" class="post-title-link" itemprop="url">Linuxrpm软件包</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-07-16 18:20:25" itemprop="dateCreated datePublished" datetime="2020-07-16T18:20:25+08:00">2020-07-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="rpm软件包"><a href="#rpm软件包" class="headerlink" title="rpm软件包"></a>rpm软件包</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装：rpm -ivh &quot;包路径&quot;</span></span><br><span class="line"><span class="comment"># 升级：rpm -Uvh &quot;包路径&quot;</span></span><br><span class="line"><span class="comment"># 卸载：rpm -e &quot;包名称&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="RPM包格式举例"><a href="#RPM包格式举例" class="headerlink" title="RPM包格式举例"></a>RPM包格式举例</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 例1</span></span><br><span class="line">    mysql-connector-odbc-5.2.5-8.el7.x86_64.rpm</span><br><span class="line">    软件包名：mysql-connector-odbc</span><br><span class="line">    版本号Version：5.2.5</span><br><span class="line">    发布版本Release：8.el7</span><br><span class="line">    平台：el7.x86_64</span><br><span class="line">    后缀：.rpm</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 例2</span></span><br><span class="line">    abrt-python-doc-2.1.11-57.el7.centos.noarch.rpm</span><br><span class="line">    abrt-python-doc 		<span class="comment">#软件包的名称</span></span><br><span class="line">    2.1.11 					<span class="comment">#软件的版本</span></span><br><span class="line">    57 						<span class="comment">#软件编译之后的发布的次数</span></span><br><span class="line">    el7 					<span class="comment">#适合的操作系统的版本</span></span><br><span class="line">    noarch 					<span class="comment">#适⽤于不同版本的CPU </span></span><br><span class="line">    .rpm 					<span class="comment">#后缀名</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 查看⾃⼰当前平台</span></span><br><span class="line">[root@localhost ~]<span class="comment"># uname -m</span></span><br><span class="line">x86_64</span><br></pre></td></tr></table></figure>

<h4 id="管理rpm包有两种命令"><a href="#管理rpm包有两种命令" class="headerlink" title="管理rpm包有两种命令"></a>管理rpm包有两种命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1、rpm命令：</span></span><br><span class="line"> 需要⾃⼰找到rpm包，并且⼿动解决包的依赖性关系</span><br><span class="line"> ps：实际情况下，很难分辨缺少什么依赖包</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 2、yum命令：</span></span><br><span class="line"> 相关rpm包事先都被存放于⼀个仓库⾥，仓库包含了所有的依赖包，所以yum按照可以帮我们解决依赖性问题</span><br></pre></td></tr></table></figure>

<h4 id="RPM包获取"><a href="#RPM包获取" class="headerlink" title="RPM包获取"></a>RPM包获取</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.本地的ISO镜像光盘(软件包可能存在版本偏低情况) : 挂载镜像有以下三种⽅式</span></span><br><span class="line">⽅式1： [root@localhost ~]<span class="comment"># mount /dev/cdrom /opt/</span></span><br><span class="line"></span><br><span class="line">⽅式2： [root@localhost ~]<span class="comment"># mount /dev/sr0 /opt/</span></span><br><span class="line"></span><br><span class="line">⽅式3 [root@localhost ~]<span class="comment"># mount -o loop /xxx.iso /opt</span></span><br><span class="line"></span><br><span class="line">查看光盘⾥的rpm包 [root@localhost ~]<span class="comment"># ls /opt/Packages/</span></span><br><span class="line"><span class="comment"># 2.⾃⼰去⽹上下载rpm包进⾏安装</span></span><br><span class="line"><span class="comment"># 3.联⽹从yum仓库⾥获取rpm包 # yum的时候</span></span><br></pre></td></tr></table></figure>

<h3 id="1-rpm命令"><a href="#1-rpm命令" class="headerlink" title="1.rpm命令"></a>1.rpm命令</h3><h5 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1、安装：rpm -ivh &lt;RPM包名全称&gt;</span></span><br><span class="line"><span class="comment">#2、卸载：rpm -e &lt;RPM包名&gt;</span></span><br><span class="line"><span class="comment">#3、升级：rpm -Uvh &lt;RPM包名&gt;</span></span><br><span class="line"><span class="comment">#4、查询：</span></span><br><span class="line">	rpm -qa 					 <span class="comment">#查询系统中安装的所有RPM软件包</span></span><br><span class="line">	rpm -qa | grep php 　　 	   <span class="comment">#检索系统中已经安装有关php的软件包</span></span><br><span class="line">	rpm -q &lt;RPM包名&gt; 　　 		  <span class="comment">#查询指定软件包是否已安装</span></span><br><span class="line"> 								[root@egon ~]<span class="comment"># rpm -q zip</span></span><br><span class="line"> 								zip-3.0-11.el7.x86_64</span><br><span class="line"> </span><br><span class="line">rpm -qi &lt;RPM包名&gt; 　　 				<span class="comment">#查询系统中已安装包的描述信息</span></span><br><span class="line">rpm -ql &lt;RPM包名&gt; 　　 				<span class="comment">#查询系统中已安装包⾥所包含的⽂件</span></span><br><span class="line">rpm -qc &lt;RPM包名&gt; 				 <span class="comment">#查询指定软件包的所有配置⽂件</span></span><br><span class="line"> 									[root@egon ~]<span class="comment"># rpm -qc mariadb</span></span><br><span class="line"> 									/etc/my.cnf.d/client.cnf</span><br><span class="line">rpm -qd &lt;RPM包名&gt;					 <span class="comment"># 查询某个包安装的帮助⽂档</span></span><br><span class="line"> 									[root@localhost ~]<span class="comment"># rpm -qd zlib </span></span><br><span class="line"> </span><br><span class="line">rpm -qf ⽂件路径　　 				  <span class="comment">#查询系统中指定⽂件所属的软件包</span></span><br><span class="line">                                     [root@egon ~]<span class="comment"># rpm -qf /usr/sbin/ifconfig</span></span><br><span class="line">                                     net-tools-2.0-0.25.20131004git.el7.x86_64</span><br><span class="line">-p 							<span class="comment"># 在上述选项的基础上加选项-p，就可以查看尚未安装的rpm包信息</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -e dos2unix # 先卸载⼀下，证明本地rpm数据库中没有该包信息</span></span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -qip /opt/Packages/dos2unix-6.0.3-7.el7.x86_64.rpm</span></span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -qlp /opt/Packages/dos2unix-6.0.3-7.el7.x86_64.rpm</span></span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -qcp /opt/Packages/dos2unix-6.0.3-7.el7.x86_64.rpm</span></span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -qdp /opt/Packages/dos2unix-6.0.3-7.el7.x86_64.rpm</span></span><br><span class="line"></span><br><span class="line">额外选项</span><br><span class="line">--nomd5 	<span class="comment"># 不检验软件包的签名</span></span><br><span class="line">--nodeps 	<span class="comment"># 忽略依赖性安装软件，安装后软件有可能⽆法使⽤，最好是解决依赖性后再安装</span></span><br><span class="line"> 				[root@localhost ~]<span class="comment"># rpm -e dos2unix --nodeps # 忽略依赖关系</span></span><br><span class="line"> </span><br><span class="line">--force <span class="comment"># 强制安装软件包,只有安装和升级可以强制执⾏</span></span><br></pre></td></tr></table></figure>

<h5 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1、rpm包在本地</span></span><br><span class="line">	[root@egon ~]<span class="comment"># mount /dev/sr0 /opt</span></span><br><span class="line">	[root@egon ~]<span class="comment"># rpm -ivh /opt/Packages/dos2unix-6.0.3-7.el7.x86_64.rpm</span></span><br><span class="line"><span class="comment">#2、rpm来⾃于⽹络，如果安装过程中报错：curl: (60) Peer&#x27;s Certificate has expired，请先将系统时间修改正确，然后再安装即可</span></span><br><span class="line">[root@egon ~]<span class="comment"># rpm -ivh</span></span><br><span class="line">https://mirrors.aliyun.com/zabbix/zabbix/4.0/rhel/7/x86_64/zabbix-agent-4.0.0-</span><br><span class="line">2.el7.x86_64.rpm</span><br></pre></td></tr></table></figure>

<h5 id="安装与依赖性"><a href="#安装与依赖性" class="headerlink" title="安装与依赖性"></a>安装与依赖性</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@egon ~]<span class="comment"># rpm -ivh /opt/Packages/httpd-2.4.6-88.el7.centos.x86_64.rpm</span></span><br><span class="line">错误：依赖检测失败：</span><br><span class="line"> 	/etc/mime.types 被 httpd-2.4.6-88.el7.centos.x86_64 需要</span><br><span class="line"> 	httpd-tools = 2.4.6-88.el7.centos 被 httpd-2.4.6-88.el7.centos.x86_64 需要</span><br><span class="line"> 	libapr-1.so.0()(64bit) 被 httpd-2.4.6-88.el7.centos.x86_64 需要</span><br><span class="line"> 	libaprutil-1.so.0()(64bit) 被 httpd-2.4.6-88.el7.centos.x86_64 需要</span><br><span class="line">[root@egon ~]<span class="comment">#</span></span><br><span class="line"><span class="comment"># 解决思路：安装提示的库，安装</span></span><br><span class="line">[root@egon ~]<span class="comment"># rpm -ivh /opt/Packages/apr-1.4.8-3.el7_4.1.x86_64.rpm</span></span><br><span class="line">[root@egon ~]<span class="comment"># rpm -ivh /opt/Packages/apr-util-1.5.2-6.el7.x86_64.rpm</span></span><br><span class="line">[root@egon ~]<span class="comment"># rpm -ivh /opt/Packages/httpd-tools-2.4.6-88.el7.centos.x86_64.rpm</span></span><br><span class="line">[root@egon ~]<span class="comment"># yum search mime.types # 查看到mime.types对应的依赖包为mailcap-。。。</span></span><br><span class="line">[root@egon ~]<span class="comment"># rpm -ivh /opt/Packages/mailcap-2.1.41-2.el7.noarch.rpm</span></span><br><span class="line">然后重新安装</span><br><span class="line">[root@egon ~]<span class="comment"># rpm -ivh /opt/Packages/httpd-2.4.6-88.el7.centos.x86_64.rpm</span></span><br><span class="line">准备中... <span class="comment">################################# [100%]</span></span><br><span class="line">正在升级/安装...</span><br><span class="line"> 1:httpd-2.4.6-88.el7.centos <span class="comment">################################# [100%]</span></span><br></pre></td></tr></table></figure>

<h5 id="升级rpm包"><a href="#升级rpm包" class="headerlink" title="升级rpm包"></a>升级rpm包</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1、下载⼀个低版本、⼀个⾼版本</span></span><br><span class="line">wget https://mirrors.aliyun.com/zabbix/zabbix/3.0/rhel/7/x86_64/zabbix-agent-3.0.9-</span><br><span class="line">1.el7.x86_64.rpm</span><br><span class="line">wget https://mirrors.aliyun.com/zabbix/zabbix/4.2/rhel/7/x86_64/zabbix-agent-4.2.0-</span><br><span class="line">1.el7.x86_64.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment">#2、先安装低版本</span></span><br><span class="line">[root@egon ~]<span class="comment"># rpm -ivh zabbix-agent-3.0.9-1.el7.x86_64.rpm</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#3、再安装⾼版本，会报错</span></span><br><span class="line">[root@egon ~]<span class="comment"># rpm -ivh zabbix-agent-4.2.0-1.el7.x86_64.rpm</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#4、如果采⽤--force选项，那就是强制安装，会同时存在两个版本，该⽅案不可取</span></span><br><span class="line">[root@egon ~]<span class="comment"># rpm -qa |grep zabbix</span></span><br><span class="line">zabbix-agent-3.0.9-1.el7.x86_64</span><br><span class="line">[root@egon ~]<span class="comment"># rpm -ivh zabbix-agent-4.2.0-1.el7.x86_64.rpm --force</span></span><br><span class="line">。。。安装成功。。。</span><br><span class="line">[root@egon ~]<span class="comment"># rpm -qa |grep zabbix # 同时两个版本共存</span></span><br><span class="line">zabbix-agent-3.0.9-1.el7.x86_64</span><br><span class="line">zabbix-agent-4.2.0-1.el7.x86_64</span><br><span class="line"></span><br><span class="line"><span class="comment">#5、重来，采⽤升级⽅式安装</span></span><br><span class="line">[root@egon ~]<span class="comment"># rpm -e zabbix-agent-3.0.9-1.el7.x86_64</span></span><br><span class="line">[root@egon ~]<span class="comment"># rpm -e zabbix-agent-4.2.0-1.el7.x86_64</span></span><br><span class="line">[root@egon ~]<span class="comment"># rpm -qa |grep zabbix</span></span><br><span class="line">[root@egon ~]<span class="comment"># rpm -ivh zabbix-agent-3.0.9-1.el7.x86_64.rpm</span></span><br><span class="line">。。。</span><br><span class="line">[root@egon ~]<span class="comment"># rpm -Uvh zabbix-agent-4.2.0-1.el7.x86_64.rpm</span></span><br><span class="line">。。。清理⽼版本，安装新版本。。。</span><br><span class="line">[root@egon ~]<span class="comment"># rpm -qa |grep zabbix-agent # 只留下⼀个新版本</span></span><br><span class="line">zabbix-agent-4.2.0-1.el7.x86_64</span><br></pre></td></tr></table></figure>

<h5 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">安装如下软件包:</span><br><span class="line">	vsftpd</span><br><span class="line">    samba</span><br><span class="line">    nfs-utils</span><br><span class="line">    httpd</span><br><span class="line">    dhcp</span><br><span class="line">    postfix</span><br><span class="line">    php</span><br><span class="line">    lftp</span><br><span class="line">    dos2unix</span><br><span class="line">    unix2dos</span><br><span class="line">    tigervnc</span><br></pre></td></tr></table></figure>

<h3 id="2-yum软件包管理工具"><a href="#2-yum软件包管理工具" class="headerlink" title="2.yum软件包管理工具"></a>2.yum软件包管理工具</h3><h5 id="查看yum命令与配置文件"><a href="#查看yum命令与配置文件" class="headerlink" title="查看yum命令与配置文件"></a>查看yum命令与配置文件</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># rpm -q yum</span></span><br><span class="line">	yum-3.4.3-161.el7.centos.noarch</span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -qc yum</span></span><br><span class="line">    /etc/logrotate.d/yum</span><br><span class="line">    /etc/yum.conf</span><br><span class="line">    /etc/yum/version-groups.conf</span><br></pre></td></tr></table></figure>

<h5 id="yum常用命令"><a href="#yum常用命令" class="headerlink" title="yum常用命令"></a>yum常用命令</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">常⽤选项说明：</span><br><span class="line"><span class="comment">#仓库 </span></span><br><span class="line">         yum repolist 							<span class="comment"># 查询可⽤仓库</span></span><br><span class="line">         yum repolist all 						<span class="comment">#查看包括已启⽤或禁⽤的所有仓库状态</span></span><br><span class="line">         <span class="comment"># 关闭与启⽤仓库：本质:都是在修改repo⽂件中的enable的值 0 不启⽤ 1 启⽤</span></span><br><span class="line">         yum-config-manager --<span class="built_in">disable</span> epel 		<span class="comment">#关闭仓库epel</span></span><br><span class="line">         yum-config-manager --<span class="built_in">enable</span> epel 		<span class="comment">#启⽤仓库epel</span></span><br><span class="line"><span class="comment">#查看</span></span><br><span class="line">    	yum list 								<span class="comment">#列出可⽤仓库中所有的软件包</span></span><br><span class="line">     	yum list | less</span><br><span class="line">     	yum grouplist 							<span class="comment">#列出可⽤仓库中的软件组</span></span><br><span class="line"></span><br><span class="line"> yum provides /usr/sbin/ifconfig 				<span class="comment">#查询命令所属的软件包，可以不加路径，只写命</span></span><br><span class="line">令名字</span><br><span class="line">                                                 <span class="comment">#与rpm -qf的区别在于yum provides后可以只</span></span><br><span class="line">跟命名名</span><br><span class="line"> </span><br><span class="line"><span class="comment">#安装 </span></span><br><span class="line">        yum install httpd httpd-tools		  <span class="comment">#加上-y选项可以变成⾮交互</span></span><br><span class="line">        yum groupinstall <span class="string">&quot;开发⼯具&quot;</span> -y 			<span class="comment">#安装软件组，⼀个软件组中包含了多个软件包</span></span><br><span class="line">        yum groups install <span class="string">&quot;开发⼯具&quot;</span> -y 		<span class="comment">#同上</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#卸载 </span></span><br><span class="line">		yum remove httpd httpd-tools http* 			   <span class="comment">#卸载软件包</span></span><br><span class="line"> 		yum groupremove <span class="string">&quot;开发⼯具&quot;</span> -y. 					<span class="comment">#卸载软件组</span></span><br><span class="line">		yum groups remove <span class="string">&quot;开发⼯具&quot;</span> -y 				<span class="comment">#同上</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">#重装 	</span></span><br><span class="line">		yum reinstall httpd 		<span class="comment">#不⼩⼼删除了配置⽂件的时,可以reinstall⼀下</span></span><br><span class="line">		</span><br><span class="line"><span class="comment">#更新 	</span></span><br><span class="line">		yum check-update 			<span class="comment">#检查可以更新的软件包</span></span><br><span class="line"> 		yum update -y 				<span class="comment">#更新所有软件包,包括内核,通常只在刚装完系统时执⾏</span></span><br><span class="line"> 		yum update httpd -y 		<span class="comment">#更新某个软件包</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">#缓存 </span></span><br><span class="line">         yum makecache 				<span class="comment">#制作元数据缓存</span></span><br><span class="line">         yum clean all 				<span class="comment">#清理元数据缓存</span></span><br><span class="line">         vim /etc/yum.conf 			<span class="comment">#默认软件包下载安装后会⾃动删除</span></span><br><span class="line">         </span><br><span class="line">                                     <span class="comment">#设置keepcache=1 即开启了软件包缓存</span></span><br><span class="line">                                     <span class="comment">#缓存⽬录为配置⽂件中指定的cachedir</span></span><br><span class="line">                                     </span><br><span class="line"><span class="comment">#历史记录</span></span><br><span class="line">         yum <span class="built_in">history</span> 				 <span class="comment"># 查看执⾏过的yum命令历史记录</span></span><br><span class="line">         yum <span class="built_in">history</span> info ID号 		<span class="comment"># 查看具体某⼀条yum命令的详细信息</span></span><br><span class="line">         yum <span class="built_in">history</span> undo ID号 		<span class="comment"># 撤销执⾏过的历史命令</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># 关于安装需要注意：</span></span><br><span class="line"></span><br><span class="line">⽆论yum安装的软件来⾃何⽅，yum时刻以⾃⼰仓库中的repodata存储的依赖关系为准，如果有多个仓库，就依</span><br><span class="line">次检索</span><br><span class="line"></span><br><span class="line"><span class="comment">#1、yum直接安装公⽹的rpm包, 会⾃动查找当前系统上已有的仓库解决依赖关系</span></span><br><span class="line">	yum install https://mirrors.aliyun.com/centos/7.6.1810/os/x86_64/Packages/samba-</span><br><span class="line">4.8.3-4.el7.x86_64.rpm</span><br><span class="line"> </span><br><span class="line"><span class="comment">#2、Yum直接安装本地的rpm包,会⾃动查找当前系统上已有的仓库解决依赖关系</span></span><br><span class="line">	yum localinstall -y /mnt/Packages/httpd-2.4.6-88.el7.centos.x86_64.rpm</span><br></pre></td></tr></table></figure>

<h5 id="系统常见源"><a href="#系统常见源" class="headerlink" title="系统常见源"></a>系统常见源</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.⾃定义的本地源</span><br><span class="line">2.⽹络上的源头，如：base基础源、epel扩展源、与服务相关的源(官⽹)</span><br></pre></td></tr></table></figure>

<h4 id="本地镜像文件作为源-本地源"><a href="#本地镜像文件作为源-本地源" class="headerlink" title="本地镜像文件作为源(本地源)"></a>本地镜像文件作为源(本地源)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">1.挂载</span><br><span class="line">	<span class="comment"># ⽅式1: [root@localhost ~]# mount /dev/cdrom /opt/</span></span><br><span class="line">    <span class="comment"># ⽅式2: [root@localhost ~]# mount /dev/sr0 /opt/</span></span><br><span class="line">    <span class="comment"># ⽅式3: [root@localhost ~]# mount -o loop /xxx.iso /opt</span></span><br><span class="line">    查看光盘⾥的rpm包: [root@localhost ~]<span class="comment"># ls /opt/Packages/</span></span><br><span class="line">    </span><br><span class="line">2.编辑repo文件</span><br><span class="line">	[root@localhost ~]<span class="comment"># cd /etc/yum.repos.d/</span></span><br><span class="line">    [root@localhost yum.repos.d]<span class="comment"># vim local.repo 	# ⽂件名⾃定义，必须以.repo结尾</span></span><br><span class="line">    [<span class="built_in">local</span>] 					<span class="comment"># 仓库的实际名字,任意</span></span><br><span class="line">    name=<span class="built_in">local</span> 					<span class="comment"># 仓库的描述，任意</span></span><br><span class="line">    baseurl=file:///opt 		<span class="comment"># 仓库位置,可以是 http:// https:// ftp:// file://</span></span><br><span class="line">    enabled=1 					<span class="comment"># 启⽤仓库，默认就是启⽤的</span></span><br><span class="line">    gpgcheck=0 					<span class="comment"># 检查安装的rpm是否是合法的，0表示不检验	</span></span><br><span class="line"></span><br><span class="line">3.检查可用仓库</span><br><span class="line">	[root@localhost ~]<span class="comment"># yum repolist # 查询可⽤仓库</span></span><br><span class="line">	[root@localhost ~]<span class="comment"># yum repolist all # 查看所有仓库，包括禁⽤的</span></span><br><span class="line">	</span><br><span class="line">4.安装,查询,卸载</span><br><span class="line">	[root@localhost ~]<span class="comment"># yum list # 列出可⽤的软包</span></span><br><span class="line">    [root@localhost ~]<span class="comment"># yum install vsftpd -y</span></span><br><span class="line">    [root@localhost ~]<span class="comment"># yum list vsftpd httpd</span></span><br><span class="line">    [root@localhost ~]<span class="comment"># yum remove vsftpd -y</span></span><br><span class="line">    </span><br><span class="line">    [root@localhost ~]<span class="comment"># yum install glib* httpd -y</span></span><br><span class="line">    [root@localhost ~]<span class="comment"># yum provides vsftp # 查询某个软件（可以是未安装的）是由哪个rpm包提供</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># yum reinstall</span></span><br><span class="line">    [root@egon ~]<span class="comment"># rm -rf /etc/httpd/conf/httpd.conf</span></span><br><span class="line">    [root@egon ~]<span class="comment"># yum reinstall httpd -y &amp;&gt; /dev/null</span></span><br><span class="line">    [root@egon ~]<span class="comment"># ls /etc/httpd/conf/httpd.conf</span></span><br><span class="line">    /etc/httpd/conf/httpd.conf</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># yum update</span></span><br><span class="line">    [root@localhost ~]<span class="comment"># yum -y update samba</span></span><br><span class="line">    [root@localhost ~]<span class="comment"># yum -y update</span></span><br><span class="line">    </span><br><span class="line">5.软件包组安装,查询,卸载</span><br><span class="line">	[root@localhost ~]<span class="comment"># yum grouplist</span></span><br><span class="line">    [root@localhost ~]<span class="comment"># yum groupinstall &quot;GNOME 桌⾯&quot; -y</span></span><br><span class="line">    [root@egon ~]<span class="comment"># yum groupinstall &quot;开发⼯具&quot; -y</span></span><br><span class="line">    [root@egon ~]<span class="comment"># yum groupremove &quot;开发⼯具&quot; -y</span></span><br></pre></td></tr></table></figure>

<h4 id="制作本地源共享"><a href="#制作本地源共享" class="headerlink" title="制作本地源共享"></a>制作本地源共享</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">==================在服务端上执⾏如下操作==================</span><br><span class="line"><span class="comment"># 1、环境准备</span></span><br><span class="line">    [root@egon ~]<span class="comment"># systemctl stop firewalld</span></span><br><span class="line">    [root@egon ~]<span class="comment"># systemctl disable firewalld</span></span><br><span class="line">    [root@egon ~]<span class="comment"># setenforce 0</span></span><br><span class="line">    [root@egon ~]<span class="comment"># sed -i &#x27;s#^SELINUX=.*#SELINUX=disabled#g&#x27; /etc/selinux/config </span></span><br><span class="line"><span class="comment"># 2、安装ftp服务</span></span><br><span class="line">    [root@egon ~]<span class="comment"># yum install vsftpd -y </span></span><br><span class="line">    [root@egon ~]<span class="comment"># systemctl start vsftpd</span></span><br><span class="line">    [root@egon ~]<span class="comment"># systemctl status vsftpd # 查看状态，确保开启</span></span><br><span class="line">    [root@egon ~]<span class="comment"># systemctl enable vsftpd</span></span><br><span class="line"><span class="comment"># 3、采集软件包放到⼀个⽬录下</span></span><br><span class="line">可以基于3.3的⽅式，也可以偷个懒直接⽤镜像⾥现成的，毕竟是实验嘛，但⽆论何种⽅式，都⼀定要解决好依赖</span><br><span class="line">关系才能⽤来做yum源，本例就⽤现成的吧</span><br><span class="line">    [root@egon ~]<span class="comment"># mkdir /var/ftp/centos7</span></span><br><span class="line">    [root@egon ~]<span class="comment"># mount /dev/sr0 /var/ftp/centos7</span></span><br><span class="line"><span class="comment"># 或者拷⻉</span></span><br><span class="line">    [root@egon ~]<span class="comment"># mount /dev/sr0 /opt</span></span><br><span class="line">    [root@egon ~]<span class="comment"># mkdir /var/ftp/centos7</span></span><br><span class="line">    [root@egon ~]<span class="comment"># find /opt/Packages/ -type f -name &quot;*.rpm&quot; |xargs -I &#123;&#125; cp -rp &#123;&#125;</span></span><br><span class="line">/var/ftp/centos7/</span><br><span class="line">==================在客户端上执⾏如下操作==================</span><br><span class="line"><span class="comment"># 1、环境准备</span></span><br><span class="line">    [root@egon ~]<span class="comment"># systemctl stop firewalld</span></span><br><span class="line">    [root@egon ~]<span class="comment"># systemctl disable firewalld</span></span><br><span class="line">    [root@egon ~]<span class="comment"># setenforce 0</span></span><br><span class="line">    [root@egon ~]<span class="comment"># sed -i &#x27;s#^SELINUX=.*#SELINUX=disabled#g&#x27; /etc/selinux/config </span></span><br><span class="line">    [root@egon ~]<span class="comment"># ping -c 2 192.168.12.42 # ping⼀下服务端的ip地址，保证⽹络畅通</span></span><br><span class="line"><span class="comment"># 2、在客户端配置⽹络yum源 </span></span><br><span class="line">	[root@egon yum.repos.d]<span class="comment"># cd /etc/yum.repos.d/</span></span><br><span class="line">    [root@egon yum.repos.d]<span class="comment"># mkdir bak</span></span><br><span class="line">    [root@egon yum.repos.d]<span class="comment"># mv *.repo bak/</span></span><br><span class="line">    [root@egon yum.repos.d]<span class="comment"># cat &gt;&gt; ftp.repo &lt;&lt; EOF</span></span><br><span class="line">    &gt; [ftp_repo] &gt; name = This is Ftp Share Repo</span><br><span class="line">    &gt; baseurl = ftp://192.168.12.42/centos7 </span><br><span class="line">    &gt; enabled = 1 &gt; gpgcheck = 0 &gt; EOF</span><br><span class="line">    <span class="comment"># 注意：客户端baseurl指向的⽂件夹⽆论是什么，在该⽂件夹的⼦⽬录⼀级必须有⼀个repodata数据库</span></span><br></pre></td></tr></table></figure>






      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/07/14/Linux%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="左大大">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="左大大的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/07/14/Linux%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/" class="post-title-link" itemprop="url">Linux文件处理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-07-14 18:20:25" itemprop="dateCreated datePublished" datetime="2020-07-14T18:20:25+08:00">2020-07-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="文件处理"><a href="#文件处理" class="headerlink" title="文件处理"></a>文件处理</h2><h4 id="文件处理基础"><a href="#文件处理基础" class="headerlink" title="文件处理基础"></a>文件处理基础</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查找命令所在位置</span></span><br><span class="line">	<span class="built_in">which</span> ls</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据文件属性查找文件（find）</span></span><br><span class="line">	</span><br><span class="line">	共用参数：</span><br><span class="line">		-a : 并且</span><br><span class="line">		-o : 或者</span><br><span class="line">		[root@python <span class="built_in">test</span>]<span class="comment"># find ./ -size -30M -o -size +50M</span></span><br><span class="line">            ./</span><br><span class="line">            ./txt</span><br><span class="line">            ./txt2</span><br><span class="line"></span><br><span class="line">	1、按照文件名称查找</span><br><span class="line">        [root@python ~]<span class="comment"># find /root/ -name &quot;txt*&quot; -a -size +40M</span></span><br><span class="line">            /root/txt2</span><br><span class="line">            /root/a/b/c/txt2</span><br><span class="line">        [root@python ~]<span class="comment"># find /root/ -name &quot;txt*&quot;  -size +40M</span></span><br><span class="line">            /root/txt2</span><br><span class="line">            /root/a/b/c/txt2</span><br><span class="line"></span><br><span class="line">	2、按照文件的创建时间来查找</span><br><span class="line">        +7day	: 7天以前创建</span><br><span class="line">        -7day	：7天以内创建</span><br><span class="line">        7day	：正好7天</span><br><span class="line"></span><br><span class="line">        -ctime : 按照创建时间查询</span><br><span class="line">        -mtime : 按照修改时间查询</span><br><span class="line">        -atime : 按照访问的时间查询</span><br><span class="line">	</span><br><span class="line">	<span class="comment"># 3天以内创建</span></span><br><span class="line">		[root@python ~]<span class="comment"># find /root/ -ctime -3</span></span><br><span class="line">	<span class="comment"># 3天以前创建</span></span><br><span class="line">		[root@python ~]<span class="comment"># find /root/ -ctime +3</span></span><br><span class="line">	</span><br><span class="line">	3、按照文件属性查找</span><br><span class="line">		[root@python ~]<span class="comment"># find /root/ -size +10M -user test</span></span><br><span class="line">        	/root/txt</span><br><span class="line">        [root@python ~]<span class="comment"># find /root/ -size +10M -group test</span></span><br><span class="line">        	/root/txt</span><br><span class="line"></span><br><span class="line">	4、按照文件的大小查找</span><br><span class="line">		find [查询的路径] -size [大小]</span><br><span class="line">		find /root/ -size +50M ： 查询大于50M的文件</span><br><span class="line">		find /root/ -size 20M ： 查询等于20M的文件</span><br><span class="line">		find /root/ -size -60M ： 查询小于60M的文件</span><br><span class="line">		</span><br><span class="line">	5、设置查询最高的目录层级（目录层级参数必须放在第一位）</span><br><span class="line">		[root@python ~]<span class="comment"># find /root/  -maxdepth 3 -a  -size +40M</span></span><br><span class="line">        	/root/txt2</span><br><span class="line">        [root@python ~]<span class="comment"># find /root/  -maxdepth 6 -a  -size +40M</span></span><br><span class="line">            /root/txt2</span><br><span class="line">            /root/a/b/c/txt2</span><br><span class="line">        </span><br><span class="line">	6、按照文件类型来查询</span><br><span class="line">		<span class="comment"># 按照目录查询</span></span><br><span class="line">		[root@python ~]<span class="comment"># find /root/ -type d</span></span><br><span class="line">		<span class="comment"># 按照普通文件来查询</span></span><br><span class="line">		[root@python ~]<span class="comment"># find /root/ -type f</span></span><br><span class="line">		<span class="comment"># 查看设备文件</span></span><br><span class="line">		[root@python dev]<span class="comment"># find /dev/ -type c</span></span><br><span class="line"></span><br><span class="line">	7、按照权限来查询</span><br><span class="line">        [root@python <span class="built_in">test</span>]<span class="comment"># ll</span></span><br><span class="line">        总用量 122880</span><br><span class="line">        -r--r-----. 1 <span class="built_in">test</span> user1 20971520 6月  16 17:33 txt</span><br><span class="line">        -rw-r--r--. 1 root root  41943040 6月  16 17:33 txt1</span><br><span class="line">        -rwxr-xr-x. 1 root root  62914560 6月  16 17:33 txt2</span><br><span class="line">        [root@python <span class="built_in">test</span>]<span class="comment"># find ./  -perm 440</span></span><br><span class="line">        	./txt</span><br><span class="line">        [root@python <span class="built_in">test</span>]<span class="comment"># find ./  -perm 644</span></span><br><span class="line">            ./txt1</span><br><span class="line">            ./txt2</span><br><span class="line"></span><br><span class="line">	[root@python ~]<span class="comment"># useradd user1</span></span><br><span class="line">	[root@python ~]<span class="comment"># useradd user2</span></span><br><span class="line">	[root@python ~]<span class="comment"># useradd user3</span></span><br><span class="line"></span><br><span class="line">	r（4）	: 只读</span><br><span class="line">	w（2）	：只写</span><br><span class="line">	x（1）	：执行</span><br><span class="line"></span><br><span class="line">	rw-r--r--</span><br><span class="line">	6   4  4</span><br><span class="line">	所属用户  所属用户组  其他用户</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	chmod : 修改文件权限</span><br><span class="line">		chmod 755 [文件路径]</span><br><span class="line">	chown : 修改所属用户及用户组</span><br><span class="line">		chown 用户.用户组 [文件路径]</span><br><span class="line"></span><br><span class="line">	8、处理查询结果</span><br><span class="line">    	<span class="comment"># 直接跟命令</span></span><br><span class="line">    	[root@python <span class="built_in">test</span>]<span class="comment"># find ./  -perm 755 -ls</span></span><br><span class="line">    	202362858    0 drwxr-xr-x   2 root    root  41 6月 16 17:59 ./</span><br><span class="line">    	134514204 6140 -rwxr-xr-x   1 root    root  62 6月 16 17:33 ./txt2</span><br><span class="line">		</span><br><span class="line">    	<span class="comment"># exec（推荐）</span></span><br><span class="line">    	<span class="comment"># &#123;&#125;：代表前面查询出来的内容</span></span><br><span class="line">    	find ./ -size +50M -<span class="built_in">exec</span> cp &#123;&#125; /opt/ \;</span><br><span class="line"></span><br><span class="line">    	<span class="comment"># 使用管道</span></span><br><span class="line">    	<span class="comment"># xargs是将前面命令执行的结果先用一个&#123;&#125;来保存，然后用&#123;&#125;取出来处理</span></span><br><span class="line">    	find ./ -size +50M | xargs -I &#123;&#125; cp &#123;&#125; /mnt/</span><br><span class="line">    </span><br><span class="line">总结:</span><br><span class="line">	vimdiff : 差异化编辑</span><br><span class="line"></span><br><span class="line">find:</span><br><span class="line">	1、按照名称来查询  -name</span><br><span class="line">	2、按照时间来查询  -ctime -mtime -atime</span><br><span class="line">	3、按照文件属性查询	-<span class="built_in">type</span> d(文件目录) f(普通文件) c(设备文件字符) l(链接文件) b(设备文件块)</span><br><span class="line">	4、按照文件大小	-size</span><br><span class="line">	5、按照权限查询	-perm</span><br><span class="line">		r（4）	: 只读</span><br><span class="line">		w（2）	：只写</span><br><span class="line">		x（1）	：执行</span><br><span class="line"></span><br><span class="line">	6、按照属主或属组查询 -user -group</span><br><span class="line">	7、控制目录深度（参数必须放在第一位）-maxdepth</span><br><span class="line">	</span><br><span class="line">	-<span class="built_in">exec</span> : 将find查询内容交给后面的其他命令来处理</span><br><span class="line">	xargs : 将find查询的结果格式化后，交给其他命令来处理</span><br></pre></td></tr></table></figure>

<h4 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1、查找ifconfig命令⽂件的位置，⽤不同的⽅式实现</span><br><span class="line">[root@python <span class="built_in">test</span>]<span class="comment"># which ifconfig</span></span><br><span class="line">/usr/sbin/ifconfig</span><br><span class="line">[root@python <span class="built_in">test</span>]<span class="comment"># find / -name &quot;ifconfig&quot;</span></span><br><span class="line">/usr/sbin/ifconfig</span><br><span class="line"></span><br><span class="line">2、查找/etc/中的所有⼦⽬录（仅⽬录）复制到/tmp下</span><br><span class="line">[root@python <span class="built_in">test</span>]<span class="comment"># find /etc -type d -exec cp -r &#123;&#125; /tmp/ \;</span></span><br><span class="line"></span><br><span class="line">3、将/etc⽬录复制到/var/tmp/， 将/var/tmp/etc中的所有⽬录设置权限777(仅⽬录) 将/var/tmp/etc中所有⽂件权限设置为666</span><br><span class="line">[root@python ~]<span class="comment"># cp -r /etc/ /var/tmp/</span></span><br><span class="line">[root@python ~]<span class="comment"># find /var/tmp/etc/ -type d -exec chmod 777 &#123;&#125; \;</span></span><br><span class="line">[root@python ~]<span class="comment"># find /var/tmp/etc/ -type f -exec chmod 666 &#123;&#125; \;</span></span><br></pre></td></tr></table></figure>

<h4 id="文件上传与下载"><a href="#文件上传与下载" class="headerlink" title="文件上传与下载"></a>文件上传与下载</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">wget : 下载文件</span><br><span class="line">	安装:yum install wget -y</span><br><span class="line"></span><br><span class="line">	wget url</span><br><span class="line">		-O : 指定下载文件的路径及名称</span><br><span class="line"></span><br><span class="line">curl ：读取文件</span><br><span class="line">	-o : 指定下载文件的路径及名称</span><br><span class="line">	-k ： 免证书认证</span><br><span class="line"></span><br><span class="line">sz : 下载文件（从linux系统下载文件至windows）</span><br><span class="line">	安装:yum install lrzsz -y</span><br><span class="line"></span><br><span class="line">rz : 上传文件</span><br><span class="line">	rz [文件路径]</span><br></pre></td></tr></table></figure>

<h4 id="输出与重定向"><a href="#输出与重定向" class="headerlink" title="输出与重定向"></a>输出与重定向</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">0	: 标准输入</span><br><span class="line">1	：标准输出</span><br><span class="line">2	：标准错误输出</span><br><span class="line">&amp;	：标准输出及错误输出</span><br><span class="line"></span><br><span class="line">命令  &gt;&gt; file 2&gt;&amp;1</span><br><span class="line">命令 &amp;&gt;&gt;file</span><br></pre></td></tr></table></figure>

<h4 id="字符处理命令"><a href="#字符处理命令" class="headerlink" title="字符处理命令"></a>字符处理命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 排序sort</span></span><br><span class="line">-n <span class="comment"># 依照数值的⼤⼩排序</span></span><br><span class="line">-r <span class="comment"># 以相反的顺序来排序</span></span><br><span class="line">-k <span class="comment"># 以某列进⾏排序</span></span><br><span class="line">-t <span class="comment"># 指定分割符，默认是以空格为分隔符</span></span><br><span class="line"></span><br><span class="line">[root@python ~]<span class="comment"># sort -t &quot;:&quot; -n -k2 3.txt </span></span><br><span class="line">g:0</span><br><span class="line">k:2</span><br><span class="line">j:3</span><br><span class="line">d:7</span><br><span class="line">h:8</span><br><span class="line">l:9</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重复uniq</span></span><br><span class="line">-c <span class="comment"># 在每列旁边显示该⾏重复出现的次数。</span></span><br><span class="line">-d <span class="comment"># 仅显示重复出现的⾏列。</span></span><br><span class="line">-u <span class="comment"># 仅显示出⼀次的⾏列。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串分割命令cut</span></span><br><span class="line">-d <span class="comment"># 指定字段的分隔符，默认的字段分隔符为&quot;TAB&quot;；</span></span><br><span class="line">-f <span class="comment"># 显示指定字段的内容；</span></span><br><span class="line">	cat /etc/passwd | cut -d: -f7</span><br><span class="line">	cat 4.txt | sort | uniq -c | sort -r | head -n 3 | cut -d <span class="string">&quot; &quot;</span> -f8</span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串替换tr</span></span><br><span class="line">-d <span class="comment"># 删除字符</span></span><br><span class="line">cat /etc/passwd | tr <span class="string">&quot;root&quot;</span> <span class="string">&quot;ROOT&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计字数的</span></span><br><span class="line">-c <span class="comment"># 统计⽂件的Bytes数；</span></span><br><span class="line">-l <span class="comment"># 统计⽂件的⾏数；</span></span><br><span class="line">-w <span class="comment"># 统计⽂件中单词的个数，默认以空⽩字符做为分隔符</span></span><br></pre></td></tr></table></figure>

<h4 id="打包压缩方法"><a href="#打包压缩方法" class="headerlink" title="打包压缩方法"></a>打包压缩方法</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">方法一:</span><br><span class="line"><span class="comment"># 1、打包</span></span><br><span class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># tar cvf etc_bak.tar /etc/ # c创建 v详细 f打包后⽂件路径</span></span><br><span class="line">ps:</span><br><span class="line">	打包的⽬标路径如果是绝对路径，会提示：tar: 从成员名中删除开头的“/”，不影响打包，</span><br><span class="line"> 添加-P选项便不再提示：tar cvPf ...</span><br><span class="line"> </span><br><span class="line"> 可以<span class="built_in">cd</span> 到 /etc下然后tar cvf etc_bak.tar *打包，这样去掉了⼀层⽂件夹</span><br><span class="line"><span class="comment"># 2、压缩</span></span><br><span class="line">	[root@localhost <span class="built_in">test</span>]<span class="comment"># gzip etc_bak.tar # ⽂件体积变⼩，并且加上后缀.gz</span></span><br><span class="line">ps:</span><br><span class="line">     gzip -&gt; gunzip</span><br><span class="line">     bzip2-&gt; bunzip2</span><br><span class="line"><span class="comment">#3、上述两步可以合⼆为⼀</span></span><br><span class="line">    [root@localhost <span class="built_in">test</span>]<span class="comment"># tar czvf etc1_bak.tar.gz /etc/ # 选项z代表gzip压缩算法</span></span><br><span class="line">    [root@localhost <span class="built_in">test</span>]<span class="comment"># tar cjvf etc1_bak.tar.bz2 /etc/ # 选项j代表bzip2压缩算法</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">方法二:</span><br><span class="line"><span class="comment">#zip压缩</span></span><br><span class="line">选项：</span><br><span class="line">     -r <span class="comment">#递归压缩 压缩⽬录</span></span><br><span class="line"></span><br><span class="line">     -q <span class="comment">#静默输出</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 示例1、 [root@localhost ~]# zip /test/bak.zip a.txt b.txt c.txt # zip后的第⼀个参数是压缩包路径，其余为被压缩的⽂件</span></span><br><span class="line">     adding: a.txt (stored 0%)</span><br><span class="line">     adding: b.txt (stored 0%)</span><br><span class="line">     adding: c.txt (stored 0%)</span><br><span class="line"> </span><br><span class="line">[root@localhost ~]<span class="comment"># ls /test/</span></span><br><span class="line">	bak.zip</span><br><span class="line"><span class="comment"># 示例1、 [root@localhost ~]# zip -rq etc.zip /etc # 加上-q后压缩过程不再提示</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压缩	</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#1、针对xxx.tar.gz 或者 xxx.tar.bz2，统⼀使⽤</span></span><br><span class="line">    	[root@localhost <span class="built_in">test</span>]<span class="comment"># tar xvf 压缩包 -C 解压到的⽬录 # ⽆需指定解压算法，tar⾃动判断</span></span><br><span class="line">    <span class="comment">#2、针对xxx.zip，⽤unzip</span></span><br><span class="line">        选项：</span><br><span class="line">             -l <span class="comment">#显示压缩包的列表信息</span></span><br><span class="line">             -q <span class="comment">#静默输出</span></span><br><span class="line">             -d <span class="comment">#解压到指定的⽬录 </span></span><br><span class="line">    		[root@localhost <span class="built_in">test</span>]<span class="comment"># unzip -q xxx.zip -d /opt</span></span><br><span class="line"></span><br><span class="line">gzip :</span><br><span class="line">	压缩</span><br><span class="line">		gzip [文件路径]</span><br><span class="line">	解压</span><br><span class="line">		gzip -d 1.txt.gz</span><br><span class="line"></span><br><span class="line">tar :</span><br><span class="line">	tar 打包</span><br><span class="line">		-f : 指定打包的名称</span><br><span class="line">		-c : 将某些文件进行打包</span><br><span class="line">		tar -c -f test.tar 1.txt</span><br><span class="line">		</span><br><span class="line">		-v : 显示打包的整个过程</span><br><span class="line">		</span><br><span class="line">		-z : 指定使用gzip压缩工具进行压缩</span><br><span class="line">		-j : 使用bzip2压缩工具进行压缩</span><br><span class="line">		</span><br><span class="line">	tar 解压</span><br><span class="line">		-f : 指定打包的名称</span><br><span class="line">		-x : 将某些打包文件进行解压</span><br><span class="line">		-v : 显示解压的整个过程</span><br></pre></td></tr></table></figure>

<h4 id="软连接"><a href="#软连接" class="headerlink" title="软连接"></a>软连接</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">软连接相当于Windows中的快捷方式，</span><br><span class="line"></span><br><span class="line">ln -s 源路径  目标路径</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/07/10/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86-%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="左大大">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="左大大的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/07/10/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86-%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/" class="post-title-link" itemprop="url">Linux权限管理-文件权限</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-07-10 18:20:25" itemprop="dateCreated datePublished" datetime="2020-07-10T18:20:25+08:00">2020-07-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="权限管理-文件权限"><a href="#权限管理-文件权限" class="headerlink" title="权限管理-文件权限"></a>权限管理-文件权限</h1><h3 id="1-1基本权限介绍"><a href="#1-1基本权限介绍" class="headerlink" title="1.1基本权限介绍"></a>1.1基本权限介绍</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">基本权限类型:</span><br><span class="line">	r:可读   --&gt; 4</span><br><span class="line">	w:可写   --&gt; 2</span><br><span class="line">	x:可执行 --&gt; 1</span><br><span class="line">	</span><br><span class="line">权限的归属:</span><br><span class="line">	属主:  u</span><br><span class="line">	属组:  g</span><br><span class="line">	其他人: o</span><br><span class="line">eg:</span><br><span class="line">	[root@aliyun ~]# ls -l a.txt</span><br><span class="line">-rw-r--r-- 1 root root 1146 Jul 16 18:42 a.txt</span><br><span class="line">⽂件类型：</span><br><span class="line">	-：⽂本⽂档</span><br><span class="line">     d：⽬录</span><br><span class="line">     b：设备block</span><br><span class="line">     c：字符设备</span><br><span class="line">     s：套接字⽂件</span><br><span class="line">     l：软链接</span><br><span class="line">权限</span><br><span class="line"> </span><br><span class="line">硬链接个数</span><br><span class="line">属主</span><br><span class="line">属组</span><br><span class="line">⽂件所占⽤的空间(以字节为单位)</span><br><span class="line">⽂件（⽬录）最近访问（修改）时间</span><br><span class="line">⽂件名</span><br></pre></td></tr></table></figure>

<h3 id="1-2设置权限"><a href="#1-2设置权限" class="headerlink" title="1.2设置权限"></a>1.2设置权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">1.修改属主,属组(chown)</span><br><span class="line">	[root@aliyun ~]<span class="comment"># chown alice.hr file1 # 改属主、属组</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># chown alice file1 # 只改属主</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># chown .hr file1 # 只改属组</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># chown -R /test # 递归修改</span></span><br><span class="line"></span><br><span class="line">2.修改u、g、o对应的权限</span><br><span class="line">	<span class="comment"># 加减法</span></span><br><span class="line">    chmod u+x,g-w,o+r a.txt</span><br><span class="line">    <span class="comment"># 赋值</span></span><br><span class="line">    chmod a=rwx a.txt</span><br><span class="line">    chmod a=- a.txt</span><br><span class="line">    chmod ug=rw,o=r file1</span><br><span class="line">    <span class="comment"># 数字</span></span><br><span class="line">    chmod 644 file1</span><br><span class="line">    chmod -R 777 xxx/</span><br><span class="line"></span><br><span class="line">ps:把某⼀个⾮属主⽤户添加到⽂件的属组⾥，他就拥有了该组的权限，⽽不再是其他⼈</span><br><span class="line"></span><br><span class="line"><span class="comment">#eg1:要想在⽬录下创建\删除内容：对⽬录的x权限+对⽬录的w权限</span></span><br><span class="line">	<span class="comment"># 1、设置权限</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># mkdir -p /a/b/c</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># chmod -R o=x /a # 其他⼈o对当前⽬录及其⼦⽬录都有x权限</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># chmod o+w /a/b/c # 其他⼈o对/a/b/c⽬录有w权限</span></span><br><span class="line">	<span class="comment"># 2、查看权限</span></span><br><span class="line">	[root@aliyun ~]<span class="comment"># ls -dl /a</span></span><br><span class="line">    drwxr-x--x 3 root root 4096 Aug 11 16:24 /a [root@aliyun ~]<span class="comment"># ls -dl /a/b</span></span><br><span class="line">    drwxr-x--x 3 root root 4096 Aug 11 16:24 /a/b [root@aliyun ~]<span class="comment"># ls -dl /a/b/c</span></span><br><span class="line">    drwxr-x-wx 2 root root 4096 Aug 11 16:25 /a/b/c</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 3、验证</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># [root@aliyun ~]# su - gg</span></span><br><span class="line">    Last login: Tue Aug 11 16:17:28 CST 2020 on pts/2 [gg@aliyun ~]$ touch /a/b/c/1.txt</span><br><span class="line">    [gg@aliyun ~]$ <span class="built_in">exit</span></span><br><span class="line">    <span class="built_in">logout</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># ls /a/b//c/</span></span><br><span class="line">    1.txt</span><br><span class="line">    </span><br><span class="line"><span class="comment">#eg2:要浏览⽬录下内容：对⽬录的x权限+对⽬录的r权限</span></span><br><span class="line"> 	[root@aliyun ~]<span class="comment"># mkdir -p /a/b/c</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># chmod -R o=x /a</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># chmod o+r /a/b/c</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># [root@aliyun ~]# touch /a/b/c/&#123;1..3&#125;.txt</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># [root@aliyun ~]# su - gg</span></span><br><span class="line">    Last login: Tue Aug 11 16:27:33 CST 2020 on pts/2 [gg@aliyun ~]$ ls /a/b/c</span><br><span class="line">    1.txt 2.txt 3.txt</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">#eg3:要执⾏⽬录下程序：对⽬录的x权限+对⽂件的x权限，如果⽂件是解释型语⾔的脚本程序，还需要对⽂件有r权限</span></span><br><span class="line">	[root@aliyun ~]<span class="comment"># mkdir -p /a/b/c</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># chmod -R o=x /a/b/c</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># cp /bin/echo /a/b/c</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># chmod o=x /a/b/c/echo</span></span><br><span class="line">    [root@aliyun ~]<span class="comment"># [root@aliyun ~]# su - gg</span></span><br><span class="line">    Last login: Tue Aug 11 16:30:17 CST 2020 on pts/2 </span><br><span class="line">    [gg@aliyun ~]$ /a/b/c/<span class="built_in">echo</span> <span class="string">&quot;hello egon&quot;</span></span><br><span class="line">    hello egon</span><br></pre></td></tr></table></figure>

<h3 id="用户组管理"><a href="#用户组管理" class="headerlink" title="用户组管理"></a>用户组管理</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">RBAC 权限管理</span><br><span class="line">RBAC的优缺点</span><br><span class="line">优点：</span><br><span class="line">	简化了用户和权限的关系</span><br><span class="line">	易扩展、易维护</span><br><span class="line">缺点：</span><br><span class="line">	RBAC模型没有提供操作顺序的控制机制，这一缺陷使得RBAC模型很难适应哪些对操作次序有严格要求的系统</span><br><span class="line">	id 获取当前用户的信息</span><br><span class="line">whoami 获取当前用户</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">用户uid小于1000的是系统用户</span><br><span class="line">用户uid大于等于1000s的是普通用户</span><br><span class="line"></span><br><span class="line">创建用户：useradd</span><br><span class="line">删除用户：userdel</span><br><span class="line">修改用户：usermod</span><br><span class="line">修改密码：passwd</span><br><span class="line">创建组：groupadd</span><br><span class="line">修改组：groupmod</span><br><span class="line">删除组：groupdel</span><br><span class="line"></span><br><span class="line">/etc/passwd		用户配置文件</span><br><span class="line">/etc/shadow		用户的密码文件</span><br><span class="line">/etc/group</span><br><span class="line">/etc/gshadow</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 自己创建用户</span><br><span class="line">1、创建用户组：/etc/group</span><br><span class="line">2、创建用户组密码文件：/etc/gshadow</span><br><span class="line">3、创建用户：/etc/passwd</span><br><span class="line">4、创建用户密码：/etc/shadow</span><br><span class="line">5、创建家目录</span><br><span class="line">6、修改权限，复制隐藏文件</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">1.创建用户:</span><br><span class="line">	[root@localhost ~]# useradd user1 1</span><br><span class="line">	</span><br><span class="line">2.查看用户:</span><br><span class="line">	[root@localhost ~]# id user1</span><br><span class="line">    uid=1002(user1) gid=1003(user1) 组=1003(user1) [root@localhost ~]# who # 查看所有登录的⽤户信息</span><br><span class="line">    [root@localhost ~]# whoami # 查看当前登录的⽤户名</span><br><span class="line">注:</span><br><span class="line">	当创建⼀个⽤户时，如果没有指定⽤户的主组，将会创建⼀个同名的组作为⽤户的主组</span><br><span class="line"></span><br><span class="line">3.删除用户:</span><br><span class="line">	[root@localhost ~]# userdel user1 # 删除⽤户user1，但不删除⽤户家⽬录和mail</span><br><span class="line">	[root@localhost ~]# userdel -r user1 # 要想删彻底,加-r选项</span><br><span class="line">	</span><br><span class="line">4.useradd命令详解:创建用户的同时指定选项</span><br><span class="line">	#怎样在Linux系统中添加⼀个新的⽤户账户</span><br><span class="line">    1) 掌握useradd命令的功能：新增⼀个⽤户。</span><br><span class="line">    2) 了解useradd命令的常⽤选项：</span><br><span class="line">    3) –u：指定⽤户的UID</span><br><span class="line">    4) –g：指定⽤户所属的主群</span><br><span class="line">     –G：指定⽤户所属的附加群</span><br><span class="line">    5) –d：指定⽤户的家⽬录</span><br><span class="line">    6) –c：指定⽤户的备注信息</span><br><span class="line">    7) –s：指定⽤户所⽤的shell</span><br><span class="line">    8) -e：修改过期时间</span><br><span class="line">    9) -M: 不创建家⽬录</span><br><span class="line">    10) -r: 创建系统账户，uid处于系统⽤户范围内，默认就没有家⽬录</span><br><span class="line">    #灵活应⽤useradd命令的举例：</span><br><span class="line">    a) 例如：在系统中新增⼀个fox（狐狸）⽤户的命令：useradd fox</span><br><span class="line">    b) 例如：在系统中新增⼀个⽤户user01，属组为police以及uid为600的命令：</span><br><span class="line">    useradd –u 600 –g police user01</span><br><span class="line">    # 其他练习</span><br><span class="line">    [root@root ~]# useradd user01 </span><br><span class="line">    [root@root ~]# useradd user02 -u 503 # 创建⽤户usr02，指定uid</span><br><span class="line">    [root@root ~]# useradd user03 -d /aaa # 创建⽤户user03 指定家⽬录</span><br><span class="line">    [root@root ~]# useradd user04 -M # 创建⽤户user04，不创建家⽬录</span><br><span class="line">    [root@root ~]# useradd user05 -s /sbin/nologin # 创建⽤户并指定shell</span><br><span class="line">    [root@root ~]# useradd user06 -g hr # 创建⽤户，指定主组</span><br><span class="line">    [root@root ~]# useradd user07 -G sale # 创建⽤户，指定附加组</span><br><span class="line">    [root@root ~]# useradd user08 -e 2014-04-01 # 指定过期时间</span><br><span class="line">    [root@root ~]# useradd user10 -u 4000 -s /sbin/nologin</span><br><span class="line">    [root@aliyum ~]# useradd xxx -M -s /sbin/nologin # 创建普通⽤户，但是没有家⽬录，不能登录系统</span><br><span class="line">    [root@aliyum ~]# useradd -r yyy -s /sbin/nologin # yyy属于系统⽤户，uid处于系统⽤户uid范围内</span><br><span class="line">    </span><br><span class="line">5.usermod命令</span><br><span class="line">	同useradd参数基⼀致，只不过useradd是添加，usermod是修改</span><br><span class="line">	-u #指定要修改⽤户的UID</span><br><span class="line">    -g #指定要修改⽤户基本组</span><br><span class="line">    -a #将⽤户添加到补充组。仅与-G选项⼀起使⽤</span><br><span class="line">    -G #指定要修改⽤户附加组，使⽤逗号隔开多个附加组, 覆盖原有的附加组</span><br><span class="line">    -d #指定要修改⽤户家⽬录</span><br><span class="line">    -c #指定要修改⽤户注释信息</span><br><span class="line">    -s #指定要修改⽤户的bash shell</span><br><span class="line">    [root@root ~]# usermod -e 2013-02-11 user1000 # 修改过期时间</span><br><span class="line">    [root@root ~]# usermod -g group1 jj # 修改主组</span><br><span class="line">    [root@root ~]# usermod -a -G group2 jj # 修改附加组，-a添加，不加-a代表覆盖</span><br><span class="line">    其他选项</span><br><span class="line">    -m #将⽤户主⽬录的内容移动到新位置。如果当前主⽬录不存在，则不会创建新的主⽬录</span><br><span class="line">    -l #指定要修改⽤户的登陆名</span><br><span class="line">    -L #指定要锁定的⽤户</span><br><span class="line">    -U #指定要解锁的⽤户</span><br><span class="line">    </span><br><span class="line">6.设定与修改密码</span><br><span class="line">	passwd # 默认给当前⽤户设定密码</span><br><span class="line">    passwd ⽤户名 # root⽤户可以给⾃⼰以及所有其他⽤户设定密码，普通⽤户只能设定⾃⼰的密码</span><br><span class="line">    echo &quot;密码&quot; | passwd --stdin ⽤户名 # ⾮交互式</span><br><span class="line">    # 补充：可以利⽤系统内置变量⽣成随机字符串来充当密码</span><br><span class="line">    [root@aliyum ~]# echo $RANDOM|md5sum|cut -c 1-10</span><br><span class="line">    70ba11a74b</span><br><span class="line">    [root@aliyum ~]#</span><br></pre></td></tr></table></figure>

<h3 id="组管理"><a href="#组管理" class="headerlink" title="组管理"></a>组管理</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">groupadd    # 添加组</span><br><span class="line">groupmod	# 修改组</span><br><span class="line">groupdel	# 删除组</span><br><span class="line">gpasswd 	# 设置组密码</span><br><span class="line">newgrp 		# 切换主组</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">1.创建组</span><br><span class="line">	[root@aliyum ~]# groupadd gg1 #创建基本组, 不指定gid</span><br><span class="line">    [root@aliyum ~]# tail -1 /etc/group</span><br><span class="line">    gg1:x:2005: </span><br><span class="line">    [root@aliyum ~]# groupadd -g 5555 gg2 #创建基本组, 指定gid为5555</span><br><span class="line">    [root@aliyum ~]# tail -1 /etc/group</span><br><span class="line">    gg2:x:5555: </span><br><span class="line">    [root@aliyum ~]# groupadd -r gg3 # 创建系统组，gid从201-999</span><br><span class="line">    [root@aliyum ~]# tail -1 /etc/group</span><br><span class="line">    gg3:x:991: </span><br><span class="line">    [root@aliyum ~]#</span><br><span class="line"> </span><br><span class="line">2.修改组</span><br><span class="line">	[root@aliyum ~]# groupmod -g 1111 gg3</span><br><span class="line">    [root@aliyum ~]# tail -1 /etc/group</span><br><span class="line">    gg3:x:1111: </span><br><span class="line">    [root@aliyum ~]# </span><br><span class="line">    [root@aliyum ~]# groupmod -n new_gg3 gg3 # -n 修改组名称</span><br><span class="line">    [root@aliyum ~]# tail -1 /etc/group</span><br><span class="line">    new_gg3:x:1111: </span><br><span class="line">    [root@aliyum ~]#</span><br><span class="line">    </span><br><span class="line">3.删除组</span><br><span class="line">	如果⼀个组是⼀个⽤户的主组，那么该组不能被删除，删掉⽤户会默认⼀起删掉他的主组</span><br><span class="line">    [root@aliyum ~]# useradd egon1</span><br><span class="line">    [root@aliyum ~]# groupadd devops</span><br><span class="line">    [root@aliyum ~]# usermod -G devops egon1</span><br><span class="line">    [root@aliyum ~]# id egon1</span><br><span class="line">    uid=2004(egon1) gid=2004(egon1) groups=2004(egon1),5556(devops)</span><br><span class="line">    [root@aliyum ~]# [root@aliyum ~]# groupdel devops # 附加组可以删除</span><br><span class="line">    [root@aliyum ~]# id egon1 # 查看⽤户，发现他的附加组没有了</span><br><span class="line">    uid=2004(egon1) gid=2004(egon1) groups=2004(egon1) </span><br><span class="line">    [root@aliyum ~]# groupdel egon1 # ⽆法删除组egon1，因为组egon1属于egon1⽤户的主组</span><br><span class="line">    groupdel: cannot remove the primary group of user &#x27;egon1&#x27;</span><br><span class="line">    [root@aliyum ~]#</span><br></pre></td></tr></table></figure>

<h4 id="组成员管理"><a href="#组成员管理" class="headerlink" title="组成员管理"></a><strong>组成员管理</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">对于⽤户来说，组是分类的 </span><br><span class="line">1、⼀类是基本组或称主组,⽤户只能有⼀个基本组，创建时可通过-g指定，如未指定则创建⼀个默认的组(与⽤户同名) </span><br><span class="line"></span><br><span class="line">2、附加组,基本组不能满⾜授权要求，创建附加组，将⽤户加⼊该组，⽤户可以属于多个附加组，加⼊⼀个组后</span><br><span class="line">就拥有了该组的权限</span><br><span class="line">	注意：gpasswd将⽤户添加到组或从组中删除，只针对已存在的⽤户</span><br><span class="line">    [root@root ~]# gpasswd -a user07 it # 将某个⽤户加⼊到某个组</span><br><span class="line">    [root@root ~]# gpasswd -M user02,user03,user04 it # 将多个⽤户加⼊到it组 </span><br><span class="line">    [root@root ~]# gpasswd -A lhf it # 指定lhf为组it的组⻓，除了root⽤户外lhf⽤户也可以采⽤第⼀</span><br><span class="line">    条命令往it组⾥添加成员</span><br><span class="line">    [root@root ~]# grep &#x27;it&#x27; /etc/group # 查看it组中的成员</span><br><span class="line">    it:x:505:user02,user03,user04</span><br><span class="line">    [root@root ~]# gpasswd -d user07 it # 删除⽤户usr07从it组</span><br><span class="line">    </span><br><span class="line">我们可以为组设置密码，然后让⼀些⾮组成员的⽤户通过命令”newgrp 组”临时切换到组内并输⼊密码的⽅式获取</span><br><span class="line">⽤户组的权限和特性，如下</span><br><span class="line">	[root@localhost ~]# groupadd group1</span><br><span class="line">    [root@localhost ~]# gpasswd group1</span><br><span class="line">    正在修改 group1 组的密码</span><br><span class="line">    新密码：</span><br><span class="line">    请重新输⼊新密码：</span><br><span class="line">    [root@localhost ~]# touch /tmp/a.txt</span><br><span class="line">    [root@localhost ~]# ll /tmp/a.txt</span><br><span class="line">    -rw-r--r-- 1 root root 0 8⽉ 10 21:01 /tmp/a.txt</span><br><span class="line">    [root@localhost ~]# chown .group1 /tmp/a.txt</span><br><span class="line">    [root@localhost ~]# !ll</span><br><span class="line">    ll /tmp/a.txt</span><br><span class="line">    -rw-r--r-- 1 root group1 0 8⽉ 10 21:01 /tmp/a.txt</span><br><span class="line">    [root@localhost ~]# chmod g+w /tmp/a.txt</span><br><span class="line">    [root@localhost ~]# gpasswd group1</span><br><span class="line">    [root@localhost ~]# su - egon</span><br><span class="line">    上⼀次登录：⼀ 8⽉ 10 21:01:46 CST 2020pts/0 上 </span><br><span class="line">    [egon@localhost ~]$ echo 123 &gt;&gt; /tmp/a.txt # 此时没有权限</span><br><span class="line">    -bash: /tmp/a.txt: 权限不够</span><br><span class="line">    [egon@localhost ~]$ newgrp group1 # 临时切换到组group1下，拥有其权限</span><br><span class="line">    密码：</span><br><span class="line">    [egon@localhost ~]$ echo 123 &gt;&gt; /tmp/a.txt</span><br><span class="line">    [egon@localhost ~]$ cat /tmp/a.txt</span><br><span class="line">    123</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/07/06/%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="左大大">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="左大大的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/07/06/%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96/" class="post-title-link" itemprop="url">Linux系统优化</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-07-06 18:20:25" itemprop="dateCreated datePublished" datetime="2020-07-06T18:20:25+08:00">2020-07-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="系统优化"><a href="#系统优化" class="headerlink" title="系统优化"></a>系统优化</h1><h2 id="开源镜像站"><a href="#开源镜像站" class="headerlink" title="开源镜像站"></a>开源镜像站</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 华为开源镜像站 ： https://mirrors.huaweicloud.com/</span></span><br><span class="line"><span class="comment"># 清华大学开源镜像站：https://mirrors.tuna.tsinghua.edu.cn/</span></span><br><span class="line"><span class="comment"># 网易开源镜像站：http://mirrors.163.com/</span></span><br><span class="line"><span class="comment"># 阿里云开源镜像站：https://developer.aliyun.com/</span></span><br></pre></td></tr></table></figure>

<h3 id="修改下载源"><a href="#修改下载源" class="headerlink" title="修改下载源"></a>修改下载源</h3><p>1、备份配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># cp -a /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak</span></span><br></pre></td></tr></table></figure>

<p>2、下载镜像源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># cat /etc/redhat-release </span></span><br><span class="line">CentOS Linux release 7.6.1810 (Core) </span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># curl -o /etc/yum.repos.d/CentOS-Base.repo https://repo.huaweicloud.com/repository/conf/CentOS-7-reg.repo</span></span><br></pre></td></tr></table></figure>

<p>3、删除本地缓存</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># yum clean all</span></span><br></pre></td></tr></table></figure>

<p>4、生成新的本地缓存</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># yum makecache</span></span><br></pre></td></tr></table></figure>

<p>5、更新系统</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># yum update -y</span></span><br></pre></td></tr></table></figure>

<p>6、安装常用的软件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install tree nmap sysstat lrzsz dos2unix telnet bashcompletion bash-completion-extras vim lsof net-tools rsync ntpdate nfs-utils</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/07/04/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="左大大">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="左大大的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/07/04/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">Linux常用命令</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-07-04 18:20:25" itemprop="dateCreated datePublished" datetime="2020-07-04T18:20:25+08:00">2020-07-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h1><h2 id="CentOS系统"><a href="#CentOS系统" class="headerlink" title="CentOS系统"></a>CentOS系统</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">网路类型: </span><br><span class="line"> 	<span class="number">1.</span>桥接</span><br><span class="line">        跟windows主机共享网络</span><br><span class="line">            不足:占用ip</span><br><span class="line">    <span class="number">2.</span>NAT</span><br><span class="line">        自己用自己虚拟出来的网络</span><br><span class="line">            不足:</span><br><span class="line">    <span class="number">3.</span>仅主机模式</span><br><span class="line">        只允许跟windows主机相连接</span><br><span class="line">        </span><br><span class="line">系统分区:</span><br><span class="line">	<span class="number">1.</span>/boot分区 :系统启动文件</span><br><span class="line">	<span class="number">2.</span>/分区 :日常数据存储</span><br><span class="line">	<span class="number">3.</span>swap分区 :当内存不够用的时候,用swap分区硬盘充当内存使用(系统慢)</span><br><span class="line">	<span class="number">4.</span>home分区 :存放普通用户家目录</span><br><span class="line">	<span class="number">5.</span>var分区 :存放系统文件</span><br><span class="line">	<span class="number">6.</span>/tmp :Linux系统的回收站</span><br><span class="line">        </span><br><span class="line">系统优化:</span><br><span class="line">    <span class="number">1.</span>更换系统镜像源</span><br><span class="line">    <span class="number">2.</span>安装常用得系统软件 vim wget</span><br><span class="line">    <span class="number">3.</span>优化系统内核参数</span><br><span class="line">    <span class="number">4.</span>修改主机名</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">ls</span><br><span class="line">	-a : 显示隐藏文件</span><br><span class="line">	-l : 显示文件详细信息</span><br><span class="line">	-h : 格式化文件大小</span><br><span class="line">mkdir</span><br><span class="line">	-p : 递归创建</span><br><span class="line">	-v : 显示创建过程</span><br><span class="line"><span class="built_in">cd</span></span><br><span class="line"><span class="built_in">pwd</span></span><br><span class="line">touch</span><br><span class="line">rm</span><br><span class="line">	-f : 取消删除提示信息</span><br><span class="line">	-r : 递归删除目录</span><br><span class="line">cp</span><br><span class="line">	-r : 递归复制</span><br><span class="line">mv</span><br><span class="line">lsblk	： 查看本地磁盘</span><br><span class="line">fdisk	： 磁盘分区工具</span><br><span class="line">mount	： 挂载目录</span><br><span class="line">umount	： 卸载挂载</span><br><span class="line">df		： 显示挂载信息</span><br><span class="line">	-h : 格式化分区大小</span><br><span class="line"><span class="built_in">echo</span>	： 打印</span><br><span class="line">printenv：打印环境变量</span><br><span class="line">cat		： 查看文件</span><br><span class="line">&gt; 		：覆盖重定向</span><br><span class="line">&gt;&gt;		：追加重定向</span><br></pre></td></tr></table></figure>

<h2 id="1-常用命令"><a href="#1-常用命令" class="headerlink" title="1.常用命令"></a>1.常用命令</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Linux中最顶级目录是根目录：/</span></span><br><span class="line"><span class="comment"># ~ ：在linux当中指的是当前用户的家目录([用户名@主机名 当前所在的目录])</span></span><br><span class="line">	</span><br><span class="line"><span class="number">1.</span>touch 文件名            <span class="comment"># 创建文件(默认创建在当前用户文件夹下)                 </span></span><br><span class="line">	touch /路径 文件名     	  <span class="comment"># 指定文件夹下创建文件</span></span><br><span class="line"><span class="number">2.</span>ls                     <span class="comment"># 查看文件夹(默认查看当前用户文件夹所有文件)      </span></span><br><span class="line">	ls /文件名            	   <span class="comment"># 查看指定文件夹下文件</span></span><br><span class="line">    ls /					 <span class="comment"># 查看/(根目录)下所有内容</span></span><br><span class="line">    ls -l					 <span class="comment"># 查看文件详细信息(ls -l 等价于 ll)</span></span><br><span class="line"><span class="number">3.</span>mkdir 				 <span class="comment"># 创建文件夹(默认创建在当前用户文件夹下)</span></span><br><span class="line">	mkdir /路径名/文件名     	     <span class="comment"># 指定路径下创建文件夹</span></span><br><span class="line">    mkdir -p  -v /文件名/文件名    <span class="comment"># -p参数 递归创建文件夹  -v参数 显示递归创建过程</span></span><br><span class="line"><span class="number">4.</span>cd  					 <span class="comment"># 绝对路径的方式切换路径（根目录开始） 切换目录默认为家目录</span></span><br><span class="line">	cd .					 <span class="comment"># 在任何目录下都代表当前目录(顶级除外)</span></span><br><span class="line">    cd ..                    <span class="comment"># 在任何目录下都代表上一级目录(顶级除外)</span></span><br><span class="line">	cd /路径名				   <span class="comment"># 切换到指定路径下</span></span><br><span class="line"><span class="number">5.</span>pwd                    <span class="comment"># 查看当前路径    pwd命令查看的所有路径都是从根目录（/）开始的</span></span><br><span class="line"><span class="number">6.</span>hostnamectl <span class="built_in">set</span>-hostname 主机名	 <span class="comment"># 修改主机名(默认localhost 重新进入系统生效)</span></span><br><span class="line"><span class="number">7.</span>exit					 <span class="comment"># 登出</span></span><br><span class="line"><span class="number">8.</span>mv /源路径 /移动后的路径         <span class="comment"># 移动文件及文件夹</span></span><br><span class="line"><span class="number">9.</span>cp [参数] /源路径 /移动后路径    <span class="comment"># 复制文件   </span></span><br><span class="line">	cp -r 目录名 /				      <span class="comment"># 复制目录 -r参数 递归复制</span></span><br><span class="line"><span class="number">10.</span>rm						    <span class="comment"># 删除文件</span></span><br><span class="line">	rm -r 目录名				      <span class="comment"># 删除目录 -r参数 递归删除</span></span><br><span class="line">    rm -r -f 目录名                  <span class="comment"># -f参数 免去删除二次确认</span></span><br><span class="line"><span class="number">11.</span>echo <span class="string">&quot;打印的内容&quot;</span>              <span class="comment"># 打印(类似于print)</span></span><br><span class="line"><span class="number">12.</span>printenv                     <span class="comment"># 打印出当前系统中所有变量</span></span><br><span class="line"><span class="number">13.</span> &gt;							<span class="comment"># 写入内容到文件 覆盖重定向(类似于文件w覆盖写模式)</span></span><br><span class="line">	&gt;&gt;							<span class="comment"># 写入内容到文件 追加重定向(类似于文件a追加写模式)</span></span><br><span class="line"><span class="number">14.</span>cat 文件名                    <span class="comment"># 查看文件内容</span></span><br><span class="line"><span class="number">15.</span><span class="string">&#x27;.&#x27;</span>开头文件					 <span class="comment"># 隐藏文件</span></span><br><span class="line">	ls -a							<span class="comment"># -a参数 查看隐藏文件</span></span><br><span class="line">    ls -h 文件名					  <span class="comment"># -h参数 格式化文件大小便于查看(必须配合-l参数使用)</span></span><br><span class="line"><span class="number">16.</span>reboot						<span class="comment"># 重启系统</span></span><br><span class="line"><span class="number">17.</span>shutdown -h now				<span class="comment"># 立即关机</span></span><br><span class="line">	shutdown -h 时间				   <span class="comment"># 指定时间后关机</span></span><br><span class="line"><span class="number">18.</span>head命令 : 从头查看文件内容</span><br><span class="line">	-n : 设置显示头几行</span><br><span class="line"><span class="number">19.</span>tail命令 : 从尾查看文件内容</span><br><span class="line">	-n : 设置显示末尾几行</span><br><span class="line">	-f : 实时查看文件内容</span><br><span class="line">        </span><br><span class="line"><span class="number">20.</span>alias : 起别名</span><br><span class="line">	alias ll=<span class="string">&#x27;\ls -l -a --color=auto&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="number">20.</span>/dev/zero : 存放无穷无尽的<span class="number">0</span> </span><br><span class="line">   /dev/null : linux系统黑洞</span><br><span class="line">    </span><br><span class="line">lsblk 			<span class="comment"># 查看本地磁盘</span></span><br><span class="line">fdisk			<span class="comment"># 挂载分区工具</span></span><br><span class="line">mount			<span class="comment"># 挂载目录</span></span><br><span class="line">unount			<span class="comment"># 卸载挂载</span></span><br><span class="line">df				<span class="comment"># 显示挂载信息</span></span><br><span class="line">	-h				<span class="comment"># 格式化分区大小</span></span><br></pre></td></tr></table></figure>

<h2 id="2-磁盘操作"><a href="#2-磁盘操作" class="headerlink" title="2.磁盘操作"></a>2.磁盘操作</h2><h3 id="MBR分区"><a href="#MBR分区" class="headerlink" title="MBR分区"></a>MBR分区</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MBR分区</span><br><span class="line">    1.最多⽀持四个主分区</span><br><span class="line">    2.系统只能安装在主分区</span><br><span class="line">    3.扩展分区要占⼀个主分区</span><br><span class="line">    4.MBR 最⼤只⽀持 2TB，但拥有最好的兼容性</span><br></pre></td></tr></table></figure>

<h4 id="fdisk工具"><a href="#fdisk工具" class="headerlink" title="fdisk工具:"></a>fdisk工具:</h4><pre><code>     适⽤于磁盘⼩于2TB的磁盘，分区类型MBR，主分区4或主分区3+扩展分区（逻辑分区+…），分区后需要保存后才能⽣效
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">lsblk /dev/磁盘名			<span class="comment"># 查看本地磁盘</span></span><br><span class="line">fdisk /dev/磁盘名          <span class="comment"># 磁盘分区工具</span></span><br><span class="line">a toggle a bootable flag 					<span class="comment"># 切换分区启动标记</span></span><br><span class="line">b edit bsd disklabel 						<span class="comment"># 编辑sdb磁盘标签</span></span><br><span class="line">c toggle the dos compatibility flag 		<span class="comment"># 切换dos兼容模式</span></span><br><span class="line">d delete a partition 						<span class="comment"># 删除分区 保存退出要执⾏partprobe刷新分区表</span></span><br><span class="line">l <span class="built_in">list</span> known partition types 				<span class="comment"># 显示分区类型</span></span><br><span class="line">m <span class="built_in">print</span> this menu 							<span class="comment"># 显示帮助菜单</span></span><br><span class="line">n add a new partition 						<span class="comment"># 新建分区</span></span><br><span class="line">o create a new empty DOS partition table 	<span class="comment"># 创建新的空⽩分区表</span></span><br><span class="line">p <span class="built_in">print</span> the partition table 				<span class="comment"># 显示分区表的信息</span></span><br><span class="line">q quit without saving changes 				<span class="comment"># 不保存退出</span></span><br><span class="line">s create a new empty Sun disklabel 			<span class="comment"># 创建新的Sun磁盘标签</span></span><br><span class="line">t change a partitions system <span class="built_in">id</span> 			<span class="comment"># 修改分区ID,可以通过l查看id</span></span><br><span class="line">u change display/entry units 				<span class="comment"># 修改容量单位,磁柱或扇区</span></span><br><span class="line">v verify the partition table 				<span class="comment"># 检验分区表</span></span><br><span class="line">w write table to disk <span class="keyword">and</span> exit 				<span class="comment"># 保存退出</span></span><br><span class="line">x extra functionality (experts only) 		<span class="comment"># 拓展功能</span></span><br><span class="line"></span><br><span class="line">优先掌握</span><br><span class="line">    fdisk创建分区</span><br><span class="line">    m				<span class="comment"># 展示帮助信息</span></span><br><span class="line">    p				<span class="comment"># 显示分区列表</span></span><br><span class="line">    n 				<span class="comment"># 创建分区</span></span><br><span class="line">    d				<span class="comment"># 删除分区</span></span><br><span class="line">    w  				<span class="comment"># 保存退出</span></span><br><span class="line">    x 				<span class="comment"># 拓展功能</span></span><br></pre></td></tr></table></figure>

<h4 id="fdisk创建分区"><a href="#fdisk创建分区" class="headerlink" title="fdisk创建分区"></a>fdisk创建分区</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">fdisk /dev/sdb</span><br><span class="line">    欢迎使⽤ fdisk (util-linux <span class="number">2.23</span><span class="number">.2</span>)。</span><br><span class="line">    更改将停留在内存中，直到您决定将更改写⼊磁盘。</span><br><span class="line">    使⽤写⼊命令前请三思。</span><br><span class="line">    Device does <span class="keyword">not</span> contain a recognized partition table</span><br><span class="line">    使⽤磁盘标识符 <span class="number">0x12c57921</span> 创建新的 DOS 磁盘标签。</span><br><span class="line">命令(输⼊ m 获取帮助)：n</span><br><span class="line">    Partition <span class="built_in">type</span>:</span><br><span class="line">     p primary (<span class="number">0</span> primary, <span class="number">0</span> extended, <span class="number">4</span> free)</span><br><span class="line">     e extended</span><br><span class="line">    Select (default p): p</span><br><span class="line">    分区号 (<span class="number">1</span>-<span class="number">4</span>，默认 <span class="number">1</span>)：</span><br><span class="line">    起始 扇区 (<span class="number">2048</span>-<span class="number">41943039</span>，默认为 <span class="number">2048</span>)：</span><br><span class="line">    将使⽤默认值 <span class="number">2048</span></span><br><span class="line">    Last 扇区, +扇区 <span class="keyword">or</span> +size&#123;K,M,G&#125; (<span class="number">2048</span>-<span class="number">41943039</span>，默认为 <span class="number">41943039</span>)：+1G</span><br><span class="line">    分区 <span class="number">1</span> 已设置为 Linux 类型，⼤⼩设为 <span class="number">1</span> GiB</span><br><span class="line">命令(输⼊ m 获取帮助)：p</span><br><span class="line">    磁盘 /dev/sdb：<span class="number">21.5</span> GB, <span class="number">21474836480</span> 字节，<span class="number">41943040</span> 个扇区</span><br><span class="line">    Units = 扇区 of <span class="number">1</span> * <span class="number">512</span> = <span class="number">512</span> <span class="built_in">bytes</span></span><br><span class="line">    扇区⼤⼩(逻辑/物理)：<span class="number">512</span> 字节 / <span class="number">512</span> 字节</span><br><span class="line">    I/O ⼤⼩(最⼩/最佳)：<span class="number">512</span> 字节 / <span class="number">512</span> 字节</span><br><span class="line">    磁盘标签类型：dos</span><br><span class="line">    磁盘标识符：<span class="number">0x12c57921</span></span><br><span class="line">     设备 Boot Start End Blocks Id System</span><br><span class="line">    /dev/sdb1 <span class="number">2048</span> <span class="number">2099199</span> <span class="number">1048576</span> <span class="number">83</span> Linux</span><br><span class="line">命令(输⼊ m 获取帮助)： w <span class="comment"># 保存</span></span><br><span class="line">[root@chenyang ~]<span class="comment"># lsblk /dev/sdb  # 查看分区信息</span></span><br></pre></td></tr></table></figure>

<h4 id="磁盘分区的格式化及挂载"><a href="#磁盘分区的格式化及挂载" class="headerlink" title="磁盘分区的格式化及挂载"></a>磁盘分区的格式化及挂载</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">mkfs.xfs   : 性能强，功能完善</span><br><span class="line">mkfs.ext   : 性能稍弱</span><br><span class="line">mkfs.btrfs : 性能最强 新出不久</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">磁盘必须格式化制作⽂件系统，然后挂载才能使⽤</span></span><br><span class="line"><span class="string">	针对⼀块硬盘/dev/sdb</span></span><br><span class="line"><span class="string">	可以不分区，直接格式化制作⽂件系统</span></span><br><span class="line"><span class="string">	也可以基于mbr或者gpt分区⽅式分区完毕后，针对某⼀个分区⽐如/dev/sdb1制作⽂件系统</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.创建分区并保存</span></span><br><span class="line">	[root@egon ~]<span class="comment"># fdisk /dev/sdb</span></span><br><span class="line">    ...</span><br><span class="line">    命令(输⼊ m 获取帮助)： w <span class="comment"># 保存</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 2.格式化文件系统</span></span><br><span class="line">	[root@egon ~]<span class="comment"># mkfs.xfs /dev/sdb       # /dev/sdb整体就是⼀个分区</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.挂载分区到文件夹上</span></span><br><span class="line">	[root@egon ~]<span class="comment"># mount /dev/sdb1 /opt/</span></span><br><span class="line">				    命令   分区路径  挂载路径</span><br><span class="line">				    </span><br><span class="line"><span class="comment"># 4.查看挂载详情</span></span><br><span class="line">	[root@python mnt]<span class="comment"># df -h</span></span><br><span class="line">	</span><br><span class="line"><span class="comment"># 5.卸载</span></span><br><span class="line">	umount /dev/sdb1 <span class="comment"># 或者umount /opt</span></span><br><span class="line">    (umount -l /dev/sdb1 <span class="comment"># 或者umount -l /opt 强制卸载)</span></span><br><span class="line">	</span><br><span class="line"><span class="comment"># 错误处理</span></span><br><span class="line">    [root@python mnt]<span class="comment"># umount /mnt </span></span><br><span class="line">    umount: /mnt：目标忙。</span><br><span class="line">            (有些情况下通过 lsof(<span class="number">8</span>) 或 fuser(<span class="number">1</span>) 可以找到有关使用该设备的进程的有用信息)</span><br><span class="line">	解决:</span><br><span class="line">        当前所在目录为挂载目录，切换一个目录即可。</span><br></pre></td></tr></table></figure>

<ul>
<li>创建文件(touch)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># # 在Linux系统中创建test.txt</span></span><br><span class="line">[root@localhost ~]<span class="comment"># touch test.txt</span></span><br></pre></td></tr></table></figure>

<ul>
<li>创建文件夹(mkdir)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># # 创建一个文件夹</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkdir /root/python</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls /root/</span></span><br><span class="line">anaconda-ks.cfg  python  test.txt</span><br><span class="line">[root@localhost ~]<span class="comment"># mkdir /root/python1</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls /root/</span></span><br><span class="line">anaconda-ks.cfg  python  python1  test.txt</span><br><span class="line">[root@localhost ~]<span class="comment"># cd /root/python</span></span><br><span class="line">[root@localhost python]<span class="comment"># pwd</span></span><br><span class="line">/root/python</span><br><span class="line"></span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">-p : 递归创建目录</span><br><span class="line">[root@localhost python]<span class="comment"># mkdir -p /aa/bb/cc</span></span><br><span class="line">[root@localhost python]<span class="comment"># cd /aa/bb/cc</span></span><br><span class="line">[root@localhost cc]<span class="comment"># pwd</span></span><br><span class="line">/aa/bb/cc</span><br><span class="line"></span><br><span class="line">-v : 显示创建的过程</span><br><span class="line">[root@localhost cc]<span class="comment"># mkdir -p -v /aaa/bbb/ccc</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">&quot;/aaa&quot;</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">&quot;/aaa/bbb&quot;</span></span><br><span class="line">mkdir: 已创建目录 <span class="string">&quot;/aaa/bbb/ccc&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>查看文件夹下面的文件(ls)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看文件需要跟对应的路径</span></span><br><span class="line"><span class="comment"># Linux中最顶级目录是根目录：/</span></span><br><span class="line">[root@localhost ~]<span class="comment"># # 根目录（最顶级目录）：/</span></span><br><span class="line">[root@localhost ~]<span class="comment"># # 根目录下有哪些内容</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls / </span></span><br><span class="line">bin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看文件的详细信息</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls -l</span></span><br><span class="line">总用量 4</span><br><span class="line">-rw-------. 1 root root 1766 6月  10 17:15 anaconda-ks.cfg</span><br><span class="line">drwxr-xr-x. 2 root root    6 6月  11 15:19 python</span><br><span class="line">drwxr-xr-x. 2 root root    6 6月  11 15:20 python1</span><br><span class="line">[root@localhost ~]<span class="comment"># ll</span></span><br><span class="line">总用量 4</span><br><span class="line">-rw-------. 1 root root 1766 6月  10 17:15 anaconda-ks.cfg</span><br><span class="line">drwxr-xr-x. 2 root root    6 6月  11 15:19 python</span><br><span class="line">drwxr-xr-x. 2 root root    6 6月  11 15:20 python1</span><br></pre></td></tr></table></figure>

<ul>
<li>查看当前所在路径(pwd)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前所在路径：pwd</span></span><br><span class="line"><span class="comment"># pwd命令查看的所有路径都是从根目录（/）开始的</span></span><br><span class="line">[root@localhost ~]<span class="comment"># pwd</span></span><br><span class="line">/root</span><br></pre></td></tr></table></figure>

<ul>
<li>切换目录(cd)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换目录：cd </span></span><br><span class="line"><span class="comment"># 以绝对路径的方式切换路径（从根目录开始）</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cd /etc</span></span><br><span class="line">[root@localhost etc]<span class="comment"># pwd</span></span><br><span class="line">/etc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 以相对路劲方式切换目录</span></span><br><span class="line"><span class="comment"># . 和 .. </span></span><br><span class="line"><span class="comment"># . : 在任何目录下都代表当前目录</span></span><br><span class="line">[root@localhost etc]<span class="comment"># cd .</span></span><br><span class="line">[root@localhost etc]<span class="comment"># pwd</span></span><br><span class="line">/etc</span><br><span class="line"></span><br><span class="line"><span class="comment"># .. : 在任何目录下都代表上一级目录（顶级目录除外）</span></span><br><span class="line">[root@localhost /]<span class="comment"># cd /etc/sysconfig/network-scripts/</span></span><br><span class="line">[root@localhost network-scripts]<span class="comment"># pwd</span></span><br><span class="line">/etc/sysconfig/network-scripts</span><br><span class="line">[root@localhost network-scripts]<span class="comment"># cd ..</span></span><br><span class="line">[root@localhost sysconfig]<span class="comment"># pwd</span></span><br><span class="line">/etc/sysconfig</span><br><span class="line"></span><br><span class="line"><span class="comment"># cd命令切换的默认目录为家目录（~ ：在linux当中指的是当前用户的家目录）</span></span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br><span class="line">[用户名@主机名 当前所在的目录]<span class="comment">#</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改主机名（重新进入系统才会生效）</span></span><br><span class="line">[root@localhost ~]<span class="comment"># hostnamectl set-hostname python</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 退出登录</span></span><br><span class="line">[<span class="built_in">test</span>@python ~]$ <span class="built_in">exit</span></span><br><span class="line">登出</span><br></pre></td></tr></table></figure>

<ul>
<li>移动文件(mv)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 移动文件：mv</span></span><br><span class="line"><span class="comment"># mv 源路径  移动后的路径</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mv /root/test.txt /</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">anaconda-ks.cfg  python  python1</span><br><span class="line">[root@localhost ~]<span class="comment"># ls /</span></span><br><span class="line">a  aa  aaa  bin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  test.txt</span><br></pre></td></tr></table></figure>

<ul>
<li>复制文件(cp)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cp [参数] 源路径  移动后的路径</span></span><br><span class="line"><span class="comment"># 复制文件</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cp anaconda-ks.cfg /</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 递归复制参数</span></span><br><span class="line">-r : 递归复制（常用于复制目录）</span><br><span class="line">[root@localhost ~]<span class="comment"># cp -r python /</span></span><br></pre></td></tr></table></figure>

<ul>
<li>删除文件(rm)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除文件的命令：rm</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">anaconda-ks.cfg  python  python1</span><br><span class="line">[root@localhost ~]<span class="comment"># rm anaconda-ks.cfg </span></span><br><span class="line">rm：是否删除普通文件 <span class="string">&quot;anaconda-ks.cfg&quot;</span>？n</span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">anaconda-ks.cfg  python  python1</span><br><span class="line">[root@localhost ~]<span class="comment"># rm anaconda-ks.cfg </span></span><br><span class="line">rm：是否删除普通文件 <span class="string">&quot;anaconda-ks.cfg&quot;</span>？y</span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">python  python1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除目录（-r ： 递归删除文件）</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">python  python1</span><br><span class="line">[root@localhost ~]<span class="comment"># rm python1</span></span><br><span class="line">rm: 无法删除<span class="string">&quot;python1&quot;</span>: 是一个目录</span><br><span class="line">[root@localhost ~]<span class="comment"># rm -r python1</span></span><br><span class="line">rm：是否删除目录 <span class="string">&quot;python1&quot;</span>？y</span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">python</span><br><span class="line"></span><br><span class="line"><span class="comment"># -f : 免去删除提示</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">python</span><br><span class="line">[root@localhost ~]<span class="comment"># rm -r -f python/</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br></pre></td></tr></table></figure>

<ul>
<li>打印命令(echo)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;打印的内容&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>打印出当前系统中所有的变量</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># printenv </span></span><br></pre></td></tr></table></figure>

<ul>
<li>重定向符号(&gt;和&gt;&gt;)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &gt; 和 &gt;&gt; </span></span><br><span class="line"><span class="comment"># &gt; : 覆盖重定向(先删除文件内容，后写入内容到文件)</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo &quot;Hello China&quot; &gt; test.txt</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &gt;&gt; : 追加重定向（原来的内容不动，后来的内容从底部插入）</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo &quot;Hello World&quot; &gt;&gt; test.txt</span></span><br></pre></td></tr></table></figure>

<ul>
<li>查看文件内容</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># cat test.txt </span></span><br><span class="line">Hello World</span><br></pre></td></tr></table></figure>

<ul>
<li>隐藏文件(.文件名)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文件名以.开头的就是隐藏文件</span></span><br><span class="line"></span><br><span class="line">-a : 查看隐藏文件</span><br><span class="line">[root@localhost ~]<span class="comment"># ls -a</span></span><br><span class="line">....bash_logout  .bash_profile</span><br><span class="line"></span><br><span class="line">-l : 查看文件详细信息</span><br><span class="line">[root@localhost ~]<span class="comment"># ls -l</span></span><br><span class="line">总用量 4</span><br><span class="line">-rw-r--r--. 1 root root 24 6月  11 16:26 test.txt</span><br><span class="line"> 文件权限       所属用户 所属组  文件的大小  创建时间  文件名称</span><br><span class="line"> </span><br><span class="line">[root@localhost ~]<span class="comment"># # ls -l 等价于 ll</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ll</span></span><br><span class="line">总用量 4</span><br><span class="line">-rw-r--r--. 1 root root 24 6月  11 16:26 test.txt</span><br><span class="line">[root@localhost ~]<span class="comment"># ls -l</span></span><br><span class="line">总用量 4</span><br><span class="line">-rw-r--r--. 1 root root 24 6月  11 16:26 test.txt</span><br><span class="line"></span><br><span class="line">-h : 以方便查看方式查看文件大小（必须配合-l参数）</span><br><span class="line"></span><br><span class="line">reboot : 重启系统</span><br><span class="line">shutdown -h now : 立即关机</span><br><span class="line">shutdown -h 2 : </span><br></pre></td></tr></table></figure>

<h2 id="GPT分区"><a href="#GPT分区" class="headerlink" title="GPT分区"></a>GPT分区</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">分区版本:</span><br><span class="line">    beat	: 公测版本</span><br><span class="line">    stable	: 稳定版本</span><br><span class="line">    alpahe	: 内测版本</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">1、相较于MBR分区 </span><br><span class="line">	GPT分区可以实现2TB以上的硬盘分区</span><br><span class="line"></span><br><span class="line">2、分区命令(类似于MBR分区)</span><br><span class="line">	安装分区工具:</span><br><span class="line">		yum install gdisk -y</span><br><span class="line">	分区命令:</span><br><span class="line">		gdisk /dev/sdd</span><br><span class="line">	常用命令:</span><br><span class="line">		? : 查看帮助</span><br><span class="line">		n : 新建一个分区</span><br><span class="line">		p : 查看分区列表</span><br><span class="line">		w : 保存并退出</span><br><span class="line">		d : 删除一个分区	</span><br><span class="line">		</span><br><span class="line">eg:</span><br><span class="line">	[root@python ~]# gdisk /dev/sdd</span><br></pre></td></tr></table></figure>

<h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/bin : 系统命令</span><br><span class="line">/boot: linux系统启动文件</span><br><span class="line">/etc : 系统配置目录</span><br><span class="line">/home: 普通用户的家目录</span><br><span class="line">/media: 多媒体目录</span><br><span class="line">/mnt : 挂载一些硬件设备的目录</span><br><span class="line">/opt : 下载文件常用目录</span><br><span class="line">/proc: 关联系统虚拟设备</span><br><span class="line">/srv : 该⽬录存放⼀些服务启动之后需要提取的数据。</span><br><span class="line">/root: 管理员家目录</span><br><span class="line">/run : 存放系统运行临时数据目录</span><br><span class="line">/sbin: 存放系统管理员命令</span><br><span class="line">/tmp : Linux系统的垃圾桶</span><br><span class="line">/usr : 存放系统安装软件的目录</span><br><span class="line">/var : 存放系统日志</span><br></pre></td></tr></table></figure>

<h2 id="vi-vim编辑器"><a href="#vi-vim编辑器" class="headerlink" title="vi/vim编辑器"></a>vi/vim编辑器</h2><h4 id="vi编辑器常用功能"><a href="#vi编辑器常用功能" class="headerlink" title="vi编辑器常用功能"></a>vi编辑器常用功能</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">vim是vi的升级版(用法命令大同)</span><br><span class="line"></span><br><span class="line">写入</span><br><span class="line">	a : 进入插入模式，并在光标之后进行插入</span><br><span class="line">	i : 进入插入模式，并在光标之前进行插入</span><br><span class="line">	o : 进入插入模式，并在光标所在行开启下一行</span><br><span class="line">	</span><br><span class="line">查找</span><br><span class="line">	在命令行模式下按下键盘上的/，然后输入要查询的内容，搜索到内容后光标自动定位并设置颜色</span><br><span class="line"></span><br><span class="line">删除</span><br><span class="line">	1、进入插入模式，像修改文本一样去删除文件。</span><br><span class="line">	2、连续按d键两次，删除一行内容</span><br><span class="line">	3、先按一个数字n，然后按d键两次，向下删除n行</span><br><span class="line"></span><br><span class="line">复制</span><br><span class="line">	1、连续按y键两次，复制当前光标所在行，p键粘贴</span><br><span class="line">	2、先按一个数字n，然后按y键两次从光标所在行向下复制n行，p键粘贴</span><br><span class="line"></span><br><span class="line">保存</span><br><span class="line">	首先进入末行模式</span><br><span class="line">	w ： 保存</span><br><span class="line">	q : 退出（！强制退出，退出之后未保存内容丢失）</span><br><span class="line"></span><br><span class="line">补充：</span><br><span class="line">	x : 删除光标包含的内容</span><br><span class="line">	u : 返回上一步，只在同一次编辑中有效</span><br><span class="line">	U ：还原上一步</span><br><span class="line">	$ : 光标运行到行尾</span><br><span class="line">	0 : 光标运行到行首</span><br><span class="line">	G ：光标移动到行尾</span><br><span class="line">	gg: 光标移动到行首</span><br><span class="line">	H ：运行第一行的行首</span><br><span class="line">	M ：中间行的行首</span><br><span class="line">	L ：最后一行的行首</span><br><span class="line"></span><br><span class="line">可视块：</span><br><span class="line">	ctrl + v: 选择你要修改的内容，</span><br><span class="line">		删除：x</span><br><span class="line">		编辑：<span class="built_in">shift</span> + i（退出可视块编辑模式按ESC键，等一会才会同步修改内容）</span><br></pre></td></tr></table></figure>

<h4 id="vim编辑器高级"><a href="#vim编辑器高级" class="headerlink" title="vim编辑器高级"></a>vim编辑器高级</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># 定位到某一行</span><br><span class="line">:n  跳转到n行</span><br><span class="line"></span><br><span class="line"># 内容替换(末行模式)</span><br><span class="line">:开始位置,结束的位置  s/被替换内容/替换的内容</span><br><span class="line"></span><br><span class="line">1、指定位置</span><br><span class="line">	:2,10 s/Hello/nihao 从第2行开始，到第十行结束</span><br><span class="line">	:2,$  s/Hello/nihao 从第二行开始，到最后</span><br><span class="line">	:%    s/Hello/nihao 全文替换</span><br><span class="line"></span><br><span class="line">2、写入文件</span><br><span class="line">	:w 写入文件</span><br><span class="line">	:w /root 写入新的文件</span><br><span class="line">	:1,3 w /root/bcd.txt 指定行写入到新的文件中</span><br><span class="line">	:1,3 w！ /root/bcd.txt 指定行强制写入到新的文件中</span><br><span class="line"></span><br><span class="line">3、同时编辑多个文件</span><br><span class="line">	vim -o 文件名 文件名 : 水平分割</span><br><span class="line">	vim -O 文件名 文件名 : 垂直分割</span><br><span class="line"></span><br><span class="line">4、同时对比编辑两个不同文件</span><br><span class="line">	ctrl + ww : 切换屏幕</span><br><span class="line">	</span><br><span class="line">ps:</span><br><span class="line">	有几个文件则保存几次</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">左大大</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
